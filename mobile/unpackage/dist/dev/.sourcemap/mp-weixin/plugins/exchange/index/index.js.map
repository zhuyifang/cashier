{"version":3,"sources":["uni-app:///main.js","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/exchange/index/index.vue?301f","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/exchange/index/index.vue?6a82","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/exchange/index/index.vue?cded","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/exchange/index/index.vue?cc9f","uni-app:///plugins/exchange/index/index.vue","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/exchange/index/index.vue?3f7e","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/exchange/index/index.vue?d948"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,yG,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACsN;AACtN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5BA;AAAA;AAAA;AAAA;AAAi2B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC8Dr3B,gD;;AAEA;AACA,eADA;AAEA,MAFA,kBAEA;AACA;AACA,0CADA;AAEA,uBAFA;AAGA,qBAHA;AAIA;AACA,6BADA;AAEA,6BAFA,CAJA;;AAQA,iBARA;AASA,wBATA;AAUA,cAVA;AAWA,uBAXA;AAYA,oBAZA;AAaA,cAbA;AAcA,iBAdA;AAeA,uBAfA;AAgBA,sBAhBA;AAiBA,mBAjBA;AAkBA,iBAlBA;AAmBA,oBAnBA;AAoBA,0BApBA;AAqBA,aArBA;AAsBA,eAtBA;AAuBA,aAvBA;;AAyBA,GA5BA;AA6BA;AACA;AACA;AACA;AACA,OAHA;AAIA,qBAJA,EADA,EA7BA;;;AAqCA;AACA,4BADA;AAEA,gBAFA;AAGA,8BAHA;AAIA,mBAJA,EArCA;;AA2CA;AACA;AACA,iFADA,GADA;;AAIA;AACA,wBADA,GAJA,CA3CA;;;;AAoDA,mBApDA,+BAoDA;AACA;AACA,iDADA;AAEA,2CAFA;;AAIA,GAzDA;;;AA4DA,iBA5DA,6BA4DA;AACA;AACA;AACA,iDADA;AAEA,eAFA,CAEA;AAFA;AAIA,GAlEA;;AAoEA,eApEA,2BAoEA;AACA;AACA;AACA;AACA;AACA,GAzEA;AA0EA,QA1EA,kBA0EA,OA1EA,EA0EA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iDADA;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,OANA;;AAQA;AACA,qCADA;AAEA,QAFA,CAEA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA,6BADA;AAEA,sBAFA;AAGA,wBAHA;;AAKA;AACA,KAZA;AAaA,GA/GA;AAgHA,QAhHA,oBAgHA;AACA;AACA;AACA;AACA,GApHA;AAqHA;AACA,aADA,qBACA,KADA,EACA,UADA,EACA,UADA,EACA;AACA;AACA;AACA,kBADA;AAEA,yBAFA;;AAIA;AACA,oCADA;AAEA;AACA,sBADA;AAEA,gCAFA;AAGA,gCAHA,EAFA;;AAOA,UAPA,CAOA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA;AACA,OAjBA,EAiBA,KAjBA,CAiBA;AACA;AACA,OAnBA;AAoBA,KA3BA;AA4BA,KA5BA,eA4BA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAtCA;AAuCA,YAvCA,sBAuCA;AACA;AACA;AACA;AACA;AACA,sBADA;AAEA,8BAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA,EAGA,IAHA;AAIA,OAXA,EAWA,GAXA;AAYA,KA5DA;AA6DA,QA7DA,kBA6DA;AACA;;AAEA;AACA,eADA,mBACA,GADA,EACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA,0BADA;AAEA,iCAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,uDADA;AAEA;AACA,8BADA,EAFA;;AAKA,kBALA,CAKA;AACA;AACA;AACA;AACA,mBAFA,MAEA;AACA;AACA;AACA,sCADA;AAEA,kCAFA;AAGA,oCAHA;;AAKA;AACA;AACA;AACA,eAnBA;AAoBA,aA9BA,MA8BA;AACA;AACA,6CADA;AAEA,4BAFA;AAGA,8BAHA;;AAKA;AACA;AACA,SA3CA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoHA,KApLA;AAqLA,aArLA,qBAqLA,CArLA,EAqLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA7LA;AA8LA,WA9LA,qBA8LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBADA;AAEA,uBAFA;;AAIA;AACA,mCADA;AAEA;AACA,yBADA,EAFA;;AAKA,UALA,CAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SALA,MAKA;AACA;AACA,+BADA;AAEA,wBAFA;AAGA,0BAHA;;AAKA;AACA,OApBA,EAoBA,KApBA,CAoBA;AACA;AACA,OAtBA;AAuBA,KAhOA;AAiOA,WAjOA,qBAiOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBADA;AAEA,uBAFA;;AAIA;AACA,mCADA;AAEA,UAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SALA,MAKA;AACA;AACA,+BADA;AAEA,wBAFA;AAGA,0BAHA;;AAKA;AACA,OAjBA,EAiBA,KAjBA,CAiBA;AACA;AACA,OAnBA;AAoBA,KAjQA;AAkQA,YAlQA,oBAkQA,IAlQA,EAkQA;AACA;AACA,gFADA;;AAGA,KAtQA;AAuQA,UAvQA,oBAuQA;AACA;AACA,0CADA;;AAGA,KA3QA;AA4QA,SA5QA,mBA4QA;AACA;AACA;AACA;AACA;AACA;AACA,kBADA;AAEA,uBAFA;;AAIA;AACA;AACA;AACA,oCADA;AAEA;AACA,oBADA,EAFA;;AAKA,UALA,CAKA;AACA;AACA;AACA;AACA;AACA;AACA,+DADA;;AAGA,SALA,MAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OArBA,EAqBA,KArBA,CAqBA;AACA;AACA,OAvBA;AAwBA,KA/SA,EArHA,E;;;;;;;;;;;;;AChEA;AAAA;AAAA;AAAA;AAAgnD,CAAgB,07CAAG,EAAC,C;;;;;;;;;;;ACApoD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"plugins/exchange/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './plugins/exchange/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=2d77edf4&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=2d77edf4&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2d77edf4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"plugins/exchange/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=2d77edf4&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.hiddenBottom = false\n    }\n\n    _vm.e1 = function($event) {\n      _vm.hiddenBottom = true\n    }\n\n    _vm.e2 = function($event) {\n      _vm.dialog = false\n      _vm.code = \"\"\n    }\n\n    _vm.e3 = function($event) {\n      _vm.showRules = false\n      _vm.bottom = \"-998rpx\"\n      _vm.animationData = {}\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n    <app-layout>\n        <app-tab-nav :setTop=\"0\" :border=\"false\" :shadow=\"false\" :height=\"100\" :tabList=\"tabList\" :padding=\"0\" :activeItem=\"activeTab\" @click=\"tabStatus\" :theme=\"getTheme\"></app-tab-nav>\n        <view v-if=\"activeTab == '0'\" class=\"scan\">\n            <view>输入兑换码或者扫码兑换二维码开始兑换</view>\n            <view class=\"scan-input\">\n                <input @focus=\"hiddenBottom=false\" @blur=\"hiddenBottom=true\" placeholder=\"请输入兑换码\" v-model=\"code\" type=\"text\">\n                <image v-if=\"!is_not_wechat\" @click=\"scan\" src=\"./../image/scan.png\"></image>\n            </view>\n            <view @click=\"clerk\" class=\"scan-button\" :style=\"{'background-color': code.length > 0 ? getTheme.background : '#d6d6d6','color' : code.length > 0 ? '#fff' : '#b2b2b2'}\">兑换</view>\n        </view>\n        <view v-if=\"activeTab == '1'\">\n            <view v-if=\"list.length > 0\" class=\"item\" v-for=\"(item,index) in list\" :key=\"index\">\n                <view class=\"main-between cross-center status\">\n                    <view class=\"item-code\" :style=\"{'background-color': item.status == 2 ? getTheme.background_o : '#F5F5F5','color' : item.status == 2 ? getTheme.color : '#999999'}\">{{item.code}}</view>\n                    <view @click=\"toDetail(item)\" class=\"dir-left-nowrap cross-center item-status\" :style=\"{'color': item.status == 2 ? getTheme.color : '#999999'}\">\n                        <view>{{item.status == 2 ? item.last_num + '项待领取' : '已全部领取'}}</view>\n                        <i v-if=\"item.status == 2\" :style=\"{'color': getTheme.color}\" class=\"iconfont icon-right\">&#xe7eb;</i>\n                        <image v-else src=\"/static/image/icon/right.png\"></image>\n                    </view>\n                </view>\n                <view class=\"item-time\">兑换时间：{{item.r_raffled_at}}</view>\n            </view>\n            <view style=\"padding-top: 30%\" v-if=\"list.length == 0\">\n                <app-no-goods title=\"暂无兑换记录\" :is_image=\"1\" background=\"#f7f7f7\"></app-no-goods>\n            </view>\n        </view>\n        <view @click=\"showRule\" class=\"use-info\" :style=\"{'color': getTheme.color}\" :class=\"[`${tabbarbool? 'tabbarbool':''}`]\" v-if=\"setting.is_rules == 1 && activeTab == '0' && hiddenBottom\">使用说明</view>\n        <u-mask :show=\"dialog\" :maskClickAble=\"false\" :zoom=\"false\">\n            <view class=\"dialog\">\n                <image class=\"dialog-img\" src=\"./../image/error.png\"></image>\n                <view class=\"dialog-msg\">\n                    <text>{{msg}}</text>\n                </view>\n                <view class=\"dialog-other\">{{other}}</view>\n                <view @click=\"dialog=false;code=''\" :style=\"{'background-color': getTheme.background}\" class=\"dialog-button\">我知道了</view>\n            </view>\n        </u-mask>\n        <view v-if=\"showRules\" class=\"dialog-bg\">\n            <view class=\"u-rules\" :animation=\"animationData\" :style=\"{bottom: bottom}\" :class=\"[`${tabbarbool? 'tabbarbool':''}`,`${iphone_x? 'iphone_x':''}`]\">\n                <view class=\"u-rules-top dir-right-nowrap\">\n                    <view v-if=\"over\" @click=\"showRules=false;bottom='-998rpx';animationData={}\" class=\"end-close main-center cross-center\">\n                        <image src=\"/static/image/icon/icon-close.png\"></image>\n                    </view>\n                </view>\n\n                <view class=\"u-rules-content\">\n                    <parse :content=\"setting.rules\"></parse>\n                </view>\n            </view>\n        </view>\n        <view @click=\"toGift\" v-if=\"setting.is_to_gift == 1 && hiddenBottom\" class=\"jump-dialog cross-center dir-top-nowrap main-center\" :class=\"[`${tabbarbool? 'tabbarbool':''}`]\">\n            <image :src=\"setting.to_gift_pic\"></image>\n            <view>礼品卡</view>\n        </view>\n    </app-layout>\n</template>\n<script>\n    import appTabNav from \"../../../components/basic-component/app-tab-nav/app-tab-nav.vue\";\n    import uMask from '../../../components/basic-component/u-mask/u-mask.vue';\n    import parse from \"../../../components/basic-component/app-rich/parse.vue\";\n    import appNoGoods from '../../../components/page-component/app-no-goods/app-no-goods.vue';\n    import { mapState, mapGetters } from \"vuex\";\n\n    export default {\n        name: \"index\",\n        data() {\n            return {\n                currentRoute: this.$platDiff.route(),\n                tabbarbool: false,\n                iphone_x: false,\n                tabList: [\n                    {id:0, name: '兑换礼品'},\n                    {id:1, name: '兑换记录'}\n                ],\n                over: false,\n                hiddenBottom: true,\n                code: '',\n                bottom: '-998rpx',\n                activeTab: '0',\n                list: [],\n                setting: {},\n                animationData: {},\n                showRules: false,\n                dialog: false,\n                more: false,\n                loading: false,\n                is_not_wechat: false,\n                msg: '',\n                other: '',\n                page: 1,\n            };\n        },\n        watch: {\n            tabBarNavs: {\n                handler: function() {\n                    this.b();\n                },\n                immediate: true,\n            }\n        },\n        components: {\n            \"app-tab-nav\": appTabNav,\n            parse,\n            \"app-no-goods\": appNoGoods,\n            \"u-mask\": uMask\n        },\n        computed: {\n            ...mapState({\n                tabBarNavs: state => state.mallConfig.navbar.navs,\n            }),\n            ...mapGetters('mallConfig', {\n                getTheme: 'getTheme'\n            })\n        },\n        // #ifdef MP\n        onShareAppMessage() {\n            return this.$shareAppMessage({\n                title: this.$children[0].navigationBarTitle,\n                path: \"/plugins/exchange/index/index\",\n            });\n        },\n        // #endif\n        // #ifdef MP-WEIXIN\n        onShareTimeline() {\n          // 分享朋友圈beta\n          return this.$shareTimeline({\n            title: this.$children[0].navigationBarTitle,\n            query: {} // 此处填写页面的参数\n          });\n        },\n        // #endif\n        onReachBottom() {\n            if(this.more) {\n                this.page++;\n                this.getMore();\n            }\n        },\n        onLoad(options) { this.$commonLoad.onload(options);\n            let that = this;\n            // #ifdef H5\n            this.is_not_wechat = !this.$jwx.isWechat();\n            // #endif\n            if(options.code) {\n                that.code = options.code\n            }\n            if(options.token && options.library_id && options.created_at) {\n                that.getActive(options.token, options.library_id, options.created_at)\n            }\n            // #ifdef MP-WEIXIN\n            wx.showShareMenu({\n              menus: ['shareAppMessage', 'shareTimeline']\n            })\n            // #endif\n            uni.getSystemInfo({\n                success: function (res) {\n                    that.height = -res.screenHeight;\n                    if(res.model.indexOf('iPhone X') > -1 || res.model.indexOf('iPhone 11') > -1 || res.model.indexOf('iPhone11') > -1 || res.model.indexOf('iPhone12') > -1 || res.model.indexOf('Unknown Device') > -1) {\n                        that.iphone_x = true;\n                    }\n                }\n            });\n            that.$request({\n                url: that.$api.exchange.setting,\n            }).then(response=>{\n                if(response.code == 0) {\n                    that.setting = response.data;\n                }else {\n                    uni.showToast({\n                        title: response.msg,\n                        icon: 'none',\n                        duration: 1000\n                    });\n                }\n            })\n        },\n        onShow() {\n            if(this.activeTab == '1') {\n                this.getList();\n            }\n        },\n        methods: {\n            getActive(token, library_id, created_at) {\n                let that = this;\n                uni.showLoading({\n                    mask: true,\n                    title: '获取兑换码...'\n                });\n                that.$request({\n                    url: that.$api.exchange.code,\n                    data: {\n                        token: token,\n                        library_id: library_id,\n                        created_at: created_at,\n                    }\n                }).then(response=>{\n                    uni.hideLoading();\n                    this.loading = false;\n                    if(response.code == 0) {\n                        this.code = response.data.code\n                    }else {\n                        this.msg = response.msg;\n                        this.other = '';\n                        this.dialog = true;\n                    }\n                }).catch(response => {\n                    uni.hideLoading();\n                });\n            },\n            b() {\n                // #ifndef H5\n                let currentRoute = this.currentRoute;\n                for (let i = 0; i < this.tabBarNavs.length; i++) {\n                    if(currentRoute.includes(this.tabBarNavs[i].url.split('?')[0])) {\n                        return this.tabbarbool = true;\n                    }\n                }\n                // #endif\n                return  this.tabbarbool = false;\n            },\n            showRule() {\n                let that = this;\n                that.over = false;\n                that.showRules = true;\n                var animation = uni.createAnimation({\n                    duration: 1000,\n                    timingFunction: 'ease',\n                })\n                that.animationData = animation\n                setTimeout(function(){\n                    let num = 0;\n                    if(that.tabbarbool) {\n                        num += 55\n                    }\n                    animation.bottom(-500).bottom(num).step()\n                    that.animationData = animation.export();\n                    setTimeout(function(){\n                        that.bottom = num *2 + 'rpx';\n                        that.over = true;\n                    },1200)\n                },200)\n            },\n            scan() {\n                let that = this;\n                // #ifndef MP-ALIPAY || H5\n                uni.scanCode({\n                    success(res) {\n                        if(res.scanType == \"CODE_128\" || (res.result && res.result.length == 12)) {\n                            that.code = res.result\n                        } else {\n                            if(res.path) {\n                                uni.showLoading({\n                                    mask: true,\n                                    title: '获取兑换码...'\n                                });\n                                let path = res.path\n                                path = path.split('?');\n                                let scene = path[1];\n                                let reg = new RegExp(\"scene=\", \"g\");\n                                scene = path[1].replace(reg, \"\");\n                                that.$request({\n                                    url: that.$api.default.qrcode_parameter,\n                                    data: {\n                                        token: scene\n                                    }\n                                }).then(response => {\n                                    if (response.code === 0) {\n                                        if(response.data.detail && response.data.detail.data.type == 'auto') {\n                                            that.getActive(response.data.detail.data.token, response.data.detail.data.library_id, response.data.detail.data.created_at)\n                                        }else {\n                                            uni.hideLoading();\n                                            uni.showToast({\n                                                title: '未获取到兑换码',\n                                                icon: 'none',\n                                                duration: 1000\n                                            });\n                                            that.code = response.data.detail.data.code;\n                                        }\n                                    }\n                                });\n                            }else {\n                                uni.showToast({\n                                    title: '暂不支持此二维码，请使用应用内扫一扫功能',\n                                    icon: 'none',\n                                    duration: 1000\n                                });\n                            }\n                        }\n                    }\n                })\n                // #endif\n                // #ifdef MP-ALIPAY\n                my.ap.navigateToAlipayPage({\n                    appCode:'alipayScan',\n                    success:(res) => {\n                    },\n                    fail:(res) => {\n                        my.alert({content:'失败：'+JSON.stringify(res)});\n                    }\n                });\n                // #endif\n                // #ifdef H5\n                if (this.$jwx.isWechat()) {\n                    this.$jwx.scanQRCode({\n                        success(res) {\n                            if(res.resultStr) {\n                                if(res.resultStr.indexOf(',') > 0){\n                                 //条形码时返回的格式类似为【code128,123456789】      \n                                     var dealserialNumber=res.resultStr.split(',')[1];          \n                                     dealserialNumber = dealserialNumber.replace(/[^a-z\\d]/ig, \"\");//处理条形码扫描的字符\n                                     that.code = dealserialNumber;//扫描结果传递到的处理页面\n                                }else{\n                                    //二维码时\n                                    location.href=res.resultStr;//扫描结果传递到的处理页面\n                                }\n                            }else if(res.scanType == \"CODE_128\" || (res.result && res.result.length == 12)) {\n                                that.code = res.result\n                            } else {\n                                if(res.path) {\n                                    uni.showLoading({\n                                        mask: true,\n                                        title: '获取兑换码...'\n                                    });\n                                    let path = res.path\n                                    path = path.split('?');\n                                    let scene = path[1];\n                                    let reg = new RegExp(\"scene=\", \"g\");\n                                    scene = path[1].replace(reg, \"\");\n                                    that.$request({\n                                        url: that.$api.default.qrcode_parameter,\n                                        data: {\n                                            token: scene\n                                        }\n                                    }).then(response => {\n                                        if (response.code === 0) {\n                                            if(response.data.detail.data.type == 'auto') {\n                                                that.getActive(response.data.detail.data.token, response.data.detail.data.library_id, response.data.detail.data.created_at)\n                                            }else {\n                                                uni.hideLoading();\n                                                that.code = response.data.detail.data.code;\n                                            }\n                                        }\n                                    });\n                                }else {\n                                    uni.showToast({\n                                        title: '暂不支持此二维码，请使用应用内扫一扫功能',\n                                        icon: 'none',\n                                        duration: 1000\n                                    });\n                                }\n                            }\n                        }\n                    })\n                }else {\n                    uni.showToast({\n                        title: '暂不支持浏览器点击扫码，请应用扫一扫功能',\n                        icon: 'none',\n                        duration: 1000\n                    });\n                }\n                // #endif\n            },\n            tabStatus(e) {\n                if(this.loading) {\n                    return false\n                }\n                this.list = [];\n                this.page = 1;\n                this.activeTab = e.currentTarget.dataset.id;\n                this.getList();\n            },\n            getMore() {\n                let that = this;\n                if(this.loading) {\n                    return false\n                }\n                this.loading = true;\n                that.more = false;\n                uni.showLoading({\n                    mask: true,\n                    title: '加载中...'\n                });\n                that.$request({\n                    url: that.$api.exchange.log,\n                    data: {\n                        page: that.page\n                    }\n                }).then(response=>{\n                    uni.hideLoading();\n                    this.loading = false;\n                    if(response.code == 0) {\n                        that.list = that.list.concat(response.data.list);\n                        if(that.list.length == response.data.pagination.pageSize) {\n                            that.more = true;\n                        }\n                    }else {\n                        uni.showToast({\n                            title: response.msg,\n                            icon: 'none',\n                            duration: 1000\n                        });\n                    }\n                }).catch(response => {\n                    uni.hideLoading();\n                });\n            },\n            getList() {\n                let that = this;\n                if(this.loading) {\n                    return false\n                }\n                this.loading = true;\n                that.page = 1;\n                that.more = false;\n                uni.showLoading({\n                    mask: true,\n                    title: '加载中...'\n                });\n                that.$request({\n                    url: that.$api.exchange.log\n                }).then(response=>{\n                    this.loading = false;\n                    uni.hideLoading();\n                    if(response.code == 0) {\n                        that.list = response.data.list;\n                        if(that.list.length == response.data.pagination.pageSize) {\n                            that.more = true;\n                        }\n                    }else {\n                        uni.showToast({\n                            title: response.msg,\n                            icon: 'none',\n                            duration: 1000\n                        });\n                    }\n                }).catch(response => {\n                    uni.hideLoading();\n                });\n            },\n            toDetail(item) {\n                uni.navigateTo({\n                    url: '/plugins/exchange/detail/detail?code=' + item.code + '&exchange=1'\n                })\n            },\n            toGift() {\n                uni.navigateTo({\n                    url: '/plugins/exchange/list/list'\n                })\n            },\n            clerk() {\n                let that = this;\n                if(this.loading || !this.code) {\n                    return false\n                }\n                uni.showLoading({\n                    mask: true,\n                    title: '兑换中...'\n                });\n                this.loading = true;\n                let code = this.code;\n                that.$request({\n                    url: that.$api.exchange.info,\n                    data: {\n                        code: code\n                    }\n                }).then(response=>{\n                    this.loading = false;\n                    uni.hideLoading();\n                    if(response.code == 0) {\n                        this.code = '';\n                        uni.navigateTo({\n                            url: '/plugins/exchange/detail/detail?code=' + code\n                        })\n                    }else {\n                        this.msg = response.msg;\n                        this.other = '';\n                        if(response.msg == '该兑换码未到使用时间!') {\n                            this.other = response.data.valid_start_time + '-' + response.data.valid_end_time + ' 可用'\n                        }\n                        this.dialog = true;\n                    }\n                }).catch(response => {\n                    uni.hideLoading();\n                });\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"scss\">\n    .dialog-bg {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0,0,0,.3);\n        z-index: 101;\n    }\n    .jump-dialog {\n        position: fixed;\n        bottom: 120rpx;\n        right: 24rpx;\n        width: 100rpx;\n        height: 100rpx;\n        border-radius: 50%;\n        background-color: rgba(0,0,0,.3);\n        font-size: 16rpx;\n        color: #fff;\n        z-index: 100;\n        &.tabbarbool {\n            bottom: 240rpx;\n        }\n        image {\n            width: 54rpx;\n            height: 54rpx;\n            margin-bottom: 3rpx;\n            display: block;\n        }\n    }\n    .use-info {\n        position: fixed;\n        bottom: 64rpx;\n        text-align: center;\n        font-size: 28rpx;\n        width: 200rpx;\n        margin: 0 auto;\n        left: 0;\n        right: 0;\n        &.tabbarbool {\n            bottom: 204rpx;\n        }\n    }\n    .scan {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: #fff;\n        text-align: center;\n        padding-top: 184rpx;\n        font-size: 28rpx;\n        color: #353535;\n        .scan-input {\n            height: 94rpx;\n            width: 580rpx;\n            margin: 40rpx auto;\n            background-color: #f9f9f9;\n            border: 2rpx solid #e2e2e2;\n                border-radius: 16rpx;\n            position: relative;\n            box-shadow: 1rpx 1rpx 4rpx 4rpx #f5f5f5;\n            input {\n                border-radius: 16rpx;\n                width: 100%;\n                height: 100%;\n                padding: 10rpx 80rpx 10rpx 20rpx;\n                text-align: left;\n            }\n            image {\n                width: 48rpx;\n                height: 44rpx;\n                position: absolute;\n                right: 24rpx;\n                top: 23rpx;\n                z-index: 2\n            }\n        }\n        .scan-button {\n            height: 300rpx;\n            width: 300rpx;\n            border-radius: 50%;\n            text-align: center;\n            line-height: 300rpx;\n            box-shadow: 2rpx 2rpx 8rpx 8rpx #f3f3f3;\n            margin: 112rpx auto;\n            font-size: 42rpx;\n            font-weight: 600;\n            color: #fff;\n        }\n    }\n    .item {\n        margin: 24rpx 24rpx 0;\n        background-color: #fff;\n        border-radius: 16rpx;\n        .status {\n            padding: 28rpx 30rpx;\n            border-bottom: 2rpx solid #e2e2e2;\n\n            .item-code {\n                padding: 16rpx 30rpx;\n                border-radius: 40rpx;\n                font-size: 28rpx;\n                font-weight: 600;\n            }\n            .item-status {\n                font-size: 28rpx;\n                view:first-of-type {\n                    margin-right: 16rpx;\n                }\n                image {\n                    height: 22rpx;\n                    width: 14rpx;\n                    display: block;\n                }\n            }\n        }\n        .item-time {\n            height: 72rpx;\n            line-height: 72rpx;\n            font-size: 28rpx;\n            color: #666666;\n            padding: 0 30rpx;\n        }\n    }\n    .dialog {\n        margin: 270rpx auto;\n        background-color: #fff;\n        border-radius: 16rpx;\n        width: 600rpx;\n        padding: 60rpx 0;\n        text-align: center;\n        .dialog-img {\n            width: 200rpx;\n            height: 200rpx;\n            margin: 0 auto 20rpx;\n        }\n        .dialog-msg {\n            font-size: 32rpx;\n            color: #353535;\n        }\n        .dialog-other {\n            font-size: 24rpx;\n            color: #999999;\n        }\n        .dialog-button {\n            font-size: 26rpx;\n            width: 520rpx;\n            height: 90rpx;\n            border-radius: 45rpx;\n            line-height: 90rpx;\n            text-align: center;\n            color: #fff;\n            margin: 50rpx auto 0;\n        }\n    }\n    .u-rules {\n        border-top-left-radius: 16rpx;\n        border-top-right-radius: 16rpx;\n        width: 100%;\n        position: fixed;\n        z-index: 1005;\n        left: 0;\n        background-color: #fff;\n        &.iphone_x.tabbarbool {\n            padding-bottom: 50rpx;\n        }\n        .u-rules-top {\n            border-top-left-radius: 16rpx;\n            border-top-right-radius: 16rpx;\n            background-color: #fff;\n            height: 80rpx;\n            .end-close {\n                width: 80rpx;\n                height: 80rpx;\n                padding: 25rpx;\n                image {\n                    width: 30rpx;\n                    height: 30rpx;\n                }\n            }\n        }\n        .u-rules-content {\n            padding: 0 20rpx;\n            min-height: 160rpx;\n            max-height: 918rpx;\n            overflow: auto;\n        }\n    }\n</style>","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=2d77edf4&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=2d77edf4&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1658389810262\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}