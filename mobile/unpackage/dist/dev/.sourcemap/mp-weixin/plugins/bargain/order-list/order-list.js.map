{"version":3,"sources":["uni-app:///main.js","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/bargain/order-list/order-list.vue?9346","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/bargain/order-list/order-list.vue?32a5","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/bargain/order-list/order-list.vue?27d3","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/bargain/order-list/order-list.vue?6a13","uni-app:///plugins/bargain/order-list/order-list.vue","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/bargain/order-list/order-list.vue?f98c","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/bargain/order-list/order-list.vue?6ba3"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,sH,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,kBAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmI;AACnI;AAC8D;AACL;AACsC;;;AAG/F;AACsN;AACtN,gBAAgB,iNAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,iGAAM;AACR,EAAE,0GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAs2B,CAAgB,wyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACoE13B,gD;;AAEA;AACA,oBADA;AAEA,4CAFA;AAGA,MAHA,kBAGA;AACA;AACA;AACA,wBADA;AAEA,cAFA;AAGA,iBAHA;AAIA,aAJA;AAKA,iBALA;;AAOA,GAZA;AAaA;AACA;AACA,wBADA,GADA,CAbA;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCADA;AAEA;AACA,kBADA,EAFA;;AAKA,QALA,CAKA;AACA;AACA,2CADA,CACA,SADA,WACA,SADA;AAEA;AACA;AACA;AACA,KAXA;AAYA,GApCA;;AAsCA;AACA;AACA;AACA;AACA,iCADA;AAEA,QAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KATA,EASA,KATA,CASA;AACA;AACA,KAXA;AAYA,GArDA;AAsDA,UAtDA,sBAsDA;AACA;AACA,GAxDA;AAyDA;AACA,YADA,oBACA,CADA,EACA;AACA;AACA,KAHA;AAIA,QAJA,gBAIA,CAJA,EAIA;AACA;AACA,KANA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WANA,MAMA;AACA;AACA;AACA,SAdA;AAeA;AACA,OAjBA;AAkBA;AACA;AACA;AACA,OAFA,EAEA,IAFA;AAGA,KAhCA;;AAkCA;AACA;AACA,mBADA;AAEA,oDAFA;AAGA;AACA,gCADA;AAEA,oBAFA;AAGA,kBAHA;AAIA,sBAJA;AAKA,gDALA,GAHA;;;;AAYA;AACA;AACA,+BADA;AAEA,uBAFA,GAEA,mDAFA;AAGA,sBAHA,GAGA,kDAJA;;AAMA,KArDA,EAzDA,E;;;;;;;;;;;;;ACtEA;AAAA;AAAA;AAAA;AAAqnD,CAAgB,+7CAAG,EAAC,C;;;;;;;;;;;ACAzoD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"plugins/bargain/order-list/order-list.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './plugins/bargain/order-list/order-list.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./order-list.vue?vue&type=template&id=1d773676&scoped=true&\"\nvar renderjs\nimport script from \"./order-list.vue?vue&type=script&lang=js&\"\nexport * from \"./order-list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./order-list.vue?vue&type=style&index=0&id=1d773676&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1d773676\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"plugins/bargain/order-list/order-list.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-list.vue?vue&type=template&id=1d773676&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-list.vue?vue&type=script&lang=js&\"","<template>\n    <app-layout>\n        <view class=\"no-content\" v-if=\"!list.length\">\n            <view>你还没有进行中的砍价</view>\n            <view>去会场逛逛！</view>\n        </view>\n        <view class=\"order-list\">\n            <block v-for=\"(v,k) in list\" :key=\"k\">\n                <view @click=\"navGoods(v)\" class=\"bargain-list dir-left-nowrap\">\n                    <view class=\"box-grow-0\">\n                        <image :src=\"v.cover_pic\"></image>\n                    </view>\n\n                    <view class=\"box-grow-1 dir-top-nowrap bargain-right\">\n                        <view class=\"box-grow-0 bargain-name t-omit-two\">{{v.goods_name}}</view>\n                        <view class=\"attr t-omit\">{{v.select_attr_group_text}}</view>\n                        <block v-if=\"v.reset_time\">\n                            <view class=\"box-grow-1 bargain-time dir-left-nowrap cross-center\">\n                                <block v-if=\"v.times.day > 0\">\n                                    <view class='info'>{{v.times.day}}</view>\n                                    <view class=\"mark\">天</view>\n                                </block>\n                                <view class=\"info\">{{v.times.hour}}</view>\n                                <view class=\"mark\">:</view>\n                                <view class=\"info\">{{v.times.minute}}</view>\n                                <view class=\"mark\">:</view>\n                                <view class=\"info\">{{v.times.second}}</view>\n                                <view class=\"mark\">后结束</view>\n                            </view>\n                            <view class=\"box-grow-0 dir-left-nowrap cross-center\">\n                                <view class=\"box-grow-1 dir-top-nowrap\">\n                                    <view class='min-price'>\n                                        <block v-if=\"v.now_price == v.min_price\">已砍至最低</block>\n                                        <block v-else>离最低￥{{v.min_price}}</block>\n                                    </view>\n                                    <view class='price'>\n                                        <block v-if=\"v.now_price == v.min_price\">￥{{v.min_price}}</block>\n                                        <block v-else>还差￥{{v.reset_price}}</block>\n                                    </view>\n                                </view>\n                                <view class=\"box-grow-0\">\n                                    <app-button v-if=\"v.now_price == v.min_price\" @click.native.stop=\"submit(v)\" height=\"64\"\n                                                width=\"176\" color=\"#FFFFFF\" background=\"#ff6700\" font-size=\"28\"\n                                                round>立即购买\n                                    </app-button>\n                                    <app-button v-else @click.native.stop=\"goto(v)\" height=\"64\" width=\"176\" color=\"#FFFFFF\"\n                                                :theme=\"getTheme\" font-size=\"28\" round>继续砍价\n                                    </app-button>\n                                </view>\n                            </view>\n                        </block>\n                        <block v-else>\n                            <view class=\"box-grow-1\"></view>\n                            <view class=\"box-grow-0\">\n                                <view class=\"box-grow-1 bargain-content\">{{v.content}}</view>\n                                <view class=\"box-grow-0 price\">{{v.status_content}}</view>\n                            </view>\n                        </block>\n                    </view>\n                </view>\n            </block>\n        </view>\n        <common-buttom :theme=\"getTheme\" status=\"prize\"></common-buttom>\n    </app-layout>\n</template>\n\n<script>\n    import commonButtom from \"../common-buttom.vue\";\n    import {mapGetters} from \"vuex\";\n\n    export default {\n        name: \"order-list\",\n        components: {commonButtom},\n        data() {\n            let integral;\n            return {\n                integral,\n                list: [],\n                args: false,\n                page: 1,\n                load: false,\n            }\n        },\n        computed: {\n            ...mapGetters('mallConfig',{\n                getTheme: 'getTheme',\n            }),\n        },\n        onReachBottom: function () {\n            const self = this;\n            if (self.args || self.load)\n                return;\n            self.load = true;\n            let page = self.page + 1;\n            self.$request({\n                url: self.$api.bargain.list,\n                data: {\n                    page: page,\n                }\n            }).then(info => {\n                if (info.code === 0) {\n                    [self.page, self.args] = [page, info.data.list.length === 0];\n                    self.getIntegral(self.list.concat(info.data.list));\n                }\n                self.load = false;\n            });\n        },\n\n        onShow: function () {\n            const self = this;\n            self.$showLoading();\n            self.$request({\n                url: self.$api.bargain.list,\n            }).then(info => {\n                self.$hideLoading();\n                if (info.code === 0) {\n                    self.getIntegral(info.data.list);\n                }\n                self.args = false;\n                self.page = 1;\n            }).catch(e => {\n                self.$hideLoading();\n            })\n        },\n        onUnload() {\n            clearInterval(this.integral);\n        },\n        methods: {\n            navGoods(v) {\n                uni.navigateTo({url: '/plugins/bargain/goods/goods?goods_id=' + v.goods_id});\n            },\n            goto(v) {\n                uni.navigateTo({url: \"/plugins/bargain/activity/activity?id=\" + v.bargain_order_id});\n            },\n            getIntegral: function (list) {\n                const self = this;\n                clearInterval(self.integral);\n                let func = function () {\n                    list.forEach((value, key, array) => {\n                        if (value.status) return;\n                        let time = value.finish_at.replace(/-/g, '/');\n                        let diff_time = parseInt((new Date(time).getTime() - new Date().getTime()) / 1000)\n                        let day = 0, hour = 0, minute = 0, second = 0;\n                        if (diff_time > 0) {\n                            day = Math.floor(diff_time / (60 * 60 * 24));\n                            hour = Math.floor(diff_time / (60 * 60)) - (day * 24);\n                            minute = Math.floor(diff_time / 60) - (day * 24 * 60) - (hour * 60);\n                            second = Math.floor(diff_time) - (day * 24 * 60 * 60) - (hour * 60 * 60) - (minute * 60);\n                            value.times = {day, hour, minute, second};\n                        } else {\n                            value.times = second;\n                        }\n                    });\n                    self.list = list;\n                }\n                func(list);\n                self.integral = setInterval(() => {\n                    func(list);\n                }, 1000);\n            },\n\n            submit: function (bargain) {\n                const mchList = [{\n                    \"mch_id\": 0,\n                    \"bargain_order_id\": bargain.bargain_order_id,\n                    \"goods_list\": [{\n                        \"id\": bargain.goods_id,\n                        \"attr\": [],\n                        \"num\": 1,\n                        \"cart_id\": 0,\n                        \"goods_attr_id\": bargain.goods_attr_id\n                    }]\n                }];\n\n                uni.navigateTo({\n                    url: '/pages/order-submit/order-submit?mch_list=' +\n                        JSON.stringify(mchList) +\n                        '&preview_url=' + encodeURIComponent(this.$api.bargain.order_preview) +\n                        '&submit_url=' + encodeURIComponent(this.$api.bargain.order_submit)\n                });\n            },\n        }\n\n    }\n</script>\n<style scoped lang=\"scss\">\n    .no-content {\n        padding: #{150rpx} 0;\n        text-align: center;\n        color: #888;\n    }\n\n    .order-list {\n\n    }\n\n    .bargain-list {\n        padding: #{24rpx};\n        margin-bottom: #{8rpx};\n        background: #ffffff;\n\n        image {\n            height: #{216rpx};\n            width: #{215rpx};\n            display: block;\n        }\n\n        .bargain-right {\n            margin-left: #{20rpx};\n            min-height: #{216rpx};\n        }\n\n        .bargain-time {\n            margin: #{8rpx} 0;\n            font-size: #{26rpx};\n\n            .info {\n                width: #{45rpx};\n                height: #{38rpx};\n                background: #666666;\n                color: #FFFFFF;\n                text-align: center;\n                border-radius: #{4rpx};\n                line-height: #{38rpx};\n            }\n\n            .mark {\n                color: #666666;\n                margin: 0 #{10rpx};\n            }\n        }\n\n        .self {\n        }\n\n        .min-price {\n            color: #999999;\n            font-size: #{24rpx};\n        }\n\n        .price {\n            margin-top: #{8rpx};\n            color: #ff4544;\n            font-size: #{28rpx};\n        }\n\n        .bargain-content {\n            margin-bottom: #{64rpx};\n            color: #666666;\n            font-size: #{24rpx};\n        }\n\n        .bargain-name {\n            font-size: #{28rpx};\n            color: #353535;\n        }\n\n        .attr {\n            color: #999999;\n            margin: #{12rpx 0 16rpx 0};\n            font-size: $uni-font-size-weak-one;\n        }\n    }\n</style>","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-list.vue?vue&type=style&index=0&id=1d773676&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-list.vue?vue&type=style&index=0&id=1d773676&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1658389807355\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}