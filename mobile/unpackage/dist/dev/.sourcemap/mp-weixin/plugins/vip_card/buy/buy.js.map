{"version":3,"sources":["uni-app:///main.js","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/vip_card/buy/buy.vue?06ad","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/vip_card/buy/buy.vue?32e7","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/vip_card/buy/buy.vue?593b","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/vip_card/buy/buy.vue?1deb","uni-app:///plugins/vip_card/buy/buy.vue","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/vip_card/buy/buy.vue?ad1e","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/vip_card/buy/buy.vue?ac2a"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,mG,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,YAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4H;AAC5H;AACuD;AACL;AACsC;;;AAGxF;AACsN;AACtN,gBAAgB,iNAAU;AAC1B,EAAE,yEAAM;AACR,EAAE,0FAAM;AACR,EAAE,mGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,8FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACbA;AAAA;AAAA;AAAA;AAA+1B,CAAgB,iyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgGn3B,gD;;;;AAIA;AACA,MADA,kBACA;AACA;AACA,gBADA;AAEA;AACA;AACA,qBADA,EADA,EAFA;;;AAOA;AACA,sBADA;AAEA;AACA,0BADA;AAEA,yBAFA,EAFA,EAPA;;;AAcA,eAdA;AAeA,iBAfA;AAgBA,qBAhBA;AAiBA,mBAjBA;AAkBA,WAlBA;AAmBA,kBAnBA;AAoBA,mBApBA;AAqBA,oBArBA;AAsBA,qBAtBA;AAuBA,0BAvBA;AAwBA,oBAxBA;AAyBA;AACA,uBADA,EAzBA;;AA4BA,sBA5BA;AA6BA,oBA7BA;;AA+BA,GAjCA;AAkCA;AACA,0BADA;AAEA,sBAFA,EAlCA;;AAsCA;AACA;AACA,oFADA,GADA,CAtCA;;;AA2CA;AACA,WADA,mBACA,CADA,EACA;AACA;AACA;AACA;AACA;AACA,KANA;AAOA,YAPA,sBAOA;AACA;AACA,4DADA;;AAGA,KAXA;;AAaA,UAbA,oBAaA;AACA;AACA;AACA,KAhBA;AAiBA,YAjBA,sBAiBA;AACA;AACA,wCADA;;AAGA,KArBA;AAsBA,UAtBA,oBAsBA;AACA;AACA,sCADA;;AAGA,KA1BA;AA2BA,aA3BA,uBA2BA;AACA;AACA,qCADA;;AAGA,KA/BA;AAgCA,cAhCA,wBAgCA;AACA;AACA,iDADA;;AAGA,KApCA;AAqCA,cArCA,wBAqCA;AACA;AACA;AACA,sBADA;AAEA,sBAFA;;AAIA;AACA,uCADA;AAEA,UAFA,CAEA;AACA;AACA;AACA;AACA,wCADA;;AAGA;AACA;AACA,SAPA,MAOA;AACA;AACA,+BADA;AAEA,wBAFA;AAGA,0BAHA;;AAKA;AACA,OAjBA,EAiBA,KAjBA,CAiBA;AACA;AACA,OAnBA;AAoBA,KA/DA;AAgEA,WAhEA,qBAgEA;AACA;AACA;AACA,2CADA;AAEA;AACA,qBADA,EAFA;;AAKA,UALA,CAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA;AAGA;AACA;AACA,WAFA;AAGA,SAzBA,MAyBA;AACA;AACA,+BADA;AAEA,wBAFA;AAGA,0BAHA;;AAKA;AACA,OAvCA,EAuCA,KAvCA,CAuCA;AACA;AACA,OAzCA;AA0CA,KA5GA;AA6GA,aA7GA,uBA6GA;AACA;AACA;AACA,kDADA;AAEA,sBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,EAEA,KAFA,CAEA;AACA;AACA,OAJA;AAKA,KA7HA;AA8HA,YA9HA,sBA8HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBADA;AAEA,uBAFA;;AAIA;AACA,4CADA;AAEA;AACA,qBADA;AAEA,0DAFA,EAFA;;AAMA,sBANA;AAOA,UAPA,CAOA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA,uBADA;AAEA,iCAFA;AAGA,6BAHA;;AAKA;AACA,OAnBA,EAmBA,KAnBA,CAmBA;AACA;AACA;AACA;AACA,qBADA;AAEA,2BAFA;AAGA,2BAHA;;AAKA,OA3BA;AA4BA,KApKA;AAqKA,2BArKA,yCAqKA;AACA;AACA;AACA,KAxKA;AAyKA,wBAzKA,uCAyKA;AACA;AACA;AACA;AACA,0BADA;AAEA,6BAFA;AAGA,8BAHA;AAIA,uCAJA;;AAMA;AACA;AACA,KApLA;AAqLA,iBArLA,yBAqLA,QArLA,EAqLA,KArLA,EAqLA;AACA;AACA,wCADA;AAEA,sBAFA;AAGA;AACA,4BADA;AAEA,sBAFA,EAHA;;AAOA,UAPA,CAOA;AACA;AACA;AACA;AACA;AACA,aAFA,EAEA,IAFA;AAGA,WAJA,MAIA;AACA;AACA;AACA,SARA,MAQA;AACA;AACA;AACA;AACA,uBADA;AAEA,iCAFA;AAGA,6BAHA;;AAKA;AACA,OAzBA,EAyBA,KAzBA,CAyBA;AACA;AACA;AACA;AACA,qBADA;AAEA,2BAFA;AAGA,2BAHA;;AAKA,OAjCA;AAkCA,KAxNA;AAyNA,OAzNA,eAyNA,EAzNA,EAyNA;AACA;AACA;AACA;AACA;AACA;AACA,uBADA;AAEA,wBAFA;;AAIA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,WAFA,EAEA,IAFA;AAGA;AACA,OAdA,EAcA,KAdA,CAcA;AACA;AACA;AACA;AACA,uBADA;AAEA,sBAFA;AAGA,wBAHA;;AAKA,OAtBA;AAuBA,KAlPA,EA3CA;;AA+RA,UA/RA,sBA+RA;AACA;AACA,GAjSA;AAkSA,QAlSA,kBAkSA,OAlSA,EAkSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OALA;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GA1TA,E;;;;;;;;;;;;;ACpGA;AAAA;AAAA;AAAA;AAA8mD,CAAgB,w7CAAG,EAAC,C;;;;;;;;;;;ACAloD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"plugins/vip_card/buy/buy.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './plugins/vip_card/buy/buy.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./buy.vue?vue&type=template&id=61ca88fd&scoped=true&\"\nvar renderjs\nimport script from \"./buy.vue?vue&type=script&lang=js&\"\nexport * from \"./buy.vue?vue&type=script&lang=js&\"\nimport style0 from \"./buy.vue?vue&type=style&index=0&id=61ca88fd&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61ca88fd\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"plugins/vip_card/buy/buy.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=template&id=61ca88fd&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.showClose = true\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=script&lang=js&\"","<template>\n    <app-layout>\n        <!-- 卡片 -->\n        <view class=\"head-card\" :style=\"[{'background-color': `${list.form.card_bg}`}]\">\n            <image class=\"card-bottom\" :src=\"svipImg.card_bottom\" alt=\"\"></image>\n        </view>\n        <view class=\"list\">\n            <view class=\"title main-center cross-center\">\n                <image :src=\"svipImg.left\" alt=\"\"></image>\n                <view class=\"title-text\">购买会员</view>\n                <image :src=\"svipImg.right\" alt=\"\"></image>\n            </view>\n            <view class=\"item dir-left-nowrap\" style=\"border-top: 0\">\n                <view class=\"label\">超级会员卡名称</view>\n                <view class=\"content\">{{list.name}}</view>\n            </view>\n            <view class=\"item dir-left-nowrap\">\n                <view class=\"label\">会员卡标题</view>\n                <view class=\"content\">{{card.name}}</view>\n            </view>\n            <view class=\"item dir-left-nowrap\">\n                <view class=\"label\">有效时间</view>\n                <view class=\"content\">{{end_time > 0 ? end_time : today}}-{{end_day}}</view>\n            </view>\n            <view class=\"item dir-left-nowrap\">\n                <view class=\"label\">有效期</view>\n                <view class=\"content\">{{card.expire_day}}天</view>\n            </view>\n            <view class=\"item dir-left-nowrap\">\n                <view class=\"label\">会员卡权益</view>\n                <view v-if=\"card.main\" class=\"content cross-center main-between\">\n                    <view style=\"min-width: 70%\">\n                        <view v-if=\"card.main.is_free_delivery == 1\">自营商品包邮</view>\n                        <view v-if=\"card.main.is_discount && card.type_info.all\">\n                            <text>自营商品{{card.main.discount == 0 ? '免费' : card.main.discount + '折'}}</text>\n                            <text class=\"about\" v-if=\"(card && card.type_info.ignore_goods && card.type_info.ignore_goods.length > 0) || (card && card.type_info.ignore_cats && card.type_info.ignore_cats.length > 0)\">(特殊商品除外)</text>\n                        </view>\n                        <view v-if=\"card && card.main.is_discount && card.type_info.cats && card.type_info.cats.length > 0\">指定分类{{card.main.discount == 0 ? '免费' : card.main.discount + '折'}}</view>\n                        <view v-if=\"card && card.main.is_discount && card.type_info.goods && card.type_info.goods.length > 0\">指定商品{{card.main.discount == 0 ? '免费' : card.main.discount + '折'}}</view>\n                    </view>\n                    <view @click=\"toDetail\" class=\"to-detail main-center cross-center\">\n                        <view>详情</view>\n                        <image src=\"/static/image/icon/arrow-right.png\"></image>\n                    </view>\n                </view>\n            </view>\n            <view class=\"item dir-left-nowrap\" v-if=\"card.send_integral_num > 0 || card.send_balance > 0 || (card.coupons && card.coupons.length > 0) || (card.cards && card.cards.length > 0)\">\n                <view class=\"label\">购买即赠</view>\n                <view class=\"content\">\n                    <view v-if=\"card.send_integral_num > 0\">积分{{card.send_integral_num}}</view>\n                    <view v-if=\"card.send_balance > 0\">余额{{card.send_balance}}</view>\n                    <view v-if=\"card.coupons.length > 0\" v-for=\"item in card.coupons\" :key=\"item.id\">{{item.name}}优惠券{{item.send_num}}张</view>\n                    <view v-if=\"card.cards.length > 0\" v-for=\"item in card.cards\" :key=\"item.id\">{{item.name}}卡券{{item.send_num}}张</view>\n                </view>\n            </view>\n        </view>\n        <view class=\"buy-form\" v-if=\"list.order_form && list.is_order_form === 1\">\n            <app-diy-form label-position=\"top\" :show-required-icon=\"true\" :label-fs28=\"true\" @validate=\"handleOrderFormValidate\" @input=\"handleGoodsFormInput\" :list=\"list.order_form\"></app-diy-form>\n        </view>\n        <view :class=\"['bottom-place', `${iphone_x? 'iphone_x':''}`]\"></view>\n        <view :class=\"['foot', `${iphone_x? 'iphone_x':''}`]\">\n            <view @click=\"showClose = true\" class=\"foot-button\">支付</view>\n        </view>\n        <view v-if=\"success\" class=\"dialog main-center cross-center\">\n            <view class=\"gift\">\n                <image class=\"gift-bg\" src=\"./../image/gift.png\"></image>\n                <view class=\"gift-list\">\n                    <view @click=\"toIntegral\" class=\"gift-item\" v-if=\"card.send_integral_num > 0\">\n                        <image class=\"gift-icon\" :src=\"list.form.integral_icon != 'statics/img/app/vip_card/integral.png'?list.form.integral_icon:svipImg.integral\"></image>\n                        <view>积分{{card.send_integral_num}}</view>\n                        <image src=\"/static/image/icon/arrow-right.png\"></image>\n                    </view>\n                    <view @click=\"toBalance\" class=\"gift-item\" v-if=\"card.send_balance > 0\">\n                        <image class=\"gift-icon\" :src=\"list.form.balance_icon != 'statics/img/app/vip_card/balance.png'?list.form.balance_icon:svipImg.balance\"></image>\n                        <view>余额{{card.send_balance}}</view>\n                        <image src=\"/static/image/icon/arrow-right.png\"></image>\n                    </view>\n                    <view @click=\"toCoupon\" class=\"gift-item\" v-if=\"card.coupons.length > 0\">\n                        <image class=\"gift-icon\" :src=\"list.form.coupon_icon != 'statics/img/app/vip_card/coupon.png'?list.form.coupon_icon:svipImg.coupon\"></image>\n                        <view>优惠券{{total_coupon}}张</view>\n                        <image src=\"/static/image/icon/arrow-right.png\"></image>\n                    </view>\n                    <view @click=\"toCard\" class=\"gift-item\" v-if=\"card.cards.length > 0\">\n                        <image class=\"gift-icon\" :src=\"list.form.card_icon != 'statics/img/app/vip_card/card.png'?list.form.card_icon:svipImg.card\"></image>\n                        <view>卡券{{total_card}}张</view>\n                        <image src=\"/static/image/icon/arrow-right.png\"></image>\n                    </view>\n                    <view @click=\"toBack\" class=\"dialog-btn\">我知道了</view>    \n                </view>\n            </view>\n        </view>\n        <app-close v-if=\"showClose\" :toBack=\"true\" @update=\"getMall\"></app-close>\n    </app-layout>\n</template>\n\n<script>\n    import { mapState } from \"vuex\";\n    import AppDiyForm from \"../../../components/page-component/app-diy-form/app-diy-form\";\n    import AppClose from '../../../components/basic-component/app-close/app-close.vue';\n\n    export default {\n        data() {\n            return {\n                detail: {},\n                list: {\n                    form: {\n                        card_bg: ''\n                    }\n                },\n                card: {\n                    expire_day: '',\n                    type_info: {\n                        ignore_goods: [],\n                        ignore_cats: [],\n                    }\n                },\n                today: '',\n                end_day: '',\n                total_coupon: 0,\n                total_card: 0,\n                id: 0,\n                end_time: '',\n                start_day: '',\n                success: false,\n                iphone_x: false,\n                template_message: [],\n                loading: false,\n                validateResult: {\n                    hasError: false\n                },\n                showClose: false,\n                is_open: false\n            }\n        },\n        components: {\n            AppDiyForm,\n            AppClose\n        },\n        computed: {\n            ...mapState({\n                svipImg: state => state.mallConfig.__wxapp_img.vip_card\n            })\n        },\n        methods: {\n            getMall(e) {\n                this.is_open = e.is_open == 1 ? true : false;\n                if(this.is_open) {\n                    this.subscribe();\n                }\n            },\n            toDetail() {\n                uni.navigateTo({\n                    url: '/plugins/vip_card/rights/rights?id='+ this.id\n                })\n            },\n\n            toBack() {\n                this.success = false;\n                uni.navigateBack();\n            },\n            toCoupon() {\n                uni.navigateTo({\n                    url: '/pages/coupon/index/index'\n                })\n            },\n            toCard() {\n                uni.navigateTo({\n                    url: '/pages/card/index/index'\n                })\n            },\n            toBalance() {\n                uni.navigateTo({\n                    url: '/pages/balance/balance'\n                })\n            },\n            toIntegral() {\n                uni.navigateTo({\n                    url: '/plugins/integral_mall/index/index'\n                })\n            },\n            getSetting() {\n                let that = this;\n                that.$showLoading({\n                    type: 'global',\n                    text: '加载中...'\n                });\n                that.$request({\n                    url: that.$api.vip_card.setting,\n                }).then(response=>{\n                    if(response.code == 0) {\n                        that.list = response.data;\n                        uni.setNavigationBarTitle({\n                            title: '购买' + that.list.name,\n                        })\n                        that.template_message = response.data.template_message;\n                        that.getCard();\n                    }else {\n                        uni.showToast({\n                            title: response.msg,\n                            icon: 'none',\n                            duration: 1000\n                        });\n                    }\n                }).catch(response => {\n                    that.$hideLoading();\n                });\n            },\n            getCard() {\n                let that = this;\n                that.$request({\n                    url: that.$api.vip_card.card_detail,\n                    data: {\n                        id: this.id\n                    }\n                }).then(response=>{\n                    that.$hideLoading();\n                    if(response.code == 0) {\n                        that.card = response.data;\n                        var timestamp = Date.parse(new Date());\n                        if(that.end_time > 0) {\n                            timestamp = Date.parse(new Date(that.end_time));\n                        }\n                        // 结束\n                        let endTime = (timestamp / 1000 + 24 * 60 * 60 * response.data.expire_day) * 1000;\n                        let endDate = new Date(endTime)\n                        let end_year = endDate.getFullYear();\n                        let end_month = endDate.getMonth() + 1;\n                        if (end_month >= 1 && end_month <= 9) {\n                            end_month = \"0\" + end_month;\n                        }\n                        let end_now = endDate.getDate();\n                        if (end_now >= 1 && end_now <= 9) {\n                            end_now = \"0\" + end_now;\n                        }\n                        that.end_day = end_year + \"/\" + end_month + \"/\" + end_now;\n                        that.card.coupons.forEach(v => {\n                            that.total_coupon += +v.send_num\n                        })\n                        that.card.cards.forEach(v => {\n                            that.total_card += +v.send_num\n                        })\n                    }else {\n                        uni.showToast({\n                            title: response.msg,\n                            icon: 'none',\n                            duration: 1000\n                        });\n                    }\n                }).catch(response => {\n                    that.$hideLoading();\n                });\n            },\n            subscribe() {\n                if (this.validateResult.hasError) {\n                    uni.showToast({\n                        title: this.validateResult.errors[0].msg,\n                        icon: 'none'\n                    })\n                    return;\n                }\n                if(!this.is_open) {\n                    return false\n                }\n                this.$subscribe(this.template_message).then(res => {\n                    this.toSubmit();\n                }).catch(res => {\n                    this.toSubmit();\n                });\n            },\n            toSubmit() {\n                let that = this;\n                if(this.loading) {\n                    return false\n                }\n                this.loading = true;\n                uni.showLoading({\n                    mask: true,\n                    title: '购买中...'\n                });\n                that.$request({\n                    url: that.$api.vip_card.order_submit,\n                    data: {\n                        id: this.id,\n                        order_form: JSON.stringify(that.list.order_form)\n                    },\n                    method: 'post'\n                }).then(response => {\n                    if (response.code === 0) {\n                        that.getPayOrderId(response.data.queue_id, response.data.token);\n                    } else {\n                        that.loading = false;\n                        uni.hideLoading();\n                        uni.showModal({\n                            title: '提示',\n                            content: response.msg,\n                            showCancel: false,\n                        });\n                    }\n                }).catch(e => {\n                    that.loading = false;\n                    uni.hideLoading();\n                    uni.showModal({\n                        title: '提示',\n                        content: e.errMsg,\n                        showCancel: false,\n                    });\n                });\n            },\n            handleOrderFormValidate({result}) {\n                this.validateResult = result;\n                this.showClose = false;\n            },\n            handleGoodsFormInput({data, sign}) {\n                const result = [];\n                for (let i in data) {\n                    result[i] = {\n                        key: data[i].key,\n                        label: data[i].name,\n                        value: data[i].value,\n                        required: data[i].is_required,\n                    };\n                }\n                this.list.order_form = result;\n            },\n            getPayOrderId(queue_id, token) {\n                this.$request({\n                    url: this.$api.vip_card.pay_data,\n                    method: 'post',\n                    data: {\n                        queue_id: queue_id,\n                        token: token,\n                    },\n                }).then(response => {\n                    if (response.code === 0) {\n                        if (response.data.retry && response.data.retry === 1) {\n                            this.getPayDataTimer = setTimeout(() => {\n                                this.getPayOrderId(queue_id, token);\n                            }, 1000);\n                        } else {\n                            this.pay(response.data.id);\n                        }\n                    } else {\n                        uni.hideLoading();\n                        this.loading = false;\n                        uni.showModal({\n                            title: '提示',\n                            content: response.msg,\n                            showCancel: false,\n                        });\n                    }\n                }).catch(e => {\n                    this.loading = false;\n                    uni.hideLoading();\n                    uni.showModal({\n                        title: '提示',\n                        content: e.errMsg,\n                        showCancel: false,\n                    });\n                });\n            },\n            pay(id) {\n                let that = this;\n                that.$payment.pay(id).then(res => {\n                    uni.hideLoading();\n                    that.loading = false;\n                    uni.showToast({\n                        title: '购买成功',\n                        duration: 1000\n                    });\n                    if(that.card.send_integral_num > 0 || that.card.send_balance > 0 || that.card.coupons.length > 0 || that.card.cards.length > 0) {\n                        that.success = true;\n                    }else {\n                        setTimeout(v=>{\n                            uni.navigateBack();\n                        },1000)\n                    }\n                }).catch(res => {\n                    uni.hideLoading();\n                    that.loading = false;\n                    uni.showToast({\n                        title: '支付失败',\n                        icon: 'none',\n                        duration: 1000\n                    });\n                });\n            },\n        },\n        onUnload() {\n           clearInterval(this.getPayDataTimer);\n        },\n        onLoad(options) { this.$commonLoad.onload(options);\n            let that = this;\n            uni.getSystemInfo({\n                success: function (res) {\n                    if(res.model.indexOf('iPhone X') > -1 || res.model.indexOf('iPhone 11') > -1 || res.model.indexOf('iPhone11') > -1 || res.model.indexOf('iPhone12') > -1) {\n                        that.iphone_x = true;\n                    }\n                }\n            })\n            var myDate = new Date();\n            let year = myDate.getFullYear();\n            let month = myDate.getMonth() + 1;\n            if (month >= 1 && month <= 9) {\n                month = \"0\" + month;\n            }\n            let now = myDate.getDate();\n            if (now >= 1 && now <= 9) {\n                now = \"0\" + now;\n            }\n            this.today = year + \"/\" + month + \"/\" + now;\n            this.id = options.id;\n            this.end_time = options.end;\n            this.expire_day = options.expire_day ? options.expire_day : 0;\n            that.getSetting(options.id);\n        }\n    }\n</script>\n\n<style scoped lang=\"scss\">\n    .head-card {\n        height: #{344rpx};\n        position: relative;\n        .card-bottom {\n            position: absolute;\n            bottom: 0;\n            left: 0;\n            height: #{80rpx};\n            width: 100%;\n        }\n    }\n    .list {\n        width: #{702rpx};\n        margin: 0 auto;\n        position: relative;\n        margin-top: #{-284rpx};\n        z-index: 5;\n        background-color: #fff;\n        border-radius: #{15rpx};\n        padding-bottom: #{40rpx};\n        box-shadow: 0 0 #{8rpx} rgb(239, 239, 239);\n        .title {\n            width: 100%;\n            padding-top: #{40rpx};\n            margin-bottom: #{20rpx};\n            .title-text {\n                margin: 0 #{20rpx};\n                font-size: #{32rpx};\n                color: #342e25;\n            }\n            image {\n                width: #{60rpx};\n                height: #{19rpx};\n            }\n        }\n        .item {\n            min-height: #{120rpx};\n            border-top: #{2rpx} solid #e2e2e2;\n            padding: #{40rpx} 0;\n            width: #{630rpx};\n            margin: 0 auto;\n            font-size: #{28rpx};\n            color: #342e25;\n            .label {\n                font-size: #{28rpx};\n                width: #{260rpx};\n                text-align: right;\n                margin-right: #{30rpx};\n                color: #999999;\n            }\n            .content {\n                width: #{340rpx};\n                view {\n                    margin-top: #{20rpx};\n                }\n                view:first-of-type {\n                    margin-top: #{2rpx};\n                }\n                .about {\n                    font-size: #{20rpx};\n                    color: #999999;\n                }\n                .to-detail {\n                    font-size: #{24 rpx};\n                    margin-top: 0;\n                    color: #999999;\n                    width: 30%;\n                    height: 100%;\n                    view {\n                        margin-top: 0;\n                    }\n                    image {\n                        width: #{12rpx};\n                        height: #{22rpx};\n                        margin-left: #{12rpx};\n                    }\n                }\n            }\n        }\n    }\n    .bottom-place {\n        height: #{160rpx};\n    }\n    .bottom-place.iphone_x {\n        height: #{210rpx};\n    }\n    .foot {\n        position: fixed;\n        z-index: 997;\n        bottom: 0;\n        left: 0;\n        width: 100%;\n        height: #{160rpx};\n        background-color: #F7F7F7;\n        .foot-button {\n            width: #{702rpx};\n            margin: #{40rpx} auto;\n            height: #{80rpx};\n            line-height: #{80rpx};\n            font-size: #{32rpx};\n            text-align: center;\n            border-radius: #{40rpx};\n            color: #342e25;\n            background-color: #F3BE94;\n        }\n    }\n    .foot.iphone_x {\n        height: #{210rpx};\n        padding-bottom: #{50rpx};\n    }\n\n    .dialog {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0,0,0,.3);\n        z-index: 998;\n        .gift {\n            max-height: #{1059rpx};\n            width: #{668rpx};\n            .gift-bg {\n                height: #{332rpx};\n                width: #{668rpx};\n            }\n            .gift-list {\n                width: #{668rpx};\n                background-color: #fff;\n                padding-bottom: #{55rpx};\n                padding-top: #{40rpx};\n                border-bottom-left-radius: #{20rpx};\n                border-bottom-right-radius: #{20rpx};\n                margin-top: #{-18rpx};\n                .dialog-btn {\n                    width: #{253rpx};\n                    height: #{89rpx};\n                    line-height: #{89rpx};\n                    margin: #{30rpx} auto 0;\n                    border-radius: #{45rpx};\n                    text-align: center;\n                    background: linear-gradient(to right,#fbdec7,#f3bf95);\n                    color: #fcfcfc;\n                }\n                .gift-item {\n                    position: relative;\n                    color: #666666;\n                    font-size: #{30rpx};\n                    text-align: center;\n                    height: #{112rpx};\n                    line-height: #{112rpx};\n                    width: #{532rpx};\n                    border-radius: #{15rpx};\n                    border: #{2rpx} solid #e2e2e2;\n                    margin: 0 auto #{20rpx};\n                    image {\n                        position: absolute;\n                        bottom: #{44rpx};\n                        right: #{20rpx};\n                        width: #{12rpx};\n                        height: #{22rpx};\n                    }\n                    .gift-icon {\n                        height: #{80rpx};\n                        width: #{80rpx};\n                        position: absolute;\n                        left: #{30rpx};\n                        top: #{15rpx};\n                    }\n                }\n            }\n        }\n    }\n\n    .buy-form {\n        border-radius: 16upx;\n        overflow: hidden;\n        box-shadow: 0 0 5upx rgba(0,0,0,0.025);\n        margin: 20upx 24upx 0 24upx;\n    }\n</style>","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=style&index=0&id=61ca88fd&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=style&index=0&id=61ca88fd&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1658389823242\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}