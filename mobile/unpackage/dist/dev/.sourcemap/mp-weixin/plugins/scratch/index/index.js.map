{"version":3,"sources":["uni-app:///main.js","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/scratch/index/index.vue?5fd5","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/scratch/index/index.vue?0c84","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/scratch/index/index.vue?46f3","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/scratch/index/index.vue?23d2","uni-app:///plugins/scratch/index/index.vue","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/scratch/index/index.vue?0a29","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/plugins/scratch/index/index.vue?7dfe"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,uG,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACsN;AACtN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAi2B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC4Gr3B,gD;;AAEA;AACA,eADA;AAEA,4DAFA;AAGA;AACA;AACA,sFADA;AAEA,gEAFA,GADA,CAHA;;;AASA,MATA,kBASA;AACA;AACA;AACA,cADA;AAEA,wBAFA;AAGA,gBAHA;AAIA,gBAJA;AAKA,gBALA;AAMA,gBANA;AAOA,kBAPA;AAQA,kBARA;AASA,cATA;AAUA,iBAVA;AAWA,gBAXA;AAYA,cAZA;AAaA,aAbA,EAaA;AACA,oBAdA;AAeA,qBAfA;AAgBA,oBAhBA;AAiBA,sBAjBA;AAkBA,qBAlBA;AAmBA,sCAnBA;AAoBA,0BApBA,EAoBA;AACA,sBArBA;AAsBA,0BAtBA;AAuBA,WAvBA;AAwBA,wBAxBA;;AA0BA,GArCA;AAsCA;AACA,aADA,qBACA,GADA,EACA,MADA,EACA;AACA;AACA;AACA;AACA,KALA,EAtCA;;AA6CA,UA7CA,sBA6CA;AACA;AACA,GA/CA;AAgDA,QAhDA,oBAgDA;AACA;AACA,GAlDA;;AAoDA,QApDA,kBAoDA,OApDA,EAoDA;AACA;AACA,2BADA;AAEA,iDAFA;;AAIA,GAzDA;AA0DA,iBA1DA,6BA0DA;AACA;AACA,iDADA;AAEA,eAFA;;AAIA,GA/DA;;AAiEA,QAjEA,oBAiEA;AACA;AACA;AACA;AACA,kCADA;AAEA,QAFA,CAEA;AACA;AACA;AACA;AACA,6FADA,CACA,QADA,WACA,YADA,WACA,UADA,WACA,SADA;AAEA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA,KAZA;;AAcA;AACA;AACA;AACA,KAFA,EAEA,KAFA;AAGA,GAtFA;;;AAyFA,mBAzFA,+BAyFA;AACA;AACA,iDADA;AAEA,0CAFA;AAGA,gBAHA;;AAKA,GA/FA;;AAiGA;AACA,oBADA,8BACA;AACA;AACA,mDADA;AAEA,4CAFA;AAGA,kBAHA;AAIA,OAJA;AAKA,KAPA;AAQA,YARA,sBAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAfA;;AAiBA,SAjBA,mBAiBA;AACA;AACA,KAnBA;AAoBA,QApBA,kBAoBA;AACA;AACA,KAtBA;AAuBA,SAvBA,mBAuBA;AACA;AACA,KAzBA;AA0BA,SA1BA,mBA0BA;AACA;AACA;AACA,kJADA;;AAGA,KA/BA;;AAiCA,aAjCA,uBAiCA;AACA;AACA;AACA,qCADA;AAEA,UAFA,CAEA;AACA;AACA;AACA;AACA,OANA;AAOA,KA1CA;;AA4CA,WA5CA,qBA4CA;AACA,kBADA;AAEA,qEAFA,CAEA,gBAFA,YAEA,SAFA,YAEA,aAFA;AAGA,KA/CA;;AAiDA,QAjDA,kBAiDA;AACA,sBADA;AAEA,mBAFA,CAEA,aAFA,YAEA,YAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAHA;AAIA,kCAJA,CAIA,UAJA,YAIA,UAJA,YAIA,SAJA,YAIA,SAJA,YAIA,SAJA,YAIA,SAJA;AAKA,yCALA,CAKA,MALA,YAKA,gBALA,YAKA,iBALA;;AAOA;AACA;AACA;AACA;AACA;AACA,WAFA;AAGA,SAbA;AAcA,OAjBA;AAkBA,KAxEA;;AA0EA;AACA,YA3EA,oBA2EA,CA3EA,EA2EA,CA3EA,EA2EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OALA,MAKA;AACA,wBADA,CACA,SADA,YACA,SADA,YACA,SADA,YACA,SADA;AAEA,OAZA;AAaA,cAbA,CAaA,UAbA,YAaA,UAbA;AAcA;AACA,KA1FA;;AA4FA;AACA,YA7FA,oBA6FA,CA7FA,EA6FA,CA7FA,EA6FA,SA7FA,EA6FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA3GA;;AA6GA;AACA,cA9GA,sBA8GA,CA9GA,EA8GA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA,KAtHA;;AAwHA,aAxHA,qBAwHA,CAxHA,EAwHA;AACA;AACA;AACA;AACA;AACA;AACA,KA9HA;;AAgIA,YAhIA,oBAgIA,CAhIA,EAgIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wCADA;AAEA;AACA,4BADA,EAFA;;AAKA,YALA,CAKA;AACA;AACA,4BADA;AAEA,0EAFA,CAEA,QAFA,YAEA,YAFA,YAEA,UAFA,YAEA,eAFA;AAGA,wCAHA,CAGA,aAHA,YAGA,aAHA;AAIA,WAJA,MAIA;AACA;AACA;AACA;AACA;AACA,SAfA;AAgBA;AACA,KA9JA,EAjGA,E;;;;;;;;;;;;;AC9GA;AAAA;AAAA;AAAA;AAAgnD,CAAgB,07CAAG,EAAC,C;;;;;;;;;;;ACApoD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"plugins/scratch/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './plugins/scratch/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=38743433&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=38743433&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"38743433\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"plugins/scratch/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=38743433&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"app-layout\">\n        <app-layout :haveBackground=\"false\">\n            <view class=\"scratch\">\n                <view class=\"bg\" :style=\"{'background-image': `url(${setting.bg_pic})`}\"></view>\n                <view class=\"scratch-head\">\n                    <view class=\"s-h\" @click=\"rules\">规则</view>\n                    <view class=\"s-h\" @click=\"share\">分享</view>\n                    <app-share-qr-code-poster @share=\"hShareAppMessage\"\n                                              v-model=\"shareShow\"\n                                              :url=\"poster\" title=\"生成海报\"\n                    ></app-share-qr-code-poster>\n                </view>\n                <view class=\"scratch-oppty\">\n                    <view>您还有\n                        <text>{{oppty}}</text>\n                        次抽奖机会\n                    </view>\n                </view>\n                <view class=\"container\">\n                    <image class=\"image-bg-a\" src=\"./../image/scratch_border_bg.png\" load-lazy></image>\n                    <image id='frame' class=\"image-bg-b\" src=\"./../image/scratch_border.png\"\n                           load-lazy></image>\n                    <view v-if=\"is_integral\">\n                        <image class=\"image-bg-b\" src=\"./../image/scratch_hide.png\" load-lazy></image>\n                        <view @click=\"register\" class=\"image-bg-c\">{{setting.deplete_integral_num}}积分刮一次</view>\n                    </view>\n                    <view v-else class=\"integral-show\">\n                        <view class=\"scratch-award main-center\" :hidden=\"shareShow || userLoginShow\">\n                            <!--头条小程序不支持action -->\n                            <canvas v-if=\"is_start\"\n                                    class=\"scratch-canvas\"\n                                    id=\"scratch\"\n                                    canvas-id=\"scratch\"\n                                    @touchstart=\"touchStart\"\n                                    @touchmove=\"touchMove\"\n                                    @touchend=\"touchEnd\"\n                                    disable-scroll></canvas>\n                            <view v-if=\"is_name\" class=\"award-name\">\n                                <text>{{list ? list.name : ''}}</text>\n                                <app-button v-if=\"oppty > 0\" @click=\"onStart\" background=\"#f05525\" height=\"80\"\n                                            width=\"400\"\n                                            border-color=\"#f05525\"\n                                            color=\"#FFFFFF\" font-size=\"32\" round>再刮一次\n                                </app-button>\n                                <app-button v-if=\"oppty == 0\" @click=\"onStart\" background=\"#cdcdcd\" height=\"80\"\n                                            width=\"400\"\n                                            border-color=\"#cdcdcd\"\n                                            color=\"#FFFFFF\" font-size=\"32\" round>再刮一次\n                                </app-button>\n                            </view>\n                        </view>\n                    </view>\n                </view>\n                <view class=\"dir-left-nowrap main-center cross-center end\">\n                    <view @click=\"home\" class=\"dir-left-nowrap cross-center box-grow-0 left\">\n                        <icon class=\"end-icon home\" type></icon>\n                        <view>回到首页</view>\n                    </view>\n                    <view @click=\"prize\" class=\"dir-left-nowrap cross-center box-grow-0\">\n                        <view>我的中奖记录</view>\n                        <icon class=\"end-icon price\" type></icon>\n                    </view>\n                </view>\n                <view class=\"prize\">\n                    <view class=\"dir-left-nowrap cross-center main-center\">\n                        <view class=\"line\"></view>\n                        <view class=\"text\">中奖名单</view>\n                        <view class=\"line\"></view>\n                    </view>\n                    <swiper duration=\"500\" vertical=\"true\" autoplay=\"false\" class=\"scratch-swiper\">\n                        <swiper-item>\n                            <block v-for=\"v in logs\" :key=\"v.id\">\n                                <view class=\"scratch-item\">{{v.create_time}} {{v.user}} {{v.name}}</view>\n                            </block>\n                        </swiper-item>\n                    </swiper>\n                </view>\n            </view>\n\n            <!-- 弹窗 -->\n            <view v-if=\"is_award\">\n                <view class=\"act-modal\">\n                    <view class=\"act-modal-bg\"></view>\n                    <view class=\"act-modal-pic cross-center main-center\">\n                        <view class=\"success main-center\">\n                            <icon class=\"image-bg\" :style=\"{'background-image': `url(${appImg.scratch_win})`}\" type></icon>\n                            <view class=\"dir-top-nowrap name main-center\">\n                                <view>恭喜获得</view>\n                                <text class=\"main-center\">{{list.name}}</text>\n                            </view>\n                        </view>\n                        <view class=\"act-modal-end dir-top-nowrap cross-center main-center\">\n                            <app-button @click=\"onStart\" height=\"72\" width=\"320\" color=\"#FFFFFF\"  background=\"#f05525\"\n                                        border-color=\"#f05525\"\n                                        round>再刮一次\n                            </app-button>\n                            <view class=\"act-zh\">奖品已放入您的账号</view>\n                        </view>\n                    </view>\n                </view>\n            </view>\n        </app-layout>\n    </view>\n</template>\n\n<script>\nimport appShareQrCodePoster from '../../../components/page-component/app-share-qr-code-poster/app-share-qr-code-poster';\nimport {mapState} from 'vuex';\n\nexport default {\n    name: \"index\",\n    components: {appShareQrCodePoster},\n    computed: {\n        ...mapState({\n            appImg: state => state.mallConfig.plugin.scratch.app_image,\n            userInfo: state => state.user.info,\n        }),\n    },\n    data() {\n        let ctx, interval, minX, minY, maxX, maxY, lastX, lastY;\n        return {\n            ctx,\n            interval,\n            minX,\n            minY,\n            maxX,\n            maxY,\n            lastX,\n            lastY,\n            logs: [],\n                setting: {},\n                list: null,\n                oppty: 0,\n                msg: '', //错误信息\n                is_start: true,\n                is_award: false,\n                is_name: false,\n                extra_list: null,\n                touch_end: true,\n                poster: this.$api.scratch.poster,\n                poster_status: false, //hide model\n                shareShow: false,\n                userLoginShow: false,\n                r: 16,\n                is_integral: false,\n            }\n        },\n        watch: {\n            shareShow(val, oldVal) {\n                if (val === false && oldVal === true) {\n                    this.init();\n                }\n            }\n        },\n        onUnload () {\n            clearInterval(this.interval);\n        },\n        onHide () {\n            clearInterval(this.interval);\n        },\n        // #ifdef MP-WEIXIN\n        onLoad(options) { this.$commonLoad.onload(options);\n            wx.showShareMenu({\n                withShareTicket: true,\n                menus: ['shareAppMessage', 'shareTimeline']\n            })\n        },\n        onShareTimeline() {\n            return this.$shareTimeline({\n                title: this.$children[0].navigationBarTitle,\n                query: {}\n            });\n        },\n        // #endif\n        onShow() {\n            const self = this;\n            self.$showLoading({title: '加载中'});\n            self.$request({\n                url: self.$api.scratch.index,\n            }).then(info => {\n                self.$hideLoading();\n                self.is_award = false;\n                if (info.data) {\n                    [self.msg, self.setting, self.oppty, self.list] = [info.code === 1 ? info.msg : '', info.data.setting, info.data.oppty, info.data.list];\n                    self.is_integral = self.setting.deplete_integral_num > 0;\n                } else {\n                    uni.showToast({'title': info.msg, icon: 'none'});\n                }\n                self.init();\n            });\n\n            self.prizeList();\n            self.interval = setInterval(() => {\n                self.prizeList();\n            }, 10000)\n        },\n\n        // #ifdef MP\n        onShareAppMessage() {\n            return this.$shareAppMessage({\n                title: this.$children[0].navigationBarTitle,\n                path: '/plugins/scratch/index/index',\n                params: {}\n            });\n        },\n        // #endif\n        methods: {\n            hShareAppMessage(s = false){\n                return this.$shareAppMessage({\n                    title: this.$children[0].navigationBarTitle,\n                    path: '/plugins/scratch/index/index',\n                    params: {}\n                }, s);\n            },\n            register() {\n                if (this.msg) {\n                    uni.showToast({icon: `none`, title: this.msg});\n                    return;\n                }\n                this.is_integral = false;\n                this.init();\n            },\n\n            share() {\n                this.shareShow = true;\n            },\n            home() {\n                uni.redirectTo({url: `/pages/index/index`});\n            },\n            prize() {\n                uni.navigateTo({url: `/plugins/scratch/prize/prize`});\n            },\n            rules() {\n                // uni.navigateTo({url: `/plugins/scratch/rule/rule`});\n                uni.navigateTo({\n                    url: `/pages/rules/index?url=${encodeURIComponent(this.$api.scratch.setting)}&keys=${JSON.stringify(['setting', 'rule'])}`,\n                });\n            },\n\n            prizeList() {\n                const self = this;\n                self.$request({\n                    url: self.$api.scratch.record,\n                }).then(info => {\n                    if (info.code === 0) {\n                        self.logs = info.data;\n                    }\n                })\n            },\n\n            onStart() {\n                this.init();\n                [this.is_integral, this.list, this.is_award] = [this.setting.deplete_integral_num > 0, this.extra_list, false];\n            },\n\n            init() {\n                const self = this;\n                [self.is_start, self.is_name] = [true, false];\n\n                //Promise\n                setTimeout(() => {\n                    let query = uni.createSelectorQuery();\n                    query.select('#frame').boundingClientRect();\n                    query.exec((res) => {\n                        const canvasWidth = res[0].width;\n                        const canvasHeight = res[0].height;\n                        let imageResource = './../image/scratch_hide.png';\n                        [self.lastX, self.lastY, self.minX, self.minY, self.maxX, self.maxY] = ['', '', '', '', '', ''];\n                        [self.r, self.canvasWidth, self.canvasHeight] = [16, canvasWidth, canvasHeight]\n\n                        let ctx = uni.createCanvasContext('scratch');\n                        ctx.drawImage(imageResource, 0, 0, canvasWidth, canvasHeight);\n                        self.ctx = ctx;\n                        ctx.draw(true, (e) => {\n                            self.is_name = true;\n                        })\n                    })\n                })\n            },\n\n            //\n            drawRect(x, y) {\n                const self = this;\n                const r = self.r / 2;\n                const x1 = x - r > 0 ? x - r : 0\n                const y1 = y - r > 0 ? y - r : 0\n                if ('' !== self.minX) {\n                    self.minX = self.minX > x1 ? x1 : self.minX;\n                    self.minY = self.minY > y1 ? y1 : self.minY;\n                    self.maxX = self.maxX > x1 ? self.maxX : x1;\n                    self.maxY = self.maxY > y1 ? self.maxY : y1;\n                } else {\n                    [self.minX, self.minY, self.maxX, self.maxY] = [x1, y1, x1, y1];\n                }\n                [self.lastX, self.lastY] = [x1, y1];\n                return [x1, y1, 2 * r]\n            },\n\n            // 绘图\n            clearArc(x, y, stepClear) {\n                let r = this.r;\n                let ctx = this.ctx;\n                let calcWidth = r - stepClear;\n                let calcHeight = Math.sqrt(r * r - calcWidth * calcWidth);\n                let posX = x - calcWidth;\n                let posY = y - calcHeight;\n                let widthX = 2 * calcWidth;\n                let heightY = 2 * calcHeight;\n                if (stepClear <= r) {\n                    ctx.clearRect(posX, posY, widthX, heightY);\n                    stepClear += 2;\n                    this.clearArc(x, y, stepClear);\n                }\n            },\n\n            //action\n            touchStart(e) {\n                const self = this;\n                if (self.msg === 'User ID不能为空。') {\n                    this.userLoginShow = true;\n                    self.$store.dispatch('user/info');\n                } else if (self.msg) {\n                    uni.showToast({icon: 'none', title: self.msg})\n                }\n            },\n\n            touchMove(e) {\n                if (!this.is_start || this.msg) return;\n                let stepClear = 2;\n                this.drawRect(e.touches[0].x, e.touches[0].y)\n                this.clearArc(e.touches[0].x, e.touches[0].y, stepClear)\n                this.ctx.draw(true)\n            },\n\n            touchEnd(e) {\n                const self = this;\n                if (!self.is_start || self.msg) return;\n                //自动清楚采用点范围值方式判断\n                let canvasWidth = self.canvasWidth;\n                let canvasHeight = self.canvasHeight;\n                let minX = self.minX;\n                let minY = self.minY;\n                let maxX = self.maxX;\n                let maxY = self.maxY;\n                if (maxX - minX > .4 * canvasWidth && maxY - minY > .4 * canvasHeight && self.touch_end) {\n                    self.touch_end = false;\n\n                    self.$request({\n                        url: self.$api.scratch.receive,\n                        data: {\n                            id: self.list.id\n                        }\n                    }).then(info => {\n                        if (info.code === 0) {\n                            self.ctx.draw();\n                            [self.msg, self.setting, self.oppty, self.extra_list] = [info.msg, info.data.setting, info.data.oppty, info.data.list];\n                            [self.is_start, self.is_award] = [false, self.list.type != 5];\n                        } else {\n                            uni.showToast({icon: 'none', content: info.msg});\n                            self.onStart();\n                        }\n                        self.touch_end = true;\n                    });\n                }\n            },\n        }\n    }\n</script>\n\n<style scoped lang=\"scss\">\n    .app-layout /deep/ .app-layout {\n        background: #5e00b8;\n        min-height: 100vh;\n    }\n    .scratch-canvas {\n        width: #{600rpx};\n        height: #{320rpx};\n        position: absolute;\n        left: 0;\n        z-index: 1;\n    }\n\n    .scratch {\n        text-align: center;\n        padding-bottom: #{1rpx};\n        .bg {\n            position: absolute;\n            left: 0;\n            top: 0;\n            height: 100vh;\n            width: #{100%};\n            display: block;\n            background-repeat: no-repeat;\n            background-size: 100% 100%;\n        }\n\n        .scratch-head {\n            .s-h {\n                color: #FFFFFF;\n                font-size: $uni-font-size-weak-one;\n                background: #000000;\n                text-align: center;\n                background-color: rgba(0, 0, 0, 0.3);\n                line-height: #{48rpx};\n                width: #{92rpx};\n                border-radius: #{24rpx} 0 0 #{24rpx};\n                position: absolute;\n                right: 0;\n                z-index: 1;\n                top: #{40rpx};\n            }\n\n            .s-h:nth-child(2) {\n                top: #{112rpx}\n            }\n        }\n\n        .scratch-oppty {\n            line-height: #{56rpx};\n            font-size: #{28rpx};\n            padding-top: #{380rpx};\n            position: relative;\n            view {\n                color: #ffffff;\n                padding: 0 #{30rpx};\n                display: inline-block;\n                background: rgba(0, 0, 0, 0.3);;\n                border-radius: #{28rpx};\n            }\n\n            text {\n                color: #ffb92a;\n            }\n        }\n\n        .container {\n            position: relative;\n            margin-top: #{40rpx};\n            margin-bottom: #{48rpx};\n            height: #{360rpx};\n            width: 100%;\n\n            .image-bg-a {\n                height: #{360rpx};\n                width: #{654rpx};\n            }\n\n            .image-bg-b {\n                height: #{320rpx};\n                width: #{600rpx};\n                position: absolute;\n                top: #{20rpx};\n                left: 50%;\n                -webkit-transform: translate(-50%, -50%);\n                transform: translate(-50%, 0);\n            }\n\n            .image-bg-c {\n                position: absolute;\n                top: #{150rpx};\n                left: 50%;\n                -webkit-transform: translate(-50%, -50%);\n                transform: translate(-50%, 0);\n                line-height: #{80rpx};\n                background: #f05525;\n                border-radius: #{40rpx};\n                padding: 0 #{48rpx};\n                color: #ffffff;\n            }\n        }\n\n\n        .end {\n            position: relative;\n            color: #FFFFFF;\n            font-size: #{28rpx};\n\n            .left {\n                margin-right: #{160rpx};\n            }\n\n            .end-icon {\n                background-repeat: no-repeat;\n                background-size: 100% 100%;\n                margin: 0 #{16rpx};\n            }\n\n            .end-icon.home {\n                height: #{30rpx};\n                width: #{30rpx};\n                background-image: url('../../../static/image/icon/icon-home-white.png');\n            }\n\n            .end-icon.price {\n                height: #{22rpx};\n                width: #{12rpx};\n                background-image: url('../../../static/image/icon/arrow-right-white.png');\n            }\n        }\n\n        .prize {\n            position: relative;\n            height: #{186rpx};\n            width: #{654rpx};\n            background: #420080;\n            display: inline-block;\n            border-radius: #{16rpx};\n            text-align: left;\n            padding-top: #{26rpx};\n            margin-top: #{48rpx};\n\n            .line {\n                height: #{1px};\n                width: #{120rpx};\n                background: #FFFFFF;\n            }\n\n            .text {\n                padding: 0 #{40rpx};\n                color: #FFFFFF;\n                font-size: #{28rpx};\n                padding-bottom:#{12rpx};\n            }\n\n            .scratch-swiper {\n                height: #{110rpx};\n                font-size: #{24rpx};\n                color: #ffffff;\n            }\n\n            .scratch-item {\n                line-height: #{40rpx};\n                padding: 0 #{50rpx};\n                display: inline-block;\n                white-space: nowrap;\n                width: 100%;\n                overflow: hidden;\n                text-overflow: ellipsis;\n            }\n        }\n\n        .integral-show {\n            position: absolute;\n            top: #{20rpx};\n            left: 50%;\n            -webkit-transform: translate(-50%, -50%);\n            transform: translate(-50%, 0);\n            width: #{600rpx};\n            height: #{320rpx};\n\n            .scratch-award {\n                width: 100%;\n                height: 100%;\n\n                canvas {\n\n                }\n\n                .award-name {\n                    text {\n                        width: #{410rpx};\n                        color: #f05525;\n                        font-size: #{36rpx};\n                        margin-bottom: #{40rpx};\n                        margin-top: #{88rpx};\n                        overflow: hidden;\n                        text-overflow: ellipsis;\n                        display: -webkit-box;\n                        -webkit-line-clamp: 1;\n                        -webkit-box-orient: vertical;\n                    }\n\n                    view {\n\n                    }\n                }\n            }\n        }\n\n        .scraxtch-award {\n\n\n            view {\n                width: #{400rpx};\n                line-height: #{80rpx};\n                color: #ffffff;\n                margin-top: #{40rpx};\n                border-radius: #{40rpx};\n            }\n\n            .next {\n                background: #f05525;\n            }\n\n            .none {\n                background: #cdcdcd;\n            }\n        }\n\n\n    }\n\n    .act-modal {\n        position: fixed;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        z-index: 2001;\n        transition: 200ms;\n\n        .show {\n            visibility: visible;\n            opacity: 1;\n        }\n\n        .act-modal-bg {\n            background: rgba(0, 0, 0, 0.5);\n            position: fixed;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: 100%;\n            z-index: 1;\n        }\n\n        .act-modal-pic {\n            background: rgba(0, 0, 0, 0.25);\n            position: fixed;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: 100%;\n            z-index: 1;\n        }\n\n        .success {\n            position: absolute;\n            top: 0;\n            width: 100%;\n            left: 0;\n\n            .image-bg {\n                height: #{733rpx};\n                width: 100%;\n                background-repeat: no-repeat;\n                background-size: 100% 100%;\n            }\n\n            .name {\n                position: absolute;\n                top: #{540rpx};\n                font-size: #{32rpx};\n                color: #f05525;\n                left: 50%;\n                right: 0;\n                text-align: center;\n                -webkit-transform: translate(-50%, 0);\n                transform: translate(-50%, 0);\n\n                view {\n                    padding-bottom: #{10rpx};\n                }\n\n                text {\n                    //text-align: left;\n                }\n            }\n        }\n\n        .act-modal-end {\n            position: absolute;\n            top: #{730rpx};\n            border-bottom: #{10rpx} solid #ffb947;\n            border-radius: 0 0 #{24rpx} #{24rpx};\n            border-left: #{10rpx} solid #ffb947;\n            border-right: #{10rpx} solid #ffb947;\n            width: #{490rpx};\n            background: #ffffff;\n            height: #{160rpx};\n            left: 0;\n            right: 0;\n            margin: 0 auto;\n\n            .act-zh {\n                margin-top: #{24rpx};\n                font-size: #{24rpx};\n                color: #999999;\n            }\n        }\n    }\n</style>","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=38743433&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=38743433&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1658389782425\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}