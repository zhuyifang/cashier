{"version":3,"sources":["uni-app:///main.js","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/pages/balance/password.vue?5d73","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/pages/balance/password.vue?7fcf","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/pages/balance/password.vue?8808","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/pages/balance/password.vue?0d33","uni-app:///pages/balance/password.vue","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/pages/balance/password.vue?1d9c","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/pages/balance/password.vue?bdfc"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,qG,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,iBAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiI;AACjI;AAC4D;AACL;AACqC;;;AAG5F;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,+FAAM;AACR,EAAE,wGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAq1B,CAAgB,syBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiCz2B,gD;;AAEA;AACA,kBADA;AAEA,MAFA,kBAEA;AACA;AACA,uBADA;AAEA,0BAFA;AAGA,sBAHA;AAIA,6BAJA;AAKA,2BALA;AAMA,uBANA;;AAQA,GAXA;AAYA;AACA;AACA,gEADA;AAEA,8DAFA,GADA;;AAKA,aALA,uBAKA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAXA,GAZA;;AAyBA,QAzBA,oBAyBA;AACA;AACA;AACA,kCADA;AAEA,QAFA,CAEA;AACA;AACA;AACA;AACA,wBADA;AAEA,8BAFA;;AAIA;AACA;AACA,WAFA,EAEA,IAFA;AAGA;AACA;AACA,KAdA;;AAgBA;;AAEA,GA7CA;AA8CA;AACA,YADA,sBACA;AACA;AACA,oCADA;;AAGA,KALA;AAMA,WANA,qBAMA;AACA;AACA,iCADA;;AAGA,KAVA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BADA;AAEA,0BAFA;;AAIA;AACA,2CADA;AAEA,yDAFA;;AAIA;AACA;AACA;AACA;AACA,iHADA;AAEA,0BAFA;AAGA,sBAHA;AAIA,cAJA,CAIA;AACA;AACA;AACA;AACA;AACA;AACA,mCADA;AAEA,+BAFA;;AAIA,aAPA,MAOA;AACA;AACA,4BADA;AAEA,mCAFA;;AAIA;AACA,WAnBA;AAoBA,SAhCA,MAgCA;AACA;AACA,wBADA;AAEA,+BAFA;;AAIA;AACA;AACA,KAvDA,EA9CA,E;;;;;;;;;;;;;ACnCA;AAAA;AAAA;AAAA;AAAguC,CAAgB,2nCAAG,EAAC,C;;;;;;;;;;;ACApvC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/balance/password.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/balance/password.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./password.vue?vue&type=template&id=0a1db9e7&scoped=true&\"\nvar renderjs\nimport script from \"./password.vue?vue&type=script&lang=js&\"\nexport * from \"./password.vue?vue&type=script&lang=js&\"\nimport style0 from \"./password.vue?vue&type=style&index=0&id=0a1db9e7&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a1db9e7\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/balance/password.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./password.vue?vue&type=template&id=0a1db9e7&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./password.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./password.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"bg\">\n        <app-layout :haveBackground=\"haveBackground\">\n            <view v-if=\"!is_success\" class=\"bd-password\">\n                <view v-if=\"userInfo && userInfo.is_pay_password\" class=\"bd-item dir-left-nowrap cross-center\" v-else>\n                    <image src=\"./image/password.png\"  class=\"bd-label box-grow-0\"></image>\n                    <input maxlength=\"6\" class=\"bd-input box-grow-1\" v-model=\"old_pay_password\" placeholder=\"请输入旧密码\" :password=\"isPassword\" type=\"number\">\n                </view>\n                <view class=\"bd-item dir-left-nowrap cross-center\">\n                    <image src=\"./image/password.png\"  class=\"bd-label box-grow-0\"></image>\n                    <input maxlength=\"6\" class=\"bd-input box-grow-1\" v-model=\"pay_password\" :password=\"isPassword\" :placeholder=\"userInfo && userInfo.is_pay_password ? '请输入新密码' : '请输入密码'\" type=\"number\">\n                </view>\n                <view class=\"bd-item dir-left-nowrap cross-center\">\n                    <image src=\"./image/password.png\"  class=\"bd-label box-grow-0\"></image>\n                    <input maxlength=\"6\" class=\"bd-input box-grow-1\" v-model=\"verify_pay_password\" :password=\"isPassword\" :placeholder=\"userInfo && userInfo.is_pay_password ? '请确认新密码' : '请确认密码'\" type=\"number\">\n                </view>\n                <view \n                    class=\"bd-bottom\"\n                    :class=\"inputPass ? 'bd-yes-agree' : 'bd-no-agree'\" @click=\"modify\">\n                    确认\n                </view>\n                <view v-if=\"userInfo && userInfo.is_pay_password && mall.setting.current_customer_service.qrcode_url\" @click=\"toForget\" class=\"forget\">若忘记旧密码请<text style=\"color: #ff4544;\">联系商城客服</text>重置</view>\n            </view>\n            <view v-else class=\"pass-view dir-top-nowrap main-center\">\n                <image class=\"pass-icon\" src=\"./image/pass.png\"></image>\n                <view>余额支付密码设置成功，请务必牢记该密码</view>\n                <view @click=\"toIndex\" class=\"bd-bottom bd-yes-agree\">回商城逛逛</view>\n            </view>\n        </app-layout>\n    </view>\n</template>\n\n<script>\nimport { mapGetters, mapState } from \"vuex\";\n\nexport default {\n    name: \"password\",\n    data() {\n        return {\n            is_success: false,\n            old_pay_password: '',\n            pay_password: '',\n            verify_pay_password: '',\n            haveBackground: false,\n            isPassword: false\n        }\n    },\n    computed: {\n        ...mapState({\n            userInfo: state => state.user.info,\n            mall: state => state.mallConfig.mall\n        }),\n        inputPass() {\n            if(this.userInfo && this.userInfo.is_pay_password) {\n                return this.old_pay_password.length + this.pay_password.length + this.verify_pay_password.length == 18 ? true : false\n            }else {\n                return this.pay_password.length + this.verify_pay_password.length == 12 ? true : false\n            }\n        },\n    },\n    onLoad() {\n        const self = this;\n        self.$request({\n            url: self.$api.balance.index,\n        }).then(info => {\n            if (info.code === 0) {\n                if(info.data.setting.is_pay_password == 0) {\n                    uni.showToast({\n                        icon: 'none',\n                        title: '支付密码功能未开启'\n                    })\n                    setTimeout(()=>{\n                        uni.navigateBack();\n                    },1000)\n                }\n            }\n        });\n        // #ifdef MP-WEIXIN || MP-BAIDU\n        this.isPassword = true;\n        // #endif\n    },\n    methods: {\n        toForget() {\n            uni.navigateTo({\n                url: '/pages/balance/forget'\n            });\n        },\n        toIndex() {\n            uni.reLaunch({\n                url:'/pages/index/index'\n            })\n        },\n        modify: function() {\n            if(this.inputPass) {\n                this.verify_pay_password = this.verify_pay_password.trim();\n                this.pay_password = this.pay_password.trim();\n                this.old_pay_password = this.old_pay_password.trim();\n                if (this.pay_password === this.verify_pay_password) {\n                    this.$showLoading({\n                        type: 'global',\n                        text: '设置中...'\n                    });\n                    let data = {\n                        pay_password: this.pay_password,\n                        verify_pay_password: this.verify_pay_password,\n                    }\n                    if(this.userInfo.is_pay_password) {\n                        data.old_pay_password = this.old_pay_password;\n                    }\n                    this.$request({\n                        url: this.userInfo.is_pay_password ? this.$api.member.update_password : this.$api.member.set_password,\n                        method: \"post\",\n                        data: data\n                    }).then(response => {\n                        this.$hideLoading();\n                        if (response.code === 0) {\n                            this.is_success = true;\n                            this.$store.dispatch('user/refresh');\n                            uni.showToast({\n                                title: response.msg,\n                                type: 'success'\n                            });\n                        } else {\n                            uni.showToast({\n                                icon: 'none',\n                                title: response.msg\n                            });\n                        }\n                    });\n                } else {\n                  uni.showToast({\n                      icon: 'none',\n                      title: '两次输入的密码不一致'\n                  })\n                }\n            }\n        },\n    }\n}\n</script>\n\n<style scoped>\n.forget {\n    position: absolute;\n    bottom: 28upx;\n    width: 100%;\n    left: 0;\n    text-align: center;\n    color: #999;\n    font-size: 28upx;\n    height: 94upx;\n    line-height: 94upx;\n}\n.bg {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n}\n.pass-view {\n    font-size: 28upx;\n    color: #999999;\n    text-align: center;\n    background-color: #ffffff;\n}\n.pass-view .bd-bottom {\n    width: 354upx;\n    font-size: 28upx;\n    margin: 68upx auto;\n}\n.pass-icon {\n    width: 228upx;\n    height: 228upx;\n    display: block;\n    margin: 100upx auto 80upx;\n}\n.bd-password {\n    min-height: 100vh;\n    background-color: #ffffff;\n    padding: 46upx 42upx;\n\n}\n.bd-item {\n    height: 100upx;\n    border-bottom: 2upx solid #f4f4f4;\n}\n.bd-label {\n    width: 36upx;\n    height: 36upx;\n    margin: 0 25upx 0 2upx;\n}\n.bd-input {\n    height: 100%;\n}\n\n    .bd-image {\n        width: 160upx;\n        height: 67upx;\n    }\n  \n.bd-bottom {\n    height: 88upx;\n    line-height: 88upx;\n    color: #ffffff;\n    font-size: 36upx;\n    border-radius: 44upx;\n    margin-top: 68upx;\n    text-align: center;\n}\n.bd-yes-agree {\n    background: rgba(255, 69, 68, 1);\n}\n.bd-no-agree {\n    background: rgba(255, 69, 68, 0.5);\n}\n    .bd-agree-group {\n        margin-top: 42upx;\n    }\n    .bd-color {\n        font-size: 28upx;\n        color: #ff4544;\n    }\n\n    .bd-btn {\n        border-left: 1upx solid #f4f4f4;\n        width: 226upx;\n        height: 53upx;\n        line-height: 53upx;\n        font-size: 32upx;\n        color: #ff4544;\n        text-align: center;\n    }\n</style>","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./password.vue?vue&type=style&index=0&id=0a1db9e7&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./password.vue?vue&type=style&index=0&id=0a1db9e7&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1658389786727\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}