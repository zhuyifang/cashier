{"version":3,"sources":["webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/components/basic-component/app-upload-image/app-upload-image.vue?59db","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/components/basic-component/app-upload-image/app-upload-image.vue?5c42","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/components/basic-component/app-upload-image/app-upload-image.vue?5f9d","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/components/basic-component/app-upload-image/app-upload-image.vue?fbdd","uni-app:///components/basic-component/app-upload-image/app-upload-image.vue","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/components/basic-component/app-upload-image/app-upload-image.vue?5616","webpack:////Users/yfzhu/客户资料/小豆芽/零售宝-2022/mobile/components/basic-component/app-upload-image/app-upload-image.vue?7239"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyI;AACzI;AACoE;AACL;AACsC;;;AAGrG;AACsN;AACtN,gBAAgB,iNAAU;AAC1B,EAAE,sFAAM;AACR,EAAE,uGAAM;AACR,EAAE,gHAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2GAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA42B,CAAgB,8yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACoBh4B,uF;;;;;;;;;;;;;;;;;;;eAEA,EACA,wBADA,EAEA,SACA,SACA,aADA,EADA,EAIA,cACA;AACA,kBAFA,EAGA,4CAHA,EAJA,EASA,UACA;AACA,4BAFA,EAGA,UAHA,EATA,EAcA;AACA;AACA,YACA,YADA,EAEA,WAFA,EAhBA;AAoBA;AACA,kBADA;AAEA,wBAFA,EApBA;;AAwBA;AACA,kBADA;AAEA,mBAFA,EAxBA;;AA4BA;AACA,mBADA;AAEA,oBAFA,EA5BA;;AAgCA;AACA,mBADA;AAEA,mBAFA,EAhCA;;AAoCA;AACA,kBADA;AAEA,qBAFA,EApCA;;AAwCA;AACA,kBADA;AAEA,gBAFA,EAxCA,EAFA;;;AA+CA,MA/CA,kBA+CA;AACA;AACA,6CADA;AAEA,oBAFA;;AAIA,GApDA;AAqDA;AACA;AACA,eAFA,yBAEA;AACA;AACA;AACA,KALA;AAMA;AACA,UAPA,kBAOA,KAPA,EAOA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4BADA;AAEA,uBAFA;;AAIA,KAlBA;AAmBA;AACA,eApBA,yBAoBA;AACA;AACA;;AAEA;AACA,0BADA;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA,wCADA;AAEA,0CAFA;AAGA,0BAHA;AAIA,+BAJA;AAKA;AACA,wCADA;AAEA,mCAFA,EALA;;AASA,qBATA,mBASA,GATA,EASA;AACA;AACA;AACA;AACA;AACA,iBAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCADA;AAEA,mCAFA;;AAIA,iBARA,MAQA;AACA;AACA,6BADA;AAEA,uCAFA;AAGA,qCAHA;;AAKA;AACA,eAhCA;AAiCA,kBAjCA,gBAiCA,CAjCA,EAiCA;AACA;AACA;AACA,+BADA;AAEA,qCAFA;AAGA,qCAHA;;AAKA;AACA,eAzCA;;AA2CA;AACA,SAvDA;AAwDA;AACA;AACA;AACA,gCADA;AAEA,2BAFA;;AAIA,SA9DA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgIA,KAxJA;AAyJA;AACA,gBA1JA,wBA0JA,KA1JA,EA0JA;AACA;AACA;AACA,iCADA;AAEA,uBAFA;;AAIA,KAhKA;AAiKA,mBAjKA,2BAiKA,IAjKA,EAiKA;AACA;AACA,KAnKA,EArDA;;AA0NA,SA1NA,qBA0NA;AACA;AACA,GA5NA,E;;;;;;;;;;;;;ACtBA;AAAA;AAAA;AAAA;AAA2nD,CAAgB,q8CAAG,EAAC,C;;;;;;;;;;;ACA/oD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/basic-component/app-upload-image/app-upload-image.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./app-upload-image.vue?vue&type=template&id=6d303d9a&scoped=true&\"\nvar renderjs\nimport script from \"./app-upload-image.vue?vue&type=script&lang=js&\"\nexport * from \"./app-upload-image.vue?vue&type=script&lang=js&\"\nimport style0 from \"./app-upload-image.vue?vue&type=style&index=0&id=6d303d9a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d303d9a\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/basic-component/app-upload-image/app-upload-image.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./app-upload-image.vue?vue&type=template&id=6d303d9a&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./app-upload-image.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./app-upload-image.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"app-upload-image\">\n        <view class='upload-box' :style=\"{'background':backgroundColor}\">\n            <view class='flex-wrap'>\n                <view v-for='(item, index) in imageList' :key='item.id' class='img-box'>\n                    <view mode=\"aspectFill\" @click='remove(index)' class='remove cross-center main-center'>x</view>\n                    <image @click='previewImage(index)' :src='item' mode=\"aspectFill\" class='img'></image>\n                </view>\n                <view @click='chooseImage'>\n                    <view v-if='isAddImg' :style=\"{'margin':margin + 'rpx'}\" :class=\"{'other-border': diy ? true : false}\" class=\"add-img dir-top-nowrap cross-center main-center\">\n                        <image mode=\"aspectFill\" class='add-img-icon' :src='defaultImg'></image>\n                        <text class='text'>{{text}}</text>\n                        <text class='text' v-if=\"showNumber\">(最多{{maxNum}}张)</text>\n                    </view>\n                </view>\n            </view>\n        </view>\n    </view>\n</template>\n<script>\nimport uploadFile from '@/core/upload.js';\n\nexport default {\n    name: 'app-upload-image',\n    props: {\n        value: {\n            default: null,\n        },\n        defaultImg: {\n            // 添加图片的默认背景图片\n            type: String,\n            default: '/static/image/icon/icon-image.png'\n        },\n        maxNum: {\n            // 可添加最大图片数量\n            type: [Number, String],\n            default: 3\n        },\n        // 标记\n        // 当组件用于循环时使用\n        sign: {\n            type: String,\n            default: ''\n        },\n        backgroundColor: {\n            type: String,\n            default: '#f7f7f7',\n        },\n        margin: {\n            type: String,\n            default: '10'\n        },\n        diy: {\n            type: Boolean,\n            default: false\n        },\n        showNumber: {\n            type: Boolean,\n            default: true,\n        },\n        text: {\n            type: String,\n            default: '上传图片',\n        },\n        count: {\n            type: Number,\n            default: 9\n        }\n    },\n    data() {\n        return {\n            imageList: this.value ? this.value : [],\n            isAddImg: true\n        }\n    },\n    methods: {\n        // 上传最大图片数量\n        checkMaxNum() {\n            let status = this.imageList.length >= this.maxNum ? false : true;\n            this.isAddImg = status;\n        },\n        // 移除图片\n        remove(index) {\n            let imageList = this.imageList;\n            let data = imageList.splice(index, 1);\n            this.imageList = imageList;\n            this.checkMaxNum();\n\n            // 触发事件 tabEvent\n            this.$emit('imageEvent', {\n                imageList: imageList,\n                sign: this.sign\n            })\n        },\n        // 选择图片\n        chooseImage() {\n            let self = this;\n            let imageList = self.imageList;\n            // #ifdef MP\n            uni.chooseImage({\n                count: self.maxNum,\n                success: function(e) {\n                    for (let i in e.tempFilePaths) {\n                        if (i >= (self.maxNum - imageList.length)) {\n                            break;\n                        }\n                        let fileName = '';\n                        // #ifdef MP-BAIDU\n                        fileName = e.tempFilePaths[i].substr(e.tempFilePaths[i].lastIndexOf('/') + 1);\n                        // #endif\n                        uni.uploadFile({\n                            url: self.$api.upload.file,\n                            filePath: e.tempFilePaths[i],\n                            name: 'file',\n                            fileType: 'image',\n                            formData: {\n                                file: e.tempFilePaths[i],\n                                file_name: fileName,\n                            },\n                            success(res) {\n                                const data = res.data;\n                                let result = null;\n                                if (typeof data === 'string') {\n                                    result = JSON.parse(data);\n                                } else {\n                                    result = data;\n                                }\n                                if (result.code == 0) {\n                                    imageList.push(result.data.url)\n                                    self.imageList = imageList;\n                                    self.checkMaxNum();\n                                    self.$emit('imageEvent', {\n                                        imageList: imageList,\n                                        sign: self.sign\n                                    });\n                                } else {\n                                    uni.showModal({\n                                        title: '',\n                                        content: result.msg,\n                                        showCancel: false,\n                                    });\n                                }\n                            },\n                            fail(e) {\n                                if (e && e.errMsg) {\n                                    uni.showModal({\n                                        title: '错误',\n                                        content: e.errMsg,\n                                        showCancel: false,\n                                    });\n                                }\n                            },\n                        });\n                    }\n                },\n                complete: function(e) {\n                    // 触发事件 tabEvent\n                    self.$emit('imageEvent', {\n                        imageList: imageList,\n                        sign: self.sign\n                    })\n                }\n            })\n            // #endif\n\n\n\n            // #ifdef H5\n            uni.chooseImage({\n                count: Number(self.maxNum),\n                success: function(e) {\n                    for (let i in e.tempFilePaths) {\n                        if (i >= (self.maxNum - imageList.length)) {\n                            break;\n                        }\n                        let image = new Image();\n                        image.src = e.tempFilePaths[i];\n                        image.onload = () => {\n                            let canvas = document.createElement(\"canvas\");\n                            canvas.width = image.width;\n                            canvas.height = image.height;\n                            let ctx = canvas.getContext(\"2d\");\n                            ctx.drawImage(image, 0, 0, image.width, image.height);\n                            let ext = image.src.substring(image.src.lastIndexOf(\".\") + 1).toLowerCase();\n                            let dataURL = canvas.toDataURL(\"image/\" + ext);\n                            uploadFile({\n                                url: self.$api.upload.file,\n                                maxNum: self.maxNum,\n                                success: function({res, header}) {\n                                    self.$request({\n                                        url: self.$api.upload.file + '&name=base64',\n                                        header: header,\n                                        method: 'post',\n                                        data: {\n                                            database: dataURL\n                                        }\n                                    }).then(res => {\n                                        if (res.code === 0) {\n                                            self.imageList.push(res.data.url);\n                                            self.checkMaxNum();\n                                            self.$emit('imageEvent', {\n                                                imageList: self.imageList,\n                                                sign: self.sign\n                                            });\n                                        } else {\n                                            uni.showModal({\n                                                title: '',\n                                                content: res.msg,\n                                                showCancel: false,\n                                            });\n                                        }\n                                    })\n                                }\n                            });\n                        };\n                    }\n                },\n                complete: function(e) {\n                    // 触发事件 tabEvent\n                    self.$emit('imageEvent', {\n                        imageList: imageList,\n                        sign: self.sign\n                    })\n                }\n            });\n            // #endif\n\n        },\n        // 图片预览\n        previewImage(index) {\n            let imageList = this.imageList;\n            uni.previewImage({\n                current: imageList[index],\n                urls: imageList\n            })\n        },\n        createObjectURL(blob) {\n            return (window.URL) ? window.URL.createObjectURL(blob) : window.webkitURL.createObjectURL(blob);\n        }\n    },\n    created() {\n        this.checkMaxNum();\n    }\n}\n</script>\n<style lang=\"scss\" scoped>\n.upload-box {\n    background-color: #fff;\n}\n\n.upload-box .title {\n    padding: 15#{rpx} 0 15#{rpx} 20#{rpx};\n}\n\n.upload-box .img {\n    width: 188#{rpx};\n    height: 188#{rpx};\n    margin: 10#{rpx};\n    display: block;\n}\n\n.upload-box .add-img {\n    width: 188#{rpx};\n    height: 188#{rpx};\n    border: 1#{rpx} dotted $uni-weak-color-one;\n    background-color: #fff;\n}\n\n.upload-box .add-img .text {\n    color: $uni-general-color-two;\n    font-size: $uni-font-size-weak-two;\n}\n\n.upload-box .add-img-icon {\n    width: 56#{rpx};\n    height: 56#{rpx};\n    margin-bottom: 10#{rpx};\n}\n\n.upload-box .img-box {\n    position: relative;\n}\n\n\n.upload-box .remove {\n    width: 40#{rpx};\n    height: 40#{rpx};\n    position: absolute;\n    right: -5rpx;\n    top: -10rpx;\n    background: $uni-important-color-red;\n    color: #fff;\n    border-radius: 50%;\n    padding-bottom: 8#{rpx};\n    font-size: 24#{rpx};\n    z-index: 968;\n}\n\n.upload-box .add-img.other-border {\n    border: 1#{rpx} solid $uni-weak-color-one\n}\n</style>","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./app-upload-image.vue?vue&type=style&index=0&id=6d303d9a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./app-upload-image.vue?vue&type=style&index=0&id=6d303d9a&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1658389792239\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}