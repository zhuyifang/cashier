(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["plugins-composition-detail-detail"],{"0a3e":function(t,o,i){"use strict";var e=i("f550"),s=i.n(e);s.a},"106a":function(t,o,i){o=t.exports=i("24fb")(!1),o.push([t.i,".text-center[data-v-634a18bc]{text-align:center}.font-weight[data-v-634a18bc]{font-weight:700}.page-width[data-v-634a18bc]{width:100%}.goods-hover-class[data-v-634a18bc]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-634a18bc]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-634a18bc]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-634a18bc]{width:100%}.u-hover-class[data-v-634a18bc]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-634a18bc]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.no-tip[data-v-634a18bc]{position:fixed;top:%?120?%;left:0;right:0;margin:0 auto;color:#666;font-size:%?24?%;width:%?240?%;text-align:center}.no-tip uni-image[data-v-634a18bc]{height:%?240?%;width:%?240?%;margin-bottom:%?20?%}.no-tip .to-composition[data-v-634a18bc]{border-radius:%?33?%;width:%?246?%;text-align:center;height:%?66?%;line-height:%?66?%;margin-top:%?38?%;color:#fff}.list[data-v-634a18bc]{padding:%?24?%}.list .title[data-v-634a18bc]{font-size:%?28?%;color:#353535}.list .item[data-v-634a18bc]{margin-top:%?20?%;padding:%?24?%;border-radius:%?16?%;background-color:#fff}.dialog-bg[data-v-634a18bc]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.3);z-index:202}.dialog-bg .dialog[data-v-634a18bc]{width:%?630?%;margin:%?260?% auto 0;background-color:#fff;padding-top:%?40?%;border-radius:%?16?%}.dialog-bg .dialog .dialog-title[data-v-634a18bc]{text-align:center;font-size:%?26?%;color:#999}.dialog-bg .dialog .dialog-title .dialog-big-title[data-v-634a18bc]{font-size:%?32?%;color:#353535;margin-bottom:%?10?%}.dialog-bg .dialog .dialog-goods-list[data-v-634a18bc]{padding:0 %?65?%;margin:%?26?% 0 %?48?%}.dialog-bg .dialog .dialog-goods-list .dialog-goods[data-v-634a18bc]{width:%?80?%;height:%?80?%;border-radius:%?8?%;margin:%?10?%}.dialog-bg .dialog .dialog-goods-list .dialog-goods uni-image[data-v-634a18bc]{border-radius:%?8?%;width:%?80?%;height:%?80?%}.dialog-bg .dialog .dialog-close[data-v-634a18bc]{width:%?630?%;border-top:%?2?% solid #e2e2e2;font-size:%?32?%;text-align:center;padding:%?25?% 0}.bottom[data-v-634a18bc]{width:100%;height:%?120?%;position:fixed;bottom:0;left:0;z-index:30;background-color:#fff;border-top:%?2?% solid #e2e2e2;font-size:%?24?%;color:#353535;padding:0 %?20?%}.bottom.iphone_x[data-v-634a18bc]{height:%?150?%;padding-bottom:%?50?%}.bottom .total-price[data-v-634a18bc]{font-size:%?36?%;margin-left:%?8?%}.bottom .submit-btn[data-v-634a18bc]{width:%?222?%;height:%?78?%;border-radius:%?39?%;color:#fff;font-size:%?32?%;line-height:%?78?%;text-align:center}.bottom .discount[data-v-634a18bc]{font-size:%?24?%}.bottom-space[data-v-634a18bc]{height:%?110?%}.bottom-space.iphone_x[data-v-634a18bc]{height:%?160?%}body.?%PAGE?%[data-v-634a18bc]{background:#f7f7f7}",""])},"10b3":function(t,o,i){"use strict";var e;i.d(o,"b",(function(){return s})),i.d(o,"c",(function(){return a})),i.d(o,"a",(function(){return e}));var s=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("app-layout",[t.loading?e("app-list",{attrs:{hidden:!1,top:0,theme:t.getTheme,list:t.list},on:{update:function(o){arguments[0]=o=t.$handleEvent(o),t.update.apply(void 0,arguments)},change:function(o){arguments[0]=o=t.$handleEvent(o),t.getTotal.apply(void 0,arguments)},updateList:function(o){arguments[0]=o=t.$handleEvent(o),t.updateList.apply(void 0,arguments)}}}):t._e(),t.other.length>0?e("v-uni-view",{staticClass:"list"},[e("v-uni-view",{staticClass:"title"},[t._v("其他套餐")]),t._l(t.other,(function(o,i){return e("v-uni-view",{key:i,staticClass:"item dir-left-nowrap"},[e("app-composition",{attrs:{theme:t.getTheme,item:o},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.choose(o)},look:function(i){arguments[0]=i=t.$handleEvent(i),t.choose(o)}}})],1)}))],2):t._e(),t.list.length>0?e("v-uni-view",{class:["bottom-space",t.iphone_x?"iphone_x":""]}):t._e(),t.list.length>0?e("v-uni-view",{class:["bottom","main-between","cross-center",t.iphone_x?"iphone_x":""]},[e("v-uni-view",[e("v-uni-view",{staticClass:"dir-left-nowrap cross-center"},[e("v-uni-view",[t._v("总计")]),e("v-uni-view",{staticClass:"total-price",style:{color:t.getTheme.color}},[t._v("￥"+t._s(0==t.total?"0.00":t.total))])],1),e("v-uni-view",{staticClass:"discount",style:{color:t.getTheme.color}},[t._v("已省￥"+t._s(t.max_discount))])],1),e("v-uni-view",{staticClass:"submit-btn",style:{"background-color":t.getTheme.background},on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.toBuy.apply(void 0,arguments)}}},[t._v("立即购买")])],1):t._e(),t.showNoAttr?e("v-uni-view",{staticClass:"dialog-bg"},[e("v-uni-view",{staticClass:"dialog"},[e("v-uni-view",{staticClass:"dialog-title"},[e("v-uni-view",{staticClass:"dialog-big-title"},[t._v("以下商品未选择规格")]),e("v-uni-view",[t._v("请选择规格后购买")])],1),e("v-uni-view",{class:[t.noAttrList.length>4?"dir-left-wrap":"main-center","dialog-goods-list"]},t._l(t.noAttrList,(function(t,o){return e("v-uni-view",{key:o,staticClass:"dialog-goods"},[e("v-uni-image",{attrs:{src:t.cover_pic}})],1)})),1),e("v-uni-view",{staticClass:"dialog-close",style:{color:t.getTheme.color},on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.close.apply(void 0,arguments)}}},[t._v("我知道了")])],1)],1):t._e(),0==t.list.length&&t.loading?e("v-uni-view",{staticClass:"no-tip"},[e("v-uni-image",{attrs:{src:i("eaa1")}}),e("v-uni-view",[t._v("您选购的套餐已下架")]),e("v-uni-view",{staticClass:"to-composition",style:{"background-color":t.getTheme.background},on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.toComposition.apply(void 0,arguments)}}},[t._v("逛逛套餐专区")])],1):t._e()],1)},a=[]},"23a5":function(t,o,i){var e=i("106a");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var s=i("4f06").default;s("2899e2be",e,!0,{sourceMap:!1,shadowMode:!1})},"32d7":function(t,o,i){var e=i("e9e2");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var s=i("4f06").default;s("e1118352",e,!0,{sourceMap:!1,shadowMode:!1})},"381c":function(t,o,i){"use strict";i.r(o);var e=i("10b3"),s=i("af59");for(var a in s)["default"].indexOf(a)<0&&function(t){i.d(o,t,(function(){return s[t]}))}(a);i("4f28");var n,c=i("f0c5"),r=Object(c["a"])(s["default"],e["b"],e["c"],!1,null,"634a18bc",null,!1,e["a"],n);o["default"]=r.exports},"49af":function(t,o,i){"use strict";i.r(o);var e=i("e9e4"),s=i.n(e);for(var a in e)["default"].indexOf(a)<0&&function(t){i.d(o,t,(function(){return e[t]}))}(a);o["default"]=s.a},"4f28":function(t,o,i){"use strict";var e=i("23a5"),s=i.n(e);s.a},"54f8":function(t,o,i){"use strict";i.r(o);var e=i("f8bd"),s=i.n(e);for(var a in e)["default"].indexOf(a)<0&&function(t){i.d(o,t,(function(){return e[t]}))}(a);o["default"]=s.a},"7c5a":function(t,o,i){"use strict";var e=i("32d7"),s=i.n(e);s.a},"856e":function(t,o,i){"use strict";var e;i.d(o,"b",(function(){return s})),i.d(o,"c",(function(){return a})),i.d(o,"a",(function(){return e}));var s=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("v-uni-view",{staticClass:"app-composition dir-left-nowrap"},[i("v-uni-view",{on:{click:function(o){o.stopPropagation(),arguments[0]=o=t.$handleEvent(o),t.open.apply(void 0,arguments)}}},[1==t.item.type?i("v-uni-view",{staticClass:"app-composition-goods",class:2==t.item.goods_list.length?"two":3==t.item.goods_list.length?"three":4==t.item.goods_list.length?"four":"five"},t._l(t.item.goods_list,(function(t){return i("v-uni-image",{key:t.id,attrs:{mode:"aspectFill",src:t.cover_pic}})})),1):t._e(),2==t.item.type?i("v-uni-view",{staticClass:"app-composition-goods",class:1==t.item.goods_list.length?"two":2==t.item.goods_list.length?"three":3==t.item.goods_list.length?"four":"five"},[t._l(t.item.host_list,(function(t){return i("v-uni-image",{key:t.id,attrs:{mode:"aspectFill",src:t.cover_pic}})})),t._l(t.item.goods_list,(function(t){return i("v-uni-image",{key:t.id,attrs:{mode:"aspectFill",src:t.cover_pic}})}))],2):t._e(),t._t("default")],2),i("v-uni-view",{staticClass:"app-composition-right box-grow-1",class:t.large?"dir-top-nowrap main-between":"",on:{click:function(o){o.stopPropagation(),arguments[0]=o=t.$handleEvent(o),t.toDetail.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"dir-left-nowrap app-composition-info",class:t.large?"t-omit-two":"t-omit"},[1==t.item.type&&t.large?i("v-uni-text",{staticClass:"app-composition-type large",style:{background:t.theme.background}},[t._v("固定套餐")]):t._e(),2==t.item.type&&t.large?i("v-uni-text",{staticClass:"app-composition-type large",style:{background:t.theme.background}},[t._v("搭配套餐")]):t._e(),1!=t.item.type||t.large?t._e():i("v-uni-text",{staticClass:"app-composition-type",style:{color:t.theme.color}},[t._v("固定")]),2!=t.item.type||t.large?t._e():i("v-uni-text",{staticClass:"app-composition-type",style:{color:t.theme.color}},[t._v("搭配")]),i("v-uni-text",{staticClass:"app-composition-name",class:t.large?"long-name":""},[t._v(t._s(t.item.name))])],1),i("div",[i("v-uni-view",{staticClass:"app-composition-price",style:{color:t.theme.color}},[t._v("套餐价："),t.large?i("v-uni-text",[t._v("￥")]):t._e(),t.large?i("v-uni-text",{staticClass:"price-int"},[t._v(t._s(t.price.priceInt))]):t._e(),t.large?i("v-uni-text",[t._v(t._s(t.price.priceFloat))]):i("v-uni-text",[t._v("￥"+t._s(t.item.min_composition_price))])],1),i("v-uni-view",{staticClass:"app-composition-discount"},[t._v("最多可省"),i("v-uni-text",[t._v("￥"+t._s(t.item.max_discount))])],1)],1)],1)],1)},a=[]},"8e53":function(t,o,i){"use strict";i.r(o);var e=i("f60d"),s=i("54f8");for(var a in s)["default"].indexOf(a)<0&&function(t){i.d(o,t,(function(){return s[t]}))}(a);i("0a3e");var n,c=i("f0c5"),r=Object(c["a"])(s["default"],e["b"],e["c"],!1,null,"b586fc7e",null,!1,e["a"],n);o["default"]=r.exports},9495:function(t,o,i){"use strict";i.r(o);var e=i("856e"),s=i("49af");for(var a in s)["default"].indexOf(a)<0&&function(t){i.d(o,t,(function(){return s[t]}))}(a);i("7c5a");var n,c=i("f0c5"),r=Object(c["a"])(s["default"],e["b"],e["c"],!1,null,"b07cd4ce",null,!1,e["a"],n);o["default"]=r.exports},af59:function(t,o,i){"use strict";i.r(o);var e=i("d900"),s=i.n(e);for(var a in e)["default"].indexOf(a)<0&&function(t){i.d(o,t,(function(){return e[t]}))}(a);o["default"]=s.a},c839:function(t,o,i){o=t.exports=i("24fb")(!1),o.push([t.i,".text-center[data-v-b586fc7e]{text-align:center}.font-weight[data-v-b586fc7e]{font-weight:700}.page-width[data-v-b586fc7e]{width:100%}.goods-hover-class[data-v-b586fc7e]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-b586fc7e]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-b586fc7e]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-b586fc7e]{width:100%}.u-hover-class[data-v-b586fc7e]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-b586fc7e]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.app-list .app-item[data-v-b586fc7e]{background-color:#fff;margin:%?10?% %?24?%;border-radius:%?16?%;padding:%?24?%;padding-top:0;padding-left:0}.app-list .app-item .app-price[data-v-b586fc7e]{line-height:%?74?%;height:%?74?%;text-align:right;color:#353535;font-size:%?28?%}.app-list .app-item .app-price .max-discount[data-v-b586fc7e]{font-size:%?24?%;color:#f39800;margin-left:%?16?%}.app-list .app-item .app-item-title[data-v-b586fc7e]{padding-right:%?24?%;height:%?64?%;font-size:%?28?%;color:#353535;font-weight:700}.app-list .app-item .app-item-title .check-icon[data-v-b586fc7e]{padding:%?28?% %?20?% 0 %?24?%;width:%?72?%;height:%?64?%}.app-list .app-item .app-item-title .check-icon uni-image[data-v-b586fc7e]{height:%?32?%;width:%?32?%;border-radius:%?16?%;display:block}.app-list .app-item .app-item-title .item-type[data-v-b586fc7e]{margin-top:%?24?%;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;height:%?40?%;line-height:%?38?%;padding:0 %?12?%;border-radius:%?20?%;margin-right:%?16?%;border:%?2?% solid;font-weight:400}.app-list .app-item .app-item-title .item-name[data-v-b586fc7e]{margin-top:%?24?%;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.app-list .app-item .item-goods[data-v-b586fc7e]{margin-top:%?28?%;margin-left:%?76?%;padding-bottom:%?28?%;border-bottom:%?2?% solid #e2e2e2;position:relative}.app-list .app-item .item-goods .out-dialog[data-v-b586fc7e]{width:%?180?%;height:%?180?%;border-radius:%?16?%;position:absolute;top:0;left:0;z-index:10;background-color:rgba(0,0,0,.5)}.app-list .app-item .item-goods .out-dialog uni-image[data-v-b586fc7e]{width:%?180?%;height:%?180?%;border-radius:%?16?%}.app-list .app-item .item-goods .check-icon[data-v-b586fc7e]{position:absolute;left:%?-76?%;top:50%;margin-top:%?-52?%;padding:%?24?%;width:%?80?%;height:%?80?%}.app-list .app-item .item-goods .check-icon uni-image[data-v-b586fc7e]{height:%?32?%;width:%?32?%;border-radius:%?16?%;display:block}.app-list .app-item .item-goods .goods-img[data-v-b586fc7e]{height:%?180?%;width:%?180?%;border-radius:%?8?%;margin-right:%?24?%;position:relative}.app-list .app-item .item-goods .goods-info[data-v-b586fc7e]{font-size:%?28?%;color:#353535;position:relative}.app-list .app-item .item-goods .goods-info .item-good-name[data-v-b586fc7e]{width:%?336?%;max-height:%?90?%;line-height:%?42?%;word-break:break-all;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.app-list .app-item .item-goods .goods-info .item-good-num[data-v-b586fc7e]{position:absolute;right:0;top:0}.app-list .app-item .item-goods .goods-info .choose_price[data-v-b586fc7e]{font-size:%?28?%;margin-top:%?20?%}.app-list .app-item .item-goods .goods-info .item-good-attr[data-v-b586fc7e]{margin-top:%?20?%;background-color:#f7f7f7;width:%?398?%;display:inline-block;padding:%?8?% %?16?%;border-radius:%?8?%;position:relative}.app-list .app-item .item-goods .goods-info .item-good-attr .item-good-attr-text[data-v-b586fc7e]{width:%?314?%;line-height:%?32?%;max-height:%?62?%;color:#999}.app-list .app-item .item-goods .goods-info .item-good-attr .item-good-attr-arrow[data-v-b586fc7e]{position:absolute;right:%?16?%;top:50%;margin-top:%?-6?%;height:%?12?%;width:%?22?%}.app-list .app-item .item-goods[data-v-b586fc7e]:last-of-type{border-bottom:0}body.?%PAGE?%[data-v-b586fc7e]{background:#f7f7f7}",""])},d900:function(t,o,i){"use strict";var e=i("4ea4");i("8e6e"),i("ac6a"),i("456d"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=e(i("bd86")),a=i("2f62"),n=e(i("8e53")),c=e(i("9495"));function r(t,o){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);o&&(e=e.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),i.push.apply(i,e)}return i}function l(t){for(var o=1;o<arguments.length;o++){var i=null!=arguments[o]?arguments[o]:{};o%2?r(Object(i),!0).forEach((function(o){(0,s.default)(t,o,i[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(i,o))}))}return t}var d={data:function(){return{list:[],other:[],total:0,showNoAttr:!1,noAttrList:[],goods_id:"",max_discount:"0.00",page:2,hidden:!1,iphone_x:!1,noMore:!1,composition_id:"",loading:!1}},components:{"app-list":n.default,"app-composition":c.default},computed:l({},(0,a.mapGetters)("mallConfig",{getTheme:"getTheme"})),methods:{choose:function(t){this.composition_id=t.id,this.total="0.00",this.max_discount="0.00",this.getDetail()},toComposition:function(){uni.redirectTo({url:"/plugins/composition/index/index"})},toBuy:function(){var t=this,o=[],i=[{mch_id:0,composition_list:[]}];if(t.noAttrList.length>0)t.showNoAttr=!0;else{for(var e in t.list)if(o=[],t.list[e].choose){var s={composition_id:t.list[e].id,goods_list:[]};if(t.list[e].host_list.length>0){for(var a in t.list[e].host_list[0].choose_attr.attr_list)o.push({attr_id:t.list[e].host_list[0].choose_attr.attr_list[a].attr_id,attr_group_id:t.list[e].host_list[0].choose_attr.attr_list[a].attr_group_id});s.goods_list.push({id:t.list[e].host_list[0].goods_id,num:1,goods_attr_id:t.list[e].host_list[0].choose_attr.goods_attr_id,attr:[]})}for(var n in t.list[e].goods_list)if(t.list[e].goods_list[n].choose_attr&&t.list[e].goods_list[n].choose_attr.attr_list.length>0){for(var c in t.list[e].goods_list[n].choose_attr.attr_list)o.push({attr_id:t.list[e].goods_list[n].choose_attr.attr_list[c].attr_id,attr_group_id:t.list[e].goods_list[n].choose_attr.attr_list[c].attr_group_id});s.goods_list.push({id:t.list[e].goods_list[n].goods_id,num:1,goods_attr_id:t.list[e].goods_list[n].choose_attr.goods_attr_id,attr:o})}i[0].composition_list.push(s)}else{var r={composition_id:t.list[e].id,goods_list:[]};if(t.list[e].host_list.length>0&&t.list[e].host_list[0].choose_goods){for(var l in t.list[e].host_list[0].choose_attr.attr_list)o.push({attr_id:t.list[e].host_list[0].choose_attr.attr_list[l].attr_id,attr_group_id:t.list[e].host_list[0].choose_attr.attr_list[l].attr_group_id});r.goods_list.push({id:t.list[e].host_list[0].goods_id,num:1,goods_attr_id:t.list[e].host_list[0].choose_attr.goods_attr_id,attr:o})}for(var d in t.list[e].goods_list)if(t.list[e].goods_list[d].choose_goods&&t.list[e].goods_list[d].choose_attr.attr_list){for(var p in!1,t.list[e].goods_list[d].choose_attr.attr_list)o.push({attr_id:t.list[e].goods_list[d].choose_attr.attr_list[p].attr_id,attr_group_id:t.list[e].goods_list[d].choose_attr.attr_list[p].attr_group_id});r.goods_list.push({id:t.list[e].goods_list[d].goods_id,num:1,goods_attr_id:t.list[e].goods_list[d].choose_attr.goods_attr_id,attr:o})}r.goods_list.length>0&&i[0].composition_list.push(r)}if(0==i[0].composition_list.length)uni.showToast({title:"请选择套餐",icon:"none",duration:1e3});else{for(var g in i[0].composition_list)1==i[0].composition_list[g].goods_list.length&&i[0].composition_list.splice(g,1);if(0==i[0].composition_list.length)uni.showToast({title:"请选择搭配商品",icon:"none",duration:1e3});else{for(var u in i[0].goods_list=[],i[0].composition_list)for(var h in i[0].composition_list[u].goods_list)i[0].composition_list[u].goods_list[h].cart_id=0,i[0].goods_list.push(i[0].composition_list[u].goods_list[h]);var f="/pages/order-submit/order-submit?mch_list=".concat(JSON.stringify(i));f+="&preview_url=".concat(encodeURIComponent(this.$api.composition.order_preview),"&submit_url=").concat(encodeURIComponent(this.$api.composition.order_submit),"&plugin=composition"),this.$jump({open_type:"navigate",url:f})}}}},close:function(){this.showNoAttr=!1},updateList:function(t){this.list=t},update:function(t){this.noAttrList=t},getTotal:function(t){this.total=t.total,t.max_discount&&(this.max_discount=t.max_discount.toFixed(2))},getDetail:function(){var t=this;t.loading=!1,uni.showLoading({mask:!0,title:"加载中..."});var o={composition_id:t.composition_id};t.goods_id>0&&(o.goods_id=t.goods_id),t.$request({url:t.goods_id>0?t.$api.composition.detail:t.$api.composition.composition_detail,data:o}).then((function(o){if(t.loading=!0,uni.hideLoading(),0==o.code){for(var i in t.goods_id>0?(t.list=o.data.other_list,t.other=o.data.list):(t.list=[],t.list[0]=o.data.composition),t.other.length<4&&(t.noMore=!0),t.list)for(var e in t.list[i].choose=!1,t.list[i].goods_list)t.list[i].goods_list[e].choose_attr=null,1==t.list[i].goods_list[e].goods_attr.length&&(t.list[i].goods_list[e].choose_attr=t.list[i].goods_list[e].goods_attr[0],t.list[i].goods_list[e].choose_attr.number=1,t.list[i].goods_list[e].total_price=(+t.list[i].goods_list[e].choose_attr.price-+t.list[i].goods_list[e].price).toFixed(2)),2==t.list[i].type&&(t.list[i].host_list[0].choose_attr=null,1==t.list[i].host_list[0].goods_attr.length&&(t.list[i].host_list[0].choose_attr=t.list[i].host_list[0].goods_attr[0],t.list[i].host_list[0].choose_attr.number=1,t.list[i].host_list[0].total_price=(+t.list[i].host_list[0].choose_attr.price-+t.list[i].host_list[0].price).toFixed(2)),t.list[i].goods_list[e].choose_goods=!1,t.list[i].host_list[0].choose_goods=!0,t.list[i].host_list[0].opacity=.3);1==t.list[0].type&&(t.list[0].choose=!0,t.max_discount=t.list[0].max_discount)}else uni.hideLoading(),uni.showToast({title:o.msg,icon:"none",duration:1e3})})).catch((function(o){t.loading=!0,uni.hideLoading(),t.$hideLoading()}))},getMore:function(){var t=this,o=this;uni.showLoading({mask:!0,title:"加载中"}),o.$request({url:o.$api.composition.detail,data:{goods_id:o.goods_id,composition_id:o.composition_id,page:o.page}}).then((function(i){if(uni.hideLoading(),0==i.code){if(0==i.data.list.length)return t.noMore=!0,!1;for(var e in o.page++,o.other=o.other.concat(i.data.list),o.list)for(var s in o.list[e].choose=!1,o.list[e].goods_list)o.list[e].goods_list[s].choose_attr=null,2==o.list[e].type&&(o.list[e].host_list[0].choose_attr=null,o.list[e].host_list[0].opacity=1,o.list[e].goods_list[s].choose_goods=!1,o.list[e].host_list[0].choose_goods=!1)}else uni.hideLoading(),uni.showToast({title:i.msg,icon:"none",duration:1e3})})).catch((function(t){o.$hideLoading()}))}},onReachBottom:function(){this.noMore||this.getMore()},onLoad:function(t){this.$commonLoad.onload(t);var o=this;o.iphone_x=this.$utils.checkIphone(),this.goods_id=t.goods_id>0?t.goods_id:"",this.composition_id=t.composition_id,o.getDetail()}};o.default=d},e9e2:function(t,o,i){o=t.exports=i("24fb")(!1),o.push([t.i,".text-center[data-v-b07cd4ce]{text-align:center}.font-weight[data-v-b07cd4ce]{font-weight:700}.page-width[data-v-b07cd4ce]{width:100%}.goods-hover-class[data-v-b07cd4ce]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-b07cd4ce]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-b07cd4ce]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-b07cd4ce]{width:100%}.u-hover-class[data-v-b07cd4ce]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-b07cd4ce]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.app-composition .app-composition-goods[data-v-b07cd4ce]{width:%?288?%;height:%?140?%;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:%?24?%;position:relative}.app-composition .app-composition-goods.two uni-image[data-v-b07cd4ce]{position:absolute;width:%?140?%;height:%?140?%;border-radius:%?8?%;top:0}.app-composition .app-composition-goods.two uni-image[data-v-b07cd4ce]:first-of-type{left:0}.app-composition .app-composition-goods.two uni-image[data-v-b07cd4ce]:last-of-type{right:0}.app-composition .app-composition-goods.three uni-image[data-v-b07cd4ce]{position:absolute;width:%?140?%;height:%?66?%;border-radius:%?8?%}.app-composition .app-composition-goods.three uni-image[data-v-b07cd4ce]:first-of-type{left:0;top:0;height:%?140?%;width:%?140?%}.app-composition .app-composition-goods.three uni-image[data-v-b07cd4ce]:nth-child(2){top:0;right:0}.app-composition .app-composition-goods.three uni-image[data-v-b07cd4ce]:last-of-type{bottom:0;right:0}.app-composition .app-composition-goods.four uni-image[data-v-b07cd4ce]{position:absolute;width:%?66?%;height:%?66?%;border-radius:%?8?%}.app-composition .app-composition-goods.four uni-image[data-v-b07cd4ce]:first-of-type{left:0;top:0;height:%?140?%;width:%?140?%}.app-composition .app-composition-goods.four uni-image[data-v-b07cd4ce]:nth-child(2){top:0;right:0;width:%?140?%}.app-composition .app-composition-goods.four uni-image[data-v-b07cd4ce]:nth-child(3){right:%?74?%;bottom:0}.app-composition .app-composition-goods.four uni-image[data-v-b07cd4ce]:last-of-type{right:0;bottom:0}.app-composition .app-composition-goods.five uni-image[data-v-b07cd4ce]{position:absolute;width:%?66?%;height:%?66?%;border-radius:%?8?%}.app-composition .app-composition-goods.five uni-image[data-v-b07cd4ce]:first-of-type{left:0;top:0;height:%?140?%;width:%?140?%}.app-composition .app-composition-goods.five uni-image[data-v-b07cd4ce]:nth-child(2){top:0;right:%?74?%}.app-composition .app-composition-goods.five uni-image[data-v-b07cd4ce]:nth-child(3){right:0;top:0}.app-composition .app-composition-goods.five uni-image[data-v-b07cd4ce]:nth-child(4){right:%?74?%;bottom:0}.app-composition .app-composition-goods.five uni-image[data-v-b07cd4ce]:last-of-type{right:0;bottom:0}.app-composition .app-composition-right[data-v-b07cd4ce]{width:%?342?%;text-align:left}.app-composition .app-composition-info[data-v-b07cd4ce]{width:%?342?%}.app-composition .app-composition-info .app-composition-type[data-v-b07cd4ce]{font-size:%?22?%;margin:0 %?16?% 0 0;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.app-composition .app-composition-info .app-composition-type.large[data-v-b07cd4ce]{padding:0 %?12?%;border-radius:%?8?%;color:#fff}.app-composition .app-composition-info .app-composition-name[data-v-b07cd4ce]{width:%?260?%;font-size:%?28?%;color:#353535}.app-composition .app-composition-info .app-composition-name.long-name[data-v-b07cd4ce]{width:%?342?%}.app-composition .app-composition-price[data-v-b07cd4ce]{color:#999;font-size:%?24?%;margin:%?14?% 0 %?10?%}.app-composition .app-composition-price uni-text[data-v-b07cd4ce]{font-size:%?28?%;font-weight:600}.app-composition .app-composition-price .price-int[data-v-b07cd4ce]{font-size:%?40?%}.app-composition .app-composition-discount[data-v-b07cd4ce]{color:#999;font-size:%?24?%}body.?%PAGE?%[data-v-b07cd4ce]{background:#f7f7f7}",""])},e9e4:function(t,o,i){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;i("2f62");var e={name:"app-composition",props:{item:{type:Object},large:Boolean,theme:Object},data:function(){return{price:{priceFloat:"",priceInt:""}}},created:function(){var t=this;t.price=t.handlePrice(t.item.min_composition_price)},methods:{open:function(t){this.$emit("click",t)},toDetail:function(t){this.$emit("look",t)}}};o.default=e},eaa1:function(t,o){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAMAAAAJixmgAAABX1BMVEUAAADp6enp6enp6enp6enp6enq6urp6enp6enq6urp6enp6enp6enp6enp6enq6urp6enp6enp6enp6enp6enp6enq6urp6enp6enp6enp6enq6urq6urp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enq6urq6urp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6en////p6enp6en8/Pz8/Pz7+/vp6enp6en29vbp6enp6enq6urz8/P4+Pj////8/Pz29vbu7u7p6enp6en////+/v709PTp6en9/f3u7u7u7u7t7e339/fp6en////29vbq6urp6en////x8fG3t7fY2Ni4uLjd3d3e3t68vLzm5ub6+vrPz8/7+/vh4eHX19fu7u7b29vw8PDk5OTIyMjMzMy+vr7BwcG6urrFxcXT09P39/fr6+vKysr09PTv7++No66mAAAAVnRSTlMA+v5hBkjm1APwS/j16O7XseyR5N5B4bsKCPTay46bIb85n5X3xWhNyLaqJlUxKqWZiH54UvNGDs3Iui0cvXAS6ruw7dLJuT4359jQXeDY0c2oZOnD9hpDoD4AAA1BSURBVHja7NrZU9NQFMfxc9O0SeiS7tYuFkop1VrBDRdExX3cdfRH676Mo+Pu//9iLoO1aulNcnPTVv28wAMz8J17cpIA9N+kHarZ8bhRO0T/Bn1RwzZttUT/AH0PBuZ1mk3RWCxKLi1iyCLNphgQc3v9MgCVYydOHKsAYDN6HcNB7tQA2OfIcc4GUKOZ5CGYVx6jbcd4O82caAw7XF3HDMAJ2nYCAKOZE8NAzFtwCUCZZs5QcNL7SBs0c+aS2JGb8760sjSTPCyt9cFtifeydZpJcPxrDx7Jf+rRci6Zmwv+5UHPZlJZXfZHO5BnLH9gjibpUNZmZSMrun6zcByW+05t7GjPwENsBo4MSVizMGCt0bTDNpnzTWAIm6MpJx1cBWal2NlXGPC7uZaBmSnOYsD/5mpgdoozGPC/ufL4A4vSdAokWMOfrCm9OwUy0k2MUKWppGdT8kurglGmdagDuC01MEqDppZs8DJGsWmM0qKVqnmbpyl6tDSrGKFMY6zCkVZWrPrloZsA52HjlzHBYr65JF8P5xj+YAiCPRSb9ULkSHZlT7WSS8XhiKdylfb+Ru1IpFA3KRTi4lXxr2PExXu7kdqePMMYLL+nFunuJQH1xVfHhuwXFpvrrYbB4BIzGq31UA87yvCLeSKJ4nornYFnmXSrTqGJxjHEqpPfYn2tZsM3u7amkwKCX3ukFoh8FevRRgqSUo1oOM2d9mCe60R+ihdWMwhEZnWBwhBdycebdqNAnNfic2cNBMg4e44moLBql8uVfWvC4u5KHAGLr3QpZPV57FhaH1vcnocS88smhehqBgPl6C7Fitn3w0vuZDAkPqFiVG6GlbwEuCg2oJx9MJTkKOCmuGRBvfYCqbcCd8UthEBbOUOqVeCuuINQJI7opFYC7or3IiSG4rluwl2xibBo2RIpVIG74g7CUyyQOg24K24hRNphnVRZxi7FyzTMNBCqaocUMasYTTvq74CZvXny4sVLD2IaZCRukiLdBHYxVHw14bp34/jWtuOXIWdR1VjPMexi1dyZghaDSw9Pbw3IFi+dITWWd83JnT1UKh3y8Mrf3OClQRUnF0hArlieVuHzfOpuLr95ik+1BTmJg7RtaosTG7zXYkDTPuXpiAWbc1qLUyedyjvg2Kbz6SVIWzSJm9Li8xedSoZtRT7TkHdAJ246i7eDf2ycgIKR3kvcVBZn+EgXwWl3ByMta0+JuGksLl8YVFp8aW0gEEuKio9pkMSqx3lxEezOST7ROQRjj05+dI/M2xZLLtUKJo20D7JS/IgHNjQEJO292IwYGMi3TDXFWnGo+HQCgTlgkjedJfzC6KopRv7ej5eHzRQCtEieFCz8pnmQRklDVqp9wXk9PLlpWwjUUfJggeEPLDJy8vOQxVLJXC5paQiWdpNcO5ME3BYfxGSxF1tfMRK7Ri6ZS4Dr4lICE2XxZ7XRkmfInQjgobgNCUqD0d5LrhjwUrwfkzUmGPvcbSzsZmRxFZPCr98du13HEXLhMLwU62VMjLX1E0Yqd0hsHl6K5zA5TeEJo6qTUAxjaWenZmdpVrFo8xfMYs7CLg6TEIPAcPFRTFiCj/MYWkE6ePip7T7DhFmCYBRLJHAeQgdKxHUOYOKa/ElrrCwJLEGsmT58NFvVMHlaqmgJvmKBxqvhL2MINnUBf5sjNJZZxGT0HVAhIXiLaGESFAZjRXDEBiZAXbB4b603ET6VwajSeMcYXLn94NbWrRsWgqA0GAdpvAiDGPvx1+wbCIDaYMOUL07w3uCK1QbjJskWsztbA68sSFMcXDFli1OnndKTd+0rp4I5YsXBiJBkce66E2ozlK84H29Bmupgw5QsLr7aeTHL85mGNNXBWCb/xYMTtgDcmY0TxjzJFZ+/4IRet3D7kvPxAaQpD8Y1ueL4laEtXYE09cErJFecvDcI3mSQpj44fk6uWKv8KN60IE99MM6SXDFiVy5cf3V9424wveqDDZItjifzlWKGIRDqg7HgslhDKNQHr5JAuH8+Uh+c0cmNKMKhPhhRcqOBMIQS3HA10SmEIZTglE5iawhFKMFYI7EsZH3pj4JfjQzuj/QFvmVJzIakR48DDn78CH7ZJFSHpKe8N8BgXvwUftVJpAU57571+x++9VzgKT2xbx/6/Wfv4FOLRNKQ8vxjv/8JvaCCOXzq9z8+hz9pEjkPGdpnZwBf94IL5l47F8lnDb6cJ4EOpLx3Ip70ggzmnjhf+R7+dGi8CGS85DeRXrDBHL/RvYQvERpvHyQ84ifRCzqY45PzCH7so/EM+PeUX2tvlQS//ez35mTQWDqDb6/5Nn3TCz6Ye8O3/2t4x3QapwvfnvP7JXoqgjnw+/tzeNdVtLOe86F71+spCebe8QvGR3FE0f8wfefu3nrSCKIAjnNpXa1KRUFMizG1TWM1pq1NvPDQNk1q6otJYzKzZ5EFERBom8bL908Hojm4GY5zRibp7v/FN8JPFs7OMq49AKj5DsF+DQB6gt0qCS4JdjiQWr4LMNayGk4lElwQdg2fi+8GjA1/q4JZgfJOp4VVHRxIjsA4nDqCV3qavTZkDiQ+2O1wWpv4NsTuYCBd+u7A2OVgOHUFq+Kkp1L9Nw4kR2CsXiXWivy5tCMs6uGK0CEY14rc4bTDvIA3N9ySTQ+kwHcNxgLucFokwLot70v0pvu/OJCcgrEz5oXMTeZ5x7IC0wOpd2E8V/qn48C1/oXpg/R4w6lk9C+IsBcKTA+kG2PvFVRrenCtCsbiG95wKjNuCDf3wJ9GdUPWQOoDKLEOrLwAfcZw0l3IPD44OdmfEtFeEuAlzeF8W1O/Inwof7TT6p0Yweitnkbe4nR/WpHp9H3MRtAlAhzdzJDHV/ha+xUDB4xiFOm9CCb7FQgscyxvi77GM4y7WGamPK8kpfQ8LxflZs5gUECF4IgYwREv9uBDq87w4u2seoErXrki5UH0Q4gAC03zCjxu/nb8piRCsE4MKp0XwZKo6XfuDeS5o+FdbzwpT0QkJrigBytMIKSKA0YxgtFrBsaGz2EUPPgh5dEjwfmG7v1bDwGEtACjGFToZYBRDBDW78AVKfdF+kDKyiPBmSUvp13xd6QNGMWgQi8DjHXwgkD6UN62wXgPzwnTegC+FRjFoEKvFdgfWUjkfsph36KIGXIsmRYCNK3AKAYVeq3ATYAQP13fVY6OKod5EWmePPEwrQqBtAGjeBh6OWAsgOrIsVvwvMIbEW2ZPLU0DezBKEavPRgEHX1qWXYORjF6HYPLBLjkHoxi9LoFlwjwpnswikGFXnfgTQK86AJM5x78mgDvJBG8Q4CzSQRnCXAxieAiAV5LIniN/DIteeD0dIqokDxwIUVVSh64RIJXkwdeJcHZ5IGzJHg7eeBt9sY0e3AH4MbW22aBuRvTMG+S4C5A3RZcBzifBDjzlL251B7cxr217FoA7cnMYVqcnSS4ARC2LY/oEKDBB/PFW0ww3TnAlR34CqAmGWB78ddJghuBErf53LbyBg0O2F68wATTXQNA2KpfcLQX9VYIANeSA7YXv+WC6fwArAp8yQLbi9fYYLpGFyzqNiQXTDc7XvzcAkyT2+cBq/M2ctlgvnjRGPwfdA+8UFzZK5bZ4t24gj+lhq1zxU9y8QQv4MkiU7weT3AxZSt+Gk/wSspAXNQe0/lYgvdSBuKZLZ34QyzBH1Mm4g0d+FUswZmskXhXJ/biCDYUr+vAn2MJNhN7OvCX2ViCo+K00JRL6XofT3BE/EwnzmvBP2IK/tfeHfumDURhAP/qGtuhNkEKBBMlxRScVq3VNEmlDmGHoVOHJxGkZMmS8P/vlRdfZd3h3jngd61/2yE96T4B5+fh6f4isQ+pxNLA1Ym/QeqjrYErEy8hFfi2Bq5InEDhl7WBdyY+mkAhGFgbuJS4c0SF3hRKP+0NXEr8NS1+zxOoBcf2Bi4lRvdq8G5+/GGInTKLA4vEGoJziwMbJZ46Fgc2Snxlc2CTxIvQ5sD0JoOuG1LacAm8IaX5HTS5Pqls8yGPxokhDyk/MDq31GM8jRNjPHKX0DWjgmRQq3FiUEtuEEDTj1MSJKN4TRKjeGpD6Bo6JEiGLRskhi3VLqDtmgTpOG0jxDjtbgm0ueck57yIgekGrHMvDu3mQd+XkBTut+tGbe+pSggDb0nl8en5YbNuxObh+emRKp3BxHuy1ilMxJ/IVgmMLCKy1DXMrEKy0wqGvnO4ilefDz2c7tI2ksHcjOyToIaAwX3aag5J9Caow+0TW33Zbe7hEvWMR8TUaIxsTiW9JeqKU2IpjQHc+aUPJ6gvZvkdj2LkgssBFfwMr2LM8H/cHxfn6vAijcKzk+RmhdfisjurP7vYq4DZ83gWYN9uGXWZzi0OIGPzJjHPcBBTJm+L0RQHsmDxQE4X2JOOR8x5HbHNfFET+7xE3p/b9P6DwBEATyxq6jI5pNROumKb+aLVarVardY/ruOZ9sFFtWiJK0sY8MiQJ6pFS1xVwoBx4EhUi5a4qoSBbmTaBxfVoiVWabvlVqXfU2yP0hztz+MAAAAASUVORK5CYII="},f550:function(t,o,i){var e=i("c839");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var s=i("4f06").default;s("ed163dee",e,!0,{sourceMap:!1,shadowMode:!1})},f60d:function(t,o,i){"use strict";var e;i.d(o,"b",(function(){return s})),i.d(o,"c",(function(){return a})),i.d(o,"a",(function(){return e}));var s=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("v-uni-view",[i("v-uni-view",{staticClass:"app-list",style:{"margin-top":t.top+"rpx"}},t._l(t.list,(function(o,e){return i("v-uni-view",{key:o.id,staticClass:"app-item"},[i("v-uni-view",{staticClass:"dir-left-nowrap cross-center app-item-title"},[i("v-uni-view",{staticClass:"check-icon",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.choose(e,o)}}},[o.choose?i("v-uni-image",{style:{"background-color":t.theme.background,opacity:1==o.type?"0.3":"1"},attrs:{src:"/static/image/icon/icon-checkbox-checked.png"}}):i("v-uni-image",{attrs:{src:"/static/image/icon/icon-uncheck.png"}})],1),i("v-uni-view",{staticClass:"item-type",style:{color:t.theme.color}},[t._v(t._s(o.type_text))]),i("v-uni-view",{staticClass:"item-name"},[t._v(t._s(o.name))])],1),t._l(o.host_list,(function(s){return i("v-uni-view",{key:s.id,staticClass:"item-goods dir-left-nowrap"},[i("v-uni-view",{staticClass:"check-icon"},[i("v-uni-image",{style:{"background-color":t.theme.background,opacity:""+s.opacity},attrs:{src:"/static/image/icon/icon-checkbox-checked.png"}})],1),i("v-uni-image",{staticClass:"goods-img",attrs:{src:s.cover_pic},on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.toDetail(s.goods_id)}}}),0==s.stock||0==o.stock?i("v-uni-view",{staticClass:"out-dialog"},[i("v-uni-image",{attrs:{src:"1"==t.appSetting.is_use_stock?t.appImg.plugins_out:t.appSetting.sell_out_pic}})],1):t._e(),i("v-uni-view",{staticClass:"dir-top-nowrap goods-info"},[i("v-uni-view",{staticClass:"item-good-name"},[t._v(t._s(s.name))]),i("v-uni-view",{staticClass:"item-good-num"},[t._v("x1")]),s.choose_attr?i("v-uni-view",{staticClass:"item-good-attr",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.chooseAttr(s,e)}}},[i("v-uni-view",{staticClass:"item-good-attr-text t-omit-two"},t._l(s.choose_attr.attr_list,(function(o){return i("v-uni-text",{key:o.attr_id},[t._v(t._s(o.attr_group_name)+":"+t._s(o.attr_name))])})),1),i("v-uni-image",{staticClass:"item-good-attr-arrow",attrs:{src:"/static/image/icon/bottom.png"}})],1):i("v-uni-view",{staticClass:"item-good-attr",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.chooseAttr(s,e)}}},[i("v-uni-view",{staticClass:"item-good-attr-text t-omit-two"},[t._v("未选择")]),i("v-uni-image",{staticClass:"item-good-attr-arrow",attrs:{src:"/static/image/icon/bottom.png"}})],1),2==o.type&&s.choose_attr?i("v-uni-view",{staticClass:"choose_price",style:{color:t.theme.color}},[t._v("￥"+t._s(s.total_price))]):t._e()],1)],1)})),t._l(o.goods_list,(function(s,a){return i("v-uni-view",{key:s.id,staticClass:"item-goods dir-left-nowrap"},[2==o.type?i("v-uni-view",{staticClass:"check-icon",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.chooseGoods(a,e,s)}}},[s.choose_goods?i("v-uni-image",{style:{"background-color":t.theme.background},attrs:{src:"/static/image/icon/icon-checkbox-checked.png"}}):i("v-uni-image",{attrs:{src:"/static/image/icon/icon-uncheck.png"}})],1):t._e(),i("v-uni-image",{staticClass:"goods-img",attrs:{src:s.cover_pic},on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.toDetail(s.goods_id)}}}),0==s.stock||0==o.stock?i("v-uni-view",{staticClass:"out-dialog"},[i("v-uni-image",{attrs:{src:"1"==t.appSetting.is_use_stock?t.appImg.plugins_out:t.appSetting.sell_out_pic}})],1):t._e(),i("v-uni-view",{staticClass:"dir-top-nowrap goods-info"},[i("v-uni-view",{staticClass:"item-good-name"},[t._v(t._s(s.name))]),i("v-uni-view",{staticClass:"item-good-num"},[t._v("x1")]),s.choose_attr?i("v-uni-view",{staticClass:"item-good-attr",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.chooseAttr(s,e)}}},[i("v-uni-view",{staticClass:"item-good-attr-text t-omit-two"},t._l(s.choose_attr.attr_list,(function(o,e){return i("v-uni-text",{key:o.attr_id},[e>0?i("v-uni-text",[t._v(",")]):t._e(),i("v-uni-text",[t._v(t._s(o.attr_group_name)+":"+t._s(o.attr_name))])],1)})),1),i("v-uni-image",{staticClass:"item-good-attr-arrow",attrs:{src:"/static/image/icon/bottom.png"}})],1):i("v-uni-view",{staticClass:"item-good-attr",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.chooseAttr(s,e)}}},[i("v-uni-view",{staticClass:"item-good-attr-text t-omit-two"},[t._v("未选择")]),i("v-uni-image",{staticClass:"item-good-attr-arrow",attrs:{src:"/static/image/icon/bottom.png"}})],1),2==o.type&&s.choose_attr?i("v-uni-view",{staticClass:"choose_price",style:{color:t.theme.color}},[t._v("￥"+t._s(s.total_price))]):t._e()],1)],1)})),i("v-uni-view",{staticClass:"app-price"},[o.total_price&&t.hidden?[i("v-uni-text",[t._v("套餐价")]),i("v-uni-text",{style:{color:t.theme.color}},[t._v("￥"+t._s(o.total_price>-.01?o.total_price:"0.00"))])]:t._e()],2)],2)})),1),t.goods?i("u-attr",{attrs:{goods:t.goods,rightText:"确定",is_show_left:t.cartShow,is_choose_number:t.cartShow,theme:t.theme,checked:t.checked,again:t.attrShow,"right-func":!0},on:{check:function(o){arguments[0]=o=t.$handleEvent(o),t.check.apply(void 0,arguments)},rightFunc:function(o){arguments[0]=o=t.$handleEvent(o),t.buyClick.apply(void 0,arguments)}},model:{value:t.attrShow,callback:function(o){t.attrShow=o},expression:"attrShow"}}):t._e()],1)},a=[]},f8bd:function(t,o,i){"use strict";var e=i("4ea4");i("8e6e"),i("456d"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,i("386d"),i("ac6a");var s=e(i("bd86"));i("c5f6");var a=i("2f62"),n=e(i("b4bc"));function c(t,o){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);o&&(e=e.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),i.push.apply(i,e)}return i}function r(t){for(var o=1;o<arguments.length;o++){var i=null!=arguments[o]?arguments[o]:{};o%2?c(Object(i),!0).forEach((function(o){(0,s.default)(t,o,i[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(i,o))}))}return t}var l={name:"app-index",props:{list:{type:Array},top:{type:Number,default:function(){return 388}},search:{type:Boolean,default:function(){return!1}},allCount:{type:Boolean,default:function(){return!1}},hidden:{type:Boolean,default:function(){return!0}},theme:Object},data:function(){return{attrShow:0,goods:null,cartShow:!1,buyBool:!0,max_discount:"0.00",noAttrList:[],checked:null,total:0}},computed:r({},(0,a.mapState)({appImg:function(t){return t.mallConfig.__wxapp_img.mall},appSetting:function(t){return t.mallConfig.mall.setting}})),components:{"u-attr":n.default},methods:{check:function(t){var o=t.item;this.checked=o},toDetail:function(t){uni.navigateTo({url:"/pages/goods/goods?id="+t})},buyClick:function(){var t=this,o=this.checked;t.list[t.index].goods_list.forEach((function(i){if(i.id==t.goods.id){for(var e in i.choose_attr=o,i.detail.selectAttr=o,o.attr_list)for(var s in i.attr_groups)if(i.attr_groups[s].attr_group_id==o.attr_list[e].attr_group_id)for(var a in i.attr_groups[s].attr_list)i.attr_groups[s].attr_list[a].checked=!1,i.attr_groups[s].attr_list[a].attr_id==o.attr_list[e].attr_id&&i.attr_groups[s].attr_list[a].attr_name==o.attr_list[e].attr_name&&(i.attr_groups[s].attr_list[a].checked=!0);2==t.list[t.index].type&&(i.choose_goods=!0,t.list[t.index].host_list[0].choose_goods=!0,t.list[t.index].host_list[0].opacity=.3),t.count(),t.$forceUpdate()}})),t.list[t.index].host_list.forEach((function(i){if(i.id==t.goods.id){for(var e in o.attr_list)for(var s in i.attr_groups)if(i.attr_groups[s].attr_group_id==o.attr_list[e].attr_group_id)for(var a in i.attr_groups[s].attr_list)i.attr_groups[s].attr_list[a].checked=!1,i.attr_groups[s].attr_list[a].attr_id==o.attr_list[e].attr_id&&i.attr_groups[s].attr_list[a].attr_name==o.attr_list[e].attr_name&&(i.attr_groups[s].attr_list[a].checked=!0);if(i.choose_attr=o,i.detail.selectAttr=o,i.choose_goods=!0,t.count(),t.$forceUpdate(),t.search)return t.$emit("search",i,1),!1}})),t.goods=null,t.checked=null},chooseAttr:function(t,o,i){console.log(t),this.goods=t,this.index=o,this.attrShow=Math.random()},choose:function(t,o){if(2==this.list[t].type){for(var i in this.list[t].choose=!this.list[t].choose,this.list[t].goods_list)this.list[t].goods_list[i].choose_goods=this.list[t].choose;this.count(),this.$forceUpdate(),this.search&&this.$emit("search",o)}},chooseGoods:function(t,o,i){this.list[o].goods_list[t].choose_goods=!this.list[o].goods_list[t].choose_goods;var e=!0;for(var s in this.list[o].goods_list)this.list[o].goods_list[s].choose_goods||(e=!1);this.list[o].choose=e,this.$forceUpdate(),this.$emit("updateList",this.list),this.count(),this.search&&this.$emit("search",i,1)},count:function(){var t=this;t.total=0,t.noAttrList=[],t.max_discount=0;var o=0;if(1==t.list[o].type){t.list[o].total_price=0;var i=!0;for(var e in t.list[o].goods_list)t.list[o].goods_list[e].choose_attr?t.list[o].goods_list[e].choose_attr.price>0&&(t.list[o].total_price+=+t.list[o].goods_list[e].choose_attr.price):i=!1,t.list[o].choose&&null==t.list[o].goods_list[e].choose_attr&&t.noAttrList.push(t.list[o].goods_list[e]);t.list[o].total_price<0&&(t.list[o].total_price=0),t.list[o].total_price=+t.list[o].total_price-+t.list[o].price,t.list[o].total_price<0&&(t.list[o].total_price=0),t.list[o].choose?t.list[o].total_price=t.list[o].total_price.toFixed(2):delete t.list[o].total_price,t.list[o].choose&&i&&(t.total+=+t.list[o].total_price)}else if(2==t.list[o].type){for(var s in t.list[o].total_price=0,t.list[o].host_list[0].choose_attr?(t.list[o].total_price=+t.list[o].host_list[0].choose_attr.price-+t.list[o].host_list[0].price,t.list[o].host_list[0].total_price=+t.list[o].host_list[0].choose_attr.price-+t.list[o].host_list[0].price,t.max_discount+=+t.list[o].host_list[0].price,t.list[o].host_list[0].total_price<0?t.list[o].host_list[0].total_price=0:t.list[o].host_list[0].total_price=+t.list[o].host_list[0].total_price.toFixed(2),t.total+=+t.list[o].host_list[0].total_price):t.noAttrList.push(t.list[o].host_list[0]),t.list[o].goods_list)t.list[o].goods_list[s].choose_goods&&t.list[o].goods_list[s].choose_attr&&(t.list[o].goods_list[s].total_price=+t.list[o].goods_list[s].choose_attr.price-+t.list[o].goods_list[s].price,t.max_discount+=+t.list[o].goods_list[s].price,t.list[o].goods_list[s].total_price<0?t.list[o].goods_list[s].total_price=0:t.list[o].goods_list[s].total_price=+t.list[o].goods_list[s].total_price.toFixed(2),t.total+=+t.list[o].goods_list[s].total_price,t.list[o].total_price>0&&(t.list[o].total_price+=+t.list[o].goods_list[s].total_price)),t.list[o].goods_list[s].choose_goods&&null==t.list[o].goods_list[s].choose_attr&&t.noAttrList.push(t.list[o].goods_list[s]);t.list[o].total_price<0&&(t.list[o].total_price=0),t.list[o].total_price=+t.list[o].total_price.toFixed(2),t.max_discount=+t.max_discount.toFixed(2)}t.total=t.total.toFixed(2),t.$emit("updateList",t.list),t.$emit("change",{total:t.total,max_discount:t.max_discount}),t.$emit("update",t.noAttrList)}},mounted:function(){var t=this,o=setInterval((function(){t.list.length>0&&(clearInterval(o),t.count())}),500)}};o.default=l}}]);