(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-share-add-add"],{1351:function(t,a,e){"use strict";var n=e("4ea4");e("ac4d"),e("8a81"),e("5df3"),e("1c4c"),e("6b54"),e("87b3"),e("8e6e"),e("ac6a"),e("456d"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=n(e("7618"));e("7f7f");var o=n(e("bd86")),d=e("2f62"),r=n(e("7d93"));function s(t,a){var e="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=c(t))||a&&t&&"number"===typeof t.length){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,d=!0,r=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return d=t.done,t},e:function(t){r=!0,o=t},f:function(){try{d||null==e.return||e.return()}finally{if(r)throw o}}}}function c(t,a){if(t){if("string"===typeof t)return l(t,a);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(t,a):void 0}}function l(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=t[e];return n}function u(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,n)}return e}function f(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?u(Object(e),!0).forEach((function(a){(0,o.default)(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):u(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}var p={data:function(){return{status:null,mallName:"",name:"",phone:"",parent_name:"",height:0,form:{},template_message:[],read:!1,protocol:!1}},computed:f({},(0,d.mapState)({mall:function(t){return t.mallConfig.mall},custom_setting:function(t){return t.mallConfig.share_setting_custom},is_show_parent_name:function(t){return t.mallConfig.mall.setting.is_show_parent_name},share_setting:function(t){return t.mallConfig.share_setting}})),components:{AppDiyForm:r.default},methods:{handleFormInput:function(t){var a=t.data,e=[];for(var n in a)e[n]={key:a[n].key,label:a[n].name,value:a[n].value,required:a[n].is_required};this.form=e},toRead:function(){this.read=!this.read},imageLoad:function(t){var a=t.detail.width,e=t.detail.height;this.height=e*(702/a)},subscribe:function(){var t=this,a=this,e=0;if(this.form.length>0){var n,i=s(this.form);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(1==o.required){if(!o.value)return uni.showToast({title:"请填写"+o.label,icon:"none",duration:1e3}),!1;if("img_upload"==o.key&&Array.isArray(o.value)){var d,r=s(o.value);try{for(r.s();!(d=r.n()).done;){var c=d.value;if(!c)return uni.showToast({title:"请填写"+o.label,icon:"none",duration:1e3}),!1}}catch(l){r.e(l)}finally{r.f()}}}}}catch(l){i.e(l)}finally{i.f()}}1==this.read?(e=1,a.name?a.phone?/0?(1)[0-9]{10}/.test(a.phone)?this.$subscribe(this.template_message).then((function(a){t.submit(e)})).catch((function(a){t.submit(e)})):uni.showToast({title:"请输入正确的手机号码",icon:"none",duration:1e3}):uni.showToast({title:"请输入手机号码",icon:"none",duration:1e3}):uni.showToast({title:"请输入真实姓名",icon:"none",duration:1e3})):uni.showToast({title:"请先查看分销协议并同意",icon:"none",duration:1e3})},submit:function(t){var a=this;uni.showLoading({title:"提交中..."});var e={name:a.name,mobile:a.phone,agree:t};1==a.share_setting.form_status&&(e.form=JSON.stringify(a.form)),a.$request({url:a.$api.share.apply,data:e,method:"post"}).then((function(t){a.$store.dispatch("mallConfig/actionResetConfig"),a.$hideLoading(),0==t.code?(uni.showToast({title:t.msg,duration:1e3}),setTimeout((function(){uni.navigateBack({delta:1})}),500)):0==a.share_setting.form_status&&"请填写表单"==t.msg?uni.showToast({title:"申请条件有所变化，请重新填写",icon:"none",duration:1e3}):uni.showToast({title:t.msg,icon:"none",duration:1e3})})).catch((function(t){a.$hideLoading(),uni.showToast({title:response,icon:"none",duration:1e3})}))},handleFontSize:function(){WeixinJSBridge.invoke("setFontSizeCallback",{fontSize:0}),WeixinJSBridge.on("menu:setfont",(function(){WeixinJSBridge.invoke("setFontSizeCallback",{fontSize:0})}))},reSetting:function(){"object"==("undefined"===typeof WeixinJSBridge?"undefined":(0,i.default)(WeixinJSBridge))&&"function"==typeof WeixinJSBridge.invoke?this.handleFontSize():document.addEventListener?document.addEventListener("WeixinJSBridgeReady",handleFontSize,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",handleFontSize),document.attachEvent("onWeixinJSBridgeReady",handleFontSize))}},onLoad:function(t){var a=this;this.$commonLoad.onload(t);var e=this;this.$showLoading({type:"global",text:"加载中..."}),null!=t.template_message&&(e.template_message=JSON.parse(t.template_message)),uni.setNavigationBarTitle({title:this.custom_setting.apply.share_apply.name?this.custom_setting.apply.share_apply.name:this.custom_setting.apply.share_apply.default}),this.$request({url:this.$api.user.user_info}).then((function(t){a.$hideLoading(),0===t.code&&(a.parent_name=t.data.identity.parent_name)})),this.$jwx.isWechat()&&this.reSetting()},onShow:function(){this.$store.dispatch("mallConfig/actionResetConfig")}};a.default=p},"18a9":function(t,a,e){var n=e("ff99");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=e("4f06").default;i("84da2e6a",n,!0,{sourceMap:!1,shadowMode:!1})},"23fe":function(t,a,e){"use strict";var n=e("18a9"),i=e.n(n);i.a},"3bfe":function(t,a,e){"use strict";var n;e.d(a,"b",(function(){return i})),e.d(a,"c",(function(){return o})),e.d(a,"a",(function(){return n}));var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("app-layout",[e("v-uni-view",{staticClass:"body"},[e("v-uni-image",{staticClass:"add-bg",attrs:{src:t.custom_setting.apply.apply_head_pic}}),e("v-uni-view",{staticClass:"add-form"},[e("v-uni-view",{staticClass:"add-default"},[e("v-uni-view",{staticClass:"add-info share-name dir-left-nowrap"},[e("v-uni-view",[t._v("欢迎加入")]),e("v-uni-view",{staticClass:"mall-name t-omit"},[t._v(t._s(t.mall.name))]),e("v-uni-view",[t._v("，请填写申请信息")])],1),t.is_show_parent_name?e("v-uni-view",{staticClass:"add-info"},[e("v-uni-view",{staticClass:"add-label"},[t._v("邀请人")]),e("v-uni-view",{staticClass:"share-user"},[e("v-uni-text",[t._v(t._s(t.parent_name))]),t._v("(请核对)")],1)],1):t._e(),e("v-uni-view",{staticClass:"add-info"},[e("v-uni-view",{staticClass:"add-label"},[e("v-uni-text",{staticStyle:{color:"#ff4544"}},[t._v("*")]),t._v("姓名")],1),e("v-uni-view",{staticClass:"add-input"},[e("v-uni-input",{attrs:{placeholder:"请填写真实姓名","placeholder-style":"color: #cdcdcd"},model:{value:t.name,callback:function(a){t.name=a},expression:"name"}})],1)],1),e("v-uni-view",{staticClass:"add-info"},[e("v-uni-view",{staticClass:"add-label"},[e("v-uni-text",{staticStyle:{color:"#ff4544"}},[t._v("*")]),t._v("手机号码")],1),e("v-uni-view",{staticClass:"add-input"},[e("v-uni-input",{attrs:{type:"number",placeholder:"请填写手机号码","placeholder-style":"color: #cdcdcd"},model:{value:t.phone,callback:function(a){t.phone=a},expression:"phone"}})],1)],1)],1),1==t.share_setting.form_status?e("v-uni-view",{staticClass:"add-default add-diy-form"},[e("app-diy-form",{attrs:{datePadding:0,itemHeight:66,showRequiredIcon:!0,labelPosition:"top",list:t.share_setting.form,labelFs28:!0},on:{input:function(a){arguments[0]=a=t.$handleEvent(a),t.handleFormInput.apply(void 0,arguments)}}})],1):t._e(),e("v-uni-view",{staticClass:"add-default add-diy-form"},[e("v-uni-view",{staticClass:"add-info",staticStyle:{"font-size":"13px"}},[e("v-uni-view",{staticClass:"read",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.toRead.apply(void 0,arguments)}}},[0==t.read?e("v-uni-image",{attrs:{src:"/static/image/icon/icon-uncheck.png"}}):e("v-uni-image",{class:["red-background"],attrs:{src:"/static/image/icon/icon-checkbox-checked.png"}})],1),t._v("我已经阅读并了解"),e("v-uni-text",{staticStyle:{color:"#014c8c"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.protocol=!0}}},[t._v("【"+t._s(t.custom_setting.apply.share_apply_pact.name?t.custom_setting.apply.share_apply_pact.name:t.custom_setting.apply.share_apply_pact.default)+"】")])],1)],1),e("v-uni-view",{staticClass:"submit"},[e("v-uni-view",{on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.subscribe.apply(void 0,arguments)}}},[e("v-uni-button",{style:{"background-color":""+t.custom_setting.apply.apply_btn_background,"border-radius":""+t.custom_setting.apply.apply_btn_round,color:""+t.custom_setting.apply.apply_btn_color}},[t._v(t._s(t.custom_setting.apply.apply_btn_title?t.custom_setting.apply.apply_btn_title:"申请成为分销商"))])],1)],1)],1),e("v-uni-view",{staticClass:"other"},[e("v-uni-image",{staticClass:"end-img",style:{height:t.height+"rpx"},attrs:{src:t.custom_setting.apply.apply_end_pic},on:{load:function(a){arguments[0]=a=t.$handleEvent(a),t.imageLoad.apply(void 0,arguments)}}})],1),t.protocol?e("v-uni-view",{staticClass:"modal"},[e("v-uni-view",{staticClass:"protocol"},[e("v-uni-view",{staticClass:"protocol-name"},[t._v(t._s(t.custom_setting.apply.share_apply_pact.name?t.custom_setting.apply.share_apply_pact.name:t.custom_setting.apply.share_apply_pact.default))]),e("v-uni-view",{staticClass:"protocol-content"},[e("v-uni-text",[t._v(t._s(t.share_setting.agree))])],1),e("v-uni-view",{on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.protocol=!1,t.read=!0}}},[e("v-uni-view",{staticClass:"read-over"},[t._v("我已阅读")])],1)],1)],1):t._e()],1)],1)},o=[]},"854e":function(t,a,e){"use strict";e.r(a);var n=e("3bfe"),i=e("b711");for(var o in i)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(o);e("23fe");var d,r=e("f0c5"),s=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"530c4d49",null,!1,n["a"],d);a["default"]=s.exports},b711:function(t,a,e){"use strict";e.r(a);var n=e("1351"),i=e.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(o);a["default"]=i.a},ff99:function(t,a,e){a=t.exports=e("24fb")(!1),a.push([t.i,".text-center[data-v-530c4d49]{text-align:center}.font-weight[data-v-530c4d49]{font-weight:700}.page-width[data-v-530c4d49]{width:100%}.goods-hover-class[data-v-530c4d49]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-530c4d49]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-530c4d49]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-530c4d49]{width:100%}.u-hover-class[data-v-530c4d49]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-530c4d49]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.body[data-v-530c4d49]{-webkit-text-size-adjust:100%!important;-ms-text-size-adjust:100%!important;text-size-adjust:100%!important;-moz-text-size-adjust:100%!important}.add-bg[data-v-530c4d49]{height:%?300?%;width:100%;display:block;margin-bottom:%?20?%;background-color:#f7f7f7}.add-form[data-v-530c4d49]{padding:0 %?24?%;font-size:%?30?%;color:#353535}.add-form .add-default[data-v-530c4d49]{background-color:#fff;border-radius:%?16?%;padding:0 %?10?% %?35?%;margin-bottom:%?20?%}.add-form .add-default.add-diy-form[data-v-530c4d49]{padding-bottom:0;padding:%?10?% %?24?%}.add-form .add-default.add-diy-form .add-info[data-v-530c4d49]{border-bottom:0;padding:%?24?% 0}.add-form .add-default .add-info[data-v-530c4d49]{width:100%;padding:%?10?% %?24?%;border-bottom:%?1?% solid #e2e2e2}.add-form .add-default .add-info .red-background[data-v-530c4d49]{background-color:#ff4544}.add-form .add-default .add-info .add-label[data-v-530c4d49]{height:%?45?%;line-height:%?45?%;font-size:%?28?%}.add-form .add-default .add-info .add-input[data-v-530c4d49]{height:%?75?%}.add-form .add-default .add-info .add-input uni-input[data-v-530c4d49]{height:%?65?%;padding-top:%?5?%}.add-form .add-default .add-info.share-name[data-v-530c4d49]{height:%?90?%;line-height:%?90?%;padding:0 %?10?%}.add-form .add-default .add-info.share-name .mall-name[data-v-530c4d49]{max-width:%?300?%;color:#ff4544}.add-form .add-default .add-info .share-user[data-v-530c4d49]{color:#666;height:%?75?%;line-height:%?75?%}.add-form .add-default .add-info .share-user>uni-text[data-v-530c4d49]{color:#ff4544}.add-form .add-default .add-info .read[data-v-530c4d49]{width:%?32?%;height:%?32?%;float:left;margin-right:%?10?%}.add-form .add-default .add-info .read uni-image[data-v-530c4d49]{height:100%;width:100%;display:block}.submit[data-v-530c4d49]{background-color:#f7f7f7;margin:0 %?-24?%;padding:%?24?%}.submit uni-button[data-v-530c4d49]{color:#fff;font-size:%?30?%;font-weight:700;height:%?80?%;border-radius:%?40?%;line-height:%?80?%}.other[data-v-530c4d49]{background-color:#fff;padding:0 %?24?%;color:#353535;font-size:%?30?%}.other .end-img[data-v-530c4d49]{width:100%}.modal[data-v-530c4d49]{position:fixed;top:0;left:0;right:0;height:100%;width:100%;z-index:99;background-color:rgba(0,0,0,.3)}.modal .protocol[data-v-530c4d49]{position:relative;z-index:99;background-color:#fff;width:80%;border-radius:%?20?%;margin:%?100?% auto}.modal .protocol .protocol-name[data-v-530c4d49]{height:%?100?%;text-align:center;line-height:%?100?%;color:#666}.modal .protocol .protocol-content[data-v-530c4d49]{padding:%?10?% %?20?%;height:%?720?%;overflow:auto;color:#353535}.modal .protocol .read-over[data-v-530c4d49]{text-align:center;height:%?100?%;line-height:%?100?%;background-color:#ff4544;color:#fff;font-size:%?30?%;border-bottom-right-radius:%?20?%;border-bottom-left-radius:%?20?%}body.?%PAGE?%[data-v-530c4d49]{background:#f7f7f7}",""])}}]);