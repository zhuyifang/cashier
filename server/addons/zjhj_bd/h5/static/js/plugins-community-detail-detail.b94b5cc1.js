(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["plugins-community-detail-detail"],{2015:function(t,i,e){i=t.exports=e("24fb")(!1),i.push([t.i,".text-center[data-v-3c0eebdf]{text-align:center}.font-weight[data-v-3c0eebdf]{font-weight:700}.page-width[data-v-3c0eebdf]{width:100%}.goods-hover-class[data-v-3c0eebdf]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-3c0eebdf]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-3c0eebdf]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-3c0eebdf]{width:100%}.u-hover-class[data-v-3c0eebdf]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-3c0eebdf]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.status[data-v-3c0eebdf]{height:%?96?%;line-height:%?96?%;background-color:#fff;padding:0 %?24?%;font-size:%?24?%}.status.start[data-v-3c0eebdf]{height:%?140?%;padding-top:%?30?%}.status .status-up[data-v-3c0eebdf],.status .status-down[data-v-3c0eebdf]{height:%?50?%;line-height:%?50?%;font-size:%?24?%;width:100%}.status .status-up uni-view[data-v-3c0eebdf],.status .status-down uni-view[data-v-3c0eebdf]{height:%?50?%;line-height:%?50?%}.status .status-up .progress[data-v-3c0eebdf],.status .status-down .progress[data-v-3c0eebdf]{width:%?430?%;background-color:#f0f0f0;border-radius:%?10?%;height:%?20?%;position:relative;overflow:hidden}.status .status-up .progress uni-view[data-v-3c0eebdf],.status .status-down .progress uni-view[data-v-3c0eebdf]{border-radius:%?10?%;height:%?20?%;position:absolute;top:0;left:0;z-index:2}.status .status-up .condition[data-v-3c0eebdf],.status .status-down .condition[data-v-3c0eebdf]{font-size:%?28?%;color:#353535}.status .status-up .status[data-v-3c0eebdf],.status .status-down .status[data-v-3c0eebdf]{font-size:%?26?%;color:#ff4544;padding-right:0}.goods-list[data-v-3c0eebdf]{padding:0 %?24?%}.goods-list .item[data-v-3c0eebdf]{height:%?220?%;width:%?702?%;margin-top:%?20?%;background-color:#fff;border-radius:%?16?%;position:relative}.goods-list .item .goods-switch[data-v-3c0eebdf]{position:absolute;right:%?24?%;bottom:%?24?%;-webkit-transform:scale(.7);-ms-transform:scale(.7);transform:scale(.7)}.goods-list .item .goods-cover[data-v-3c0eebdf]{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:%?220?%;height:%?220?%;border-radius:%?16?%;margin-right:%?20?%;position:relative}.goods-list .item .goods-cover .out-dialog[data-v-3c0eebdf]{width:%?220?%;height:%?220?%;border-radius:%?16?%;position:absolute;top:0;left:0;z-index:10;background-color:rgba(0,0,0,.5)}.goods-list .item .goods-cover .out-dialog uni-image[data-v-3c0eebdf]{width:%?220?%;height:%?220?%;border-radius:%?16?%}.goods-list .item .goods-cover uni-image[data-v-3c0eebdf]{width:100%;height:100%;border-radius:%?16?%}.goods-list .item .goods-info[data-v-3c0eebdf]{padding-top:%?20?%;font-size:%?20?%;color:#666}.goods-list .item .goods-info .goods-name[data-v-3c0eebdf]{font-size:%?28?%;width:%?440?%;color:#353535}.goods-list .item .goods-info .goods-profit[data-v-3c0eebdf]{display:inline-block;padding:0 %?4?%;border:%?2?% solid;border-radius:%?8?%;margin:%?12?% 0 %?8?%;font-size:%?22?%;height:%?30?%;line-height:%?28?%}.goods-list .item .goods-info .goods-price[data-v-3c0eebdf]{font-size:%?32?%}.u-bottom-height[data-v-3c0eebdf]{height:%?130?%}.bottom-menu[data-v-3c0eebdf]{width:100%;height:%?110?%;font-size:%?20?%}.bottom-menu .menu-btn-area[data-v-3c0eebdf]{width:50%;height:%?110?%}.bottom-menu .menu-btn-area .menu-btn[data-v-3c0eebdf]{height:%?110?%;color:#999;border-right:%?2?% solid #e2e2e2;width:25%}.bottom-menu .menu-btn-area .menu-btn[data-v-3c0eebdf]:last-of-type{border-right:0}.bottom-menu .menu-btn-area .menu-btn uni-image[data-v-3c0eebdf]{width:%?40?%;height:%?40?%;margin-bottom:%?5?%}.bottom-menu .status-btn[data-v-3c0eebdf]{width:50%;height:%?110?%;text-align:center;line-height:%?110?%}.bottom-menu .status-btn .lose[data-v-3c0eebdf]{width:100%;height:100%;background-color:#999;color:#fff;font-size:%?28?%}.bottom-menu .status-btn .share[data-v-3c0eebdf]{width:100%;height:100%;line-height:%?110?%;color:#fff;border-radius:0;font-size:%?28?%}.u-bottom-fixed[data-v-3c0eebdf]{position:fixed;bottom:0;left:0;width:100%;z-index:1500;background-color:#fff}body.?%PAGE?%[data-v-3c0eebdf]{background:#f7f7f7}",""])},"2a3f":function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAS1BMVEUAAACZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZkI0+mmAAAAGHRSTlMAIcPw2g9Lxwp7jOW4PxidMfeydtJUr2AwarmqAAABGklEQVQ4y8XU2a6DIBSFYZBRBotTu97/SY+cpAEE1Lv+V5h82REMkjxqnBrq3KpJkZzRidNiHvrZfOYCKE8bSQuMyWmGWZBmHhjSk2DgpN0EqEeQXkwU+yc8ggFYaqiFECdIgdcZhrdl7DB3UOK/WzhFxbk6QQ2YEhpA0XwzQh75D+B8XIUvVEB0CXoUuQxOV1B94XCeOI1HqznIGld7DTubqWB94D+CAXCP4GTMfgNTfbhdXIUENQPrwFBAooCXaDmqAJNBCYDxRjiaMkhGdJMkh0Q6yxrZdyA5jGmRFY8ipglJsJmOJHYDt9mKR9ACCaarUMfBMugA33ZiBstecgSspI38Biz5zhj6lb9ufvE9ivS6DHXKmWLeH9QSJ7ahjcb8AAAAAElFTkSuQmCC"},"3fc0":function(t,i,e){"use strict";var a=e("c795"),o=e.n(a);o.a},"4d92a":function(t,i,e){"use strict";e.r(i);var a=e("b480"),o=e.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(s);i["default"]=o.a},"6e2c":function(t,i,e){"use strict";var a;e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return a}));var o=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("app-layout",[1==t.activity.activity_status?a("v-uni-view",{staticClass:"status",class:t.activity.condition>0?"start":"cross-center"},[a("v-uni-view",{staticClass:"main-between cross-center status-up"},[0==t.activity.condition?a("v-uni-view",{staticStyle:{color:"#999"}},[t._v(t._s(t.activity.user_num)+"人已抢"+t._s(t.activity.all_sales)+"件")]):a("v-uni-view",{staticClass:"condition"},[t.activity.num-t.activity.condition_count>0?a("v-uni-text",[t._v("还差"+t._s(t.activity.num-t.activity.condition_count)+t._s(1===t.activity.condition?"人":"件"))]):t._e(),t._v("拼团成功")],1),a("v-uni-view",{staticClass:"status"},[t._v(t._s(t.status_text))])],1),t.activity.condition>0?a("v-uni-view",{staticClass:"main-between cross-center status-down"},[a("v-uni-view",{staticClass:"progress"},[a("v-uni-view",{style:{width:t.activity.rate+"%",backgroundImage:"url("+t.bonusImg.progress+")"}})],1),a("v-uni-view",{staticStyle:{color:"#999"}},[t._v(t._s(t.activity.condition_count?t.activity.user_num:0)+"人已抢"+t._s(t.activity.all_sales)+"件")])],1):t._e()],1):a("v-uni-view",{staticClass:"status"},[2==t.activity.activity_status?a("v-uni-text",[t._v("本次活动已结束")]):t._e(),0==t.activity.activity_status?a("v-uni-text",[t._v("距离本次活动开始还有"+t._s(t.d>0?t.d+"天":"")+t._s(t.h>0?t.h+"时":"")+t._s(t.m>0?t.m+"分":""))]):t._e()],1),a("v-uni-view",{staticClass:"goods-list"},t._l(t.list,(function(i){return a("v-uni-view",{key:i.id,staticClass:"dir-left-nowrap item"},[a("v-uni-view",{staticClass:"goods-cover"},[0==i.goods_stock?a("v-uni-view",{staticClass:"out-dialog"},[a("v-uni-image",{attrs:{src:"1"==t.appSetting.is_use_stock?t.appImg.plugins_out:t.appSetting.sell_out_pic}})],1):t._e(),a("v-uni-image",{attrs:{src:i.cover_pic}})],1),t.activity.activity_status<2?a("v-uni-view",{staticClass:"goods-switch",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.switchGood(i)}}},[a("v-uni-switch",{attrs:{color:t.getTheme.color,checked:1==i.switch}})],1):t._e(),a("v-uni-view",{staticClass:"goods-info"},[a("v-uni-view",{staticClass:"goods-name t-omit"},[t._v(t._s(i.name))]),a("v-uni-view",{staticClass:"goods-profit",style:{color:t.getTheme.color,"border-color":t.getTheme.border}},[t._v("预计利润"),1===i.use_attr?a("v-uni-text",[t._v("￥"+t._s(i.profit_price.min_price)+"-"+t._s(i.profit_price.max_price))]):a("v-uni-text",[t._v("￥"+t._s(i.profit_price))])],1),a("v-uni-view",[t._v("库存:"+t._s(i.goods_stock)+t._s(i.goodsWarehouse.unit))]),a("v-uni-view",{style:{color:0==t.activity.activity_status?"#ffffff":"#666"}},[t._v(t._s(i.sales))]),a("v-uni-view",{staticClass:"goods-price",style:{color:t.getTheme.color}},[t._v("￥"+t._s(i.min_price))])],1)],1)})),1),a("v-uni-view",{staticClass:"safe-area-inset-bottom"},[a("v-uni-view",{staticClass:"u-bottom-height"})],1),a("v-uni-view",{staticClass:"safe-area-inset-bottom u-bottom-fixed"},[a("v-uni-view",{staticClass:"bottom-menu dir-left-nowrap"},[a("v-uni-view",{staticClass:"menu-btn-area dir-left-nowrap"},[a("v-uni-view",{staticClass:"menu-btn box-grow-1 dir-top-nowrap main-center cross-center",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toOrder.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:e("ed3e7")}}),a("v-uni-view",[t._v("团购订单")])],1),a("v-uni-view",{staticClass:"menu-btn box-grow-1 dir-top-nowrap main-center cross-center",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toRecord.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:e("a77d")}}),a("v-uni-view",[t._v("数据")])],1),t.activity.activity_status>0?a("v-uni-view",{staticClass:"menu-btn box-grow-1 dir-top-nowrap main-center cross-center",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.copy.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:e("2a3f")}}),a("v-uni-view",[t._v("复制接龙")])],1):t._e()],1),a("v-uni-view",{staticClass:"status-btn"},[2==t.activity.activity_status&&1==t.activity.is_success||1==t.activity.activity_status||0==t.activity.activity_status?a("v-uni-button",{staticClass:"share",style:{"background-color":t.getTheme.background},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.showShare=!0}}},[t._v("推广到群聊")]):t._e(),2==t.activity.activity_status&&0==t.activity.is_success?a("v-uni-view",{staticClass:"lose"},[t._v("活动失败")]):t._e()],1)],1)],1),a("app-share-qr-code",{attrs:{posterUrl:"/plugins/community/poster/poster?activity_id="+t.id+"&middleman_id=0",hasPosterNav:t.showShare,title:"生成活动海报"},on:{share:function(i){arguments[0]=i=t.$handleEvent(i),t.hShareAppMessage.apply(void 0,arguments)}},model:{value:t.showShare,callback:function(i){t.showShare=i},expression:"showShare"}})],1)},s=[]},"92cb":function(t,i,e){"use strict";e.r(i);var a=e("6e2c"),o=e("4d92a");for(var s in o)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(s);e("3fc0");var n,r=e("f0c5"),d=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"3c0eebdf",null,!1,a["a"],n);i["default"]=d.exports},a77d:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAUVBMVEUAAACZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmcFIQ5AAAAGnRSTlMArTHz1wxe3Rr4mYlNOxDlvWkG0ldHK7MmyEqs7JoAAADJSURBVDjL1dPdDoMgDAXgTvwBEUXU6c77P+hSjBdLutCLJdvO9ZeWkpb+IVUfdHCBSSo4AaMK1jDNp2Cjg0c0rQbeHRAVMBkAVRmmBUBLRdjU2RXhyG6lImy6/L4iHNkNJMPtEJwAdyBcbgKwkQx7AM5eW8VzyJAdYLiMfeR/kWEEMO/5YZb7BpJhPGvUzOvsZMh9PTd1yBlIhh5Af60LFyURJn/WO2UH15IM7euMq317Cr6b1Tfz25C0MFSKUAddaNLC4aYLfS9PWoYZk28Ltu4AAAAASUVORK5CYII="},b480:function(t,i,e){"use strict";var a=e("4ea4");e("8e6e"),e("ac6a"),e("456d"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("7f7f");var o=a(e("bd86")),s=e("2f62"),n=a(e("409e"));function r(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);i&&(a=a.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,a)}return e}function d(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?r(Object(e),!0).forEach((function(i){(0,o.default)(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}var c={data:function(){return{timeInterval:null,showShare:!1,id:0,middleman_id:0,list:[],order:[],status_text:"",activity:{},d:"",h:"",m:"",setting:{}}},components:{appShareQrCode:n.default},computed:d(d({},(0,s.mapGetters)("mallConfig",{getTheme:"getTheme"})),(0,s.mapState)({stock:function(t){return t.mallConfig.__wxapp_img.stock},appSetting:function(t){return t.mallConfig.mall.setting},appImg:function(t){return t.mallConfig.__wxapp_img.mall},bonusImg:function(t){return t.mallConfig.__wxapp_img.bonus}})),onLoad:function(t){this.$commonLoad.onload(t);var i=this;i.id=t.id,i.middleman_id=t.middleman_id,i.$showLoading({type:"global",text:"加载中..."}),i.getSetting()},onHide:function(){clearInterval(this.timeInterval)},onUnload:function(){clearInterval(this.timeInterval)},methods:{hShareAppMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.$shareAppMessage({title:this.setting.app_share_title?this.setting.app_share_title:this.$children[0].navigationBarTitle,imageUrl:this.setting.app_share_pic?this.setting.app_share_pic:this.list[0].cover_pic,path:"/plugins/community/activity/activity",params:{id:this.id}},t)},copy:function(){var t,i=this,e="";if(0===i.order.length)return uni.showToast({title:"暂无订单，复制接龙文本失败",duration:1e3,icon:"none"}),!1;for(var a=0;a<i.order.length;a++)for(var o in t=a+1,t>1&&(e+="\n\n"),t<10?e+="【00"+t+"】\n":t<100?e+="【0"+t+"】\n":t<1e3&&(e+="【"+t+"】\n"),e+="用户昵称："+i.order[a].name+"\n商品名称：",i.order[a].list){for(var s in o>0&&(e+="、"),e+=i.order[a].list[o].goods+"（",i.order[a].list[o].attr)s>0&&(e+="/"),e+=i.order[a].list[o].attr[s].attr_name;e+="） x"+i.order[a].list[o].num}this.$utils.uniCopy({data:e,success:function(){uni.showToast({title:"复制成功"})}})},switchGood:function(t){var i=this;i.$request({url:i.$api.community.switch,data:{activity_id:i.id,goods_id:t.id},method:"post"}).then((function(t){uni.hideLoading(),uni.showToast({title:t.msg,icon:"none",duration:1e3})}))},toOrder:function(){uni.redirectTo({url:"/plugins/community/order/order?keyword="+this.activity.title})},toRecord:function(){uni.navigateTo({url:"/plugins/community/record/record?id="+this.id})},getTime:function(t){t>86399?(this.d=Math.floor(t/86400),t-=86400*this.d):this.d=0,t>3599?(this.h=Math.floor(t/3600),t-=3600*this.h):this.h=0,t>59?(this.m=Math.floor(t/60),t-=60*this.m):this.m=0},getSetting:function(){var t=this;t.$request({url:t.$api.community.setting}).then((function(i){0===i.code?(t.setting=i.data,t.getList()):uni.showToast({title:i.msg,icon:"none",duration:1e3})})).catch((function(){t.$hideLoading()}))},getOrder:function(){var t=this,i=this;i.$request({url:i.$api.community.middle_list,data:{status:0,keyword:i.activity.title,is_pagination:2}}).then((function(i){t.order=i.data.list}))},getList:function(){var t=this;t.$request({url:t.$api.community.activity_detail,data:{id:t.id},method:"post"}).then((function(i){if(uni.hideLoading(),t.$hideLoading(),0===i.code){for(var e in t.activity=i.data.activity,t.list=i.data.list,t.list)t.list[e].check=!0;if(0==t.activity.activity_status){var a=t.activity.time-1;t.timeInterval=setInterval((function(){t.getTime(a),a--,0==a&&(clearInterval(t.timeInterval),t.getList())}),1e3)}else t.status_text=t.activity.end_at.slice(5)+"结束",t.getOrder()}else uni.showToast({title:i.msg,icon:"none",duration:1e3})})).catch((function(){uni.hideLoading(),t.$hideLoading()}))}}};i.default=c},c795:function(t,i,e){var a=e("2015");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=e("4f06").default;o("6713710f",a,!0,{sourceMap:!1,shadowMode:!1})},ed3e7:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAY1BMVEUAAACZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmQGJZ5AAAAIHRSTlMA9GG85I+A156FjIkSB2U7ll3pyR/w7t64r6ZwRFMyKxiTv7UAAADJSURBVDjL3dTJDoIwFIXh1goU2gLKPKjn/Z9SyJUY04GYuCB+q7P4KWlCYGSqGu6RpJptdIKQtmDELF1SqmylVulLvEgFwB8UxkDE/HJgoCVQsRCJK40OWTA8ATSuO+EFnMYZUfjEfw5vse3iCA1c7o4TZWIb9LFuPUlbbOxQw2W2Q1MK23iwW0eCkNL4whqfCl9oMkGI1Ef8wn8Sfv1LUTshaFTog6FCQ6ME8kBXtBC0ag7I/OSWKwDz9gxH0Pt99dhxn3NfrMkTSWIiP/Z1mo4AAAAASUVORK5CYII="}}]);