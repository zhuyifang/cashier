(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-comments-comments"],{"12c9e":function(t,e,a){var n=a("90e6");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=a("4f06").default;o("1d512190",n,!0,{sourceMap:!1,shadowMode:!1})},"191b":function(t,e,a){"use strict";a.r(e);var n=a("9ecc"),o=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(i);e["default"]=o.a},"30a4":function(t,e,a){"use strict";a.r(e);var n=a("9b03"),o=a("a92c");for(var i in o)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(i);a("f6ad");var c,s=a("f0c5"),r=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"2f23b7cb",null,!1,n["a"],c);e["default"]=r.exports},"75fc":function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return v}));var n=a("a745"),o=a.n(n),i=a("db2a");function c(t){if(o()(t))return Object(i["a"])(t)}var s=a("67bb"),r=a.n(s),d=a("5d58"),l=a.n(d),u=a("774e"),f=a.n(u);function b(t){if("undefined"!==typeof r.a&&null!=t[l.a]||null!=t["@@iterator"])return f()(t)}var m=a("e630");function p(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(t){return c(t)||b(t)||Object(m["a"])(t)||p()}},"90e6":function(t,e,a){e=t.exports=a("24fb")(!1),e.push([t.i,".text-center[data-v-2f23b7cb]{text-align:center}.font-weight[data-v-2f23b7cb]{font-weight:700}.page-width[data-v-2f23b7cb]{width:100%}.goods-hover-class[data-v-2f23b7cb]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-2f23b7cb]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-2f23b7cb]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-2f23b7cb]{width:100%}.u-hover-class[data-v-2f23b7cb]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-2f23b7cb]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.app-comments .c-attr-name[data-v-2f23b7cb]{color:#999;font-size:%?24?%}.app-comments .more[data-v-2f23b7cb]{font-size:%?24?%;color:#999}.app-comments .block[data-v-2f23b7cb]{width:100%;height:%?80?%;font-size:%?26?%;background-color:#fff;padding:0 %?24?%}.app-comments .block uni-image[data-v-2f23b7cb]{width:%?12?%;height:%?22?%;display:block;margin-left:%?12?%}.app-comments .empty[data-v-2f23b7cb]{width:100%;height:%?100?%;margin-bottom:%?20?%}.app-comments .app-top[data-v-2f23b7cb]{padding:%?24?%;background-color:#fff;width:100%;height:%?100?%;position:fixed;left:0;top:0}.app-comments .app-top .box[data-v-2f23b7cb]{padding:0 %?20?%;margin-right:%?16?%;border-radius:%?26?%;font-size:%?26?%;height:100%}.app-comments .app-top .box.background[data-v-2f23b7cb]{background-color:#f1f1f1;color:#666}.app-comments .list[data-v-2f23b7cb]{background-color:#fff;padding:0 %?24?%}.app-comments .list .block[data-v-2f23b7cb]{padding:0}.app-comments .list .comments[data-v-2f23b7cb]{padding:%?28?% 0;width:100%;word-break:break-all}.app-comments .list .comments .title[data-v-2f23b7cb]{font-size:%?28?%;color:#999;margin-bottom:%?26?%}.app-comments .list .comments .title uni-image[data-v-2f23b7cb]{width:%?56?%;height:%?56?%;display:block;margin-right:%?26?%;border-radius:%?28?%}.app-comments .list .comments.bt[data-v-2f23b7cb]{border-top:%?1?% solid #e2e2e2}.app-comments .list .comments.bb[data-v-2f23b7cb]{border-bottom:%?1?% solid #e2e2e2}.app-comments .list .comments.bb[data-v-2f23b7cb]:last-child{border:none}.app-comments .list .comments .content[data-v-2f23b7cb]{word-break:break-all;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}.app-comments .list .comments .pic-list uni-image[data-v-2f23b7cb]{width:%?214?%;height:%?214?%;display:inline-block;margin:%?20?% %?20?% 0 0}.app-comments .list .comments .replay[data-v-2f23b7cb]{width:100%;background-color:#f7f7f7;padding:%?28?%;border-radius:%?16?%;font-size:%?28?%;color:#666}.u-text[data-v-2f23b7cb]{color:#fff}body.?%PAGE?%[data-v-2f23b7cb]{background:#f7f7f7}",""])},"9b03":function(t,e,a){"use strict";var n;a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return n}));var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return 1==t.mall.setting.is_comment?a("v-uni-view",{staticClass:"app-comments"},["detail"!==t.showType?a("v-uni-view",{staticClass:"empty"},[a("v-uni-view",{staticClass:"app-top dir-left-nowrap cross-center"},t._l(t.commentCount,(function(e,n){return a("v-uni-view",{key:n,staticClass:"box box-grow-1 main-center cross-center",class:t.status===e.index?"u-text ":"background",style:{"background-color":t.status===e.index?t.getTheme.background:""},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.clickStatus(e.index)}}},[t._v(t._s(e.name)+"("+t._s(e.count)+")")])})),1)],1):t._e(),t.list.length>0?a("v-uni-view",{staticClass:"list"},["detail"===t.showType?a("v-uni-view",{staticClass:"dir-left-nowrap block cross-center"},[a("v-uni-view",{staticClass:"box-grow-1"},[t._v("评价")]),a("v-uni-view",{staticClass:"box-grow-0 more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goto.apply(void 0,arguments)}}},[t._v("查看更多")]),a("v-uni-image",{staticClass:"box-grow-0",attrs:{src:"/static/image/icon/arrow-right.png"}})],1):t._e(),t._l(t.list,(function(e,n){return a("v-uni-view",{key:n,staticClass:"comments",class:"detail"===t.showType?"bt":"bb"},[a("v-uni-view",{staticClass:"title dir-left-nowrap cross-center"},[a("v-uni-image",{staticClass:"box-grow-0",attrs:{src:e.avatar}}),a("v-uni-view",{staticClass:"box-grow-1"},[t._v(t._s(e.nickname))]),a("v-uni-view",{staticClass:"more box-grow-0"},[t._v(t._s(e.time))])],1),a("v-uni-view",{staticClass:"c-attr-name"},[t._v(t._s(e.attr_name))]),a("v-uni-view",{class:"detail"===t.showType?"content":""},[t._v(t._s(e.content))]),a("v-uni-view",{staticClass:"dir-left-wrap pic-list"},t._l(e.pic_url,(function(e,o){return a("v-uni-image",{key:o,attrs:{src:e},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.imgPreview(n,o)}}})})),1),"detail"!==t.showType&&e.reply_content?a("v-uni-view",{staticClass:"replay"},[a("v-uni-view",[a("v-uni-text",{style:{color:t.getTheme.color}},[t._v("商家：")]),t._v(t._s(e.reply_content))],1)],1):t._e()],1)}))],2):a("v-uni-view",{staticClass:"block cross-center"},[t._v("暂无评价")])],1):t._e()},i=[]},"9ecc":function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(a("30a4")),i={name:"comments",components:{"app-comments":o.default},data:function(){return{goodsId:null,onReachBottom:0}},onLoad:function(t){this.$commonLoad.onload(t),this.goodsId=t.goods_id},onReachBottom:function(){this.onReachBottom=Math.random()}};e.default=i},a92c:function(t,e,a){"use strict";a.r(e);var n=a("bade"),o=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(i);e["default"]=o.a},aeed:function(t,e,a){"use strict";var n;a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return n}));var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-layout",[t.goodsId?a("v-uni-view",[a("app-comments",{attrs:{"show-type":"all","goods-id":t.goodsId,"reach-bottom":t.onReachBottom}})],1):t._e()],1)},i=[]},bade:function(t,e,a){"use strict";var n=a("4ea4");a("8e6e"),a("ac6a"),a("456d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(a("75fc")),i=n(a("bd86"));a("c5f6");var c=a("2f62");function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){(0,i.default)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d=1,l=!1,u=!1,f={name:"app-comments",props:{goodsId:Number,url:{type:String,default:function(){return""}},showType:{type:String,default:function(){return"detail"}},reachBottom:Number},watch:{goodsId:{handler:function(){this.loadData()}},reachBottom:{handler:function(){u||this.loadData()}}},computed:r(r({},(0,c.mapState)({mall:function(t){return t.mallConfig.mall}})),(0,c.mapGetters)("mallConfig",{getTheme:"getTheme"})),methods:{loadData:function(){var t=this;0!=this.mall.setting.is_comment&&(l||(l=!0,"detail"!==this.showType&&uni.showLoading({title:"加载中"}),this.$request({url:this.url?this.url:this.$api.goods.comments_list,data:{goods_id:this.goodsId,page:d,status:this.status}}).then((function(e){if(l=!1,uni.hideLoading(),0===e.code){t.commentCount=e.data.comment_count,1===d&&(t.list=[]);var a=e.data.comments;a.length>0?("detail"===t.showType&&(a=a.splice(0,2)),t.list=[].concat((0,o.default)(t.list),(0,o.default)(a)),d++):u=!0}})).catch((function(){l=!1,uni.hideLoading()}))))},goto:function(){uni.navigateTo({url:"/pages/comments/comments?goods_id=".concat(this.goodsId)})},clickStatus:function(t){this.status=t,d=1,u=!1,this.loadData()},imgPreview:function(t,e){this.list&&this.list[t]&&this.list[t].pic_url&&this.list[t].pic_url.length>0&&uni.previewImage({current:e,urls:this.list[t].pic_url})}},data:function(){return{commentCount:[],list:[],status:0}},created:function(){d=1,l=!1,u=!1},mounted:function(){this.goodsId&&this.loadData()}};e.default=f},f179:function(t,e,a){"use strict";a.r(e);var n=a("aeed"),o=a("191b");for(var i in o)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(i);var c,s=a("f0c5"),r=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],c);e["default"]=r.exports},f6ad:function(t,e,a){"use strict";var n=a("12c9e"),o=a.n(n);o.a}}]);