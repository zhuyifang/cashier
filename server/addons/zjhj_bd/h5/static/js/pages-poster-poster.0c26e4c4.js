(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-poster-poster"],{"34bd":function(t,e,i){"use strict";i.r(e);var a=i("5d8d"),o=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},"5d8d":function(t,e,i){"use strict";var a=i("4ea4");i("8e6e"),i("ac6a"),i("456d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(i("bd86")),n=i("2f62");function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){(0,o.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var s={data:function(){return{card_id:0,coupon_id:0,info:{}}},computed:c(c({},(0,n.mapGetters)("mallConfig",{getTheme:"getTheme"})),(0,n.mapState)({poster_img:function(t){return t.mallConfig.__wxapp_img.poster}})),methods:{submitSave:function(){var t=this;this.$showLoading({text:"生成中"});var e,i,a=this;a.card_id>0&&(e=a.$api.poster.card_share,i={cardId:a.card_id}),a.coupon_id>0&&(e=a.$api.poster.coupon_share,i={coupon_id:a.coupon_id}),a.$request({url:e,data:i}).then((function(e){t.$hideLoading();var i=e.code,a=e.data,o=e.msg;if(0===i){var n=a.pic_url;t.$utils.batchSave(n,"image").then((function(){uni.showToast({title:"保存成功"})}))}else uni.showToast({title:o,icon:"none"})})).catch((function(){t.$hideLoading()}))},getList:function(){var t,e,i=this;i.card_id>0&&(t=i.$api.poster.card,e={cardId:i.card_id}),i.coupon_id>0&&(t=i.$api.poster.coupon,e={coupon_id:i.coupon_id}),i.$request({url:t,data:e}).then((function(t){0==t.code?i.info=t.data:(i.$hideLoading(),uni.showToast({title:t.msg,icon:"none",duration:1e3}))})).catch((function(t){i.$hideLoading()}))}},onLoad:function(t){this.$commonLoad.onload(t);var e=this;t.card_id>0&&(e.card_id=t.card_id),t.coupon_id>0&&(e.coupon_id=t.coupon_id),e.getList()}};e.default=s},7286:function(t,e,i){"use strict";i.r(e);var a=i("7894"),o=i("34bd");for(var n in o)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("ee91");var r,c=i("f0c5"),s=Object(c["a"])(o["default"],a["b"],a["c"],!1,null,"6ebcff0a",null,!1,a["a"],r);e["default"]=s.exports},7894:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("app-layout",[i("v-uni-view",{staticClass:"head",attrs:{id:"head"}},[i("v-uni-view",{staticClass:"poster main-center cross-center",style:{"background-image":"url("+t.info.poster_bg+")"}},[i("v-uni-view",{staticClass:"dir-top-nowrap main-center user"},[i("v-uni-image",{attrs:{src:t.info.avatar}}),i("v-uni-view",[t._v(t._s(t.info.nickname))])],1),t.coupon_id>0?i("v-uni-view",{staticClass:"dir-left-nowrap info"},[1==t.info.type?i("v-uni-view",{staticClass:"main-center cross-center discout"},[t._v(t._s(t.info.discount)),i("v-uni-text",[t._v("折")])],1):t._e(),2==t.info.type?i("v-uni-view",{staticClass:"main-center cross-center discout"},[i("v-uni-text",[t._v("￥")]),t._v(t._s(t.info.sub_price))],1):t._e(),i("v-uni-view",{staticClass:"use-info dir-top-nowrap main-center cross-center"},[t.info.min_price||0==t.info.min_price?i("v-uni-view",{staticClass:"min-price"},[t._v(t._s(0==t.info.min_price?"无门槛使用":"满"+t.info.min_price+"可用"))]):t._e(),t.info.discount_limit?i("v-uni-view",[t._v("优惠上限:￥"+t._s(t.info.discount_limit))]):t._e(),i("v-uni-view",[t._v(t._s(t.info.appoint_type))])],1)],1):t._e(),t.coupon_id>0&&t.info.expire_type?i("v-uni-view",{staticClass:"expire"},[i("v-uni-text",[i("v-uni-text",[t._v("有效期：")]),"2"==t.info.expire_type?i("v-uni-text",[t._v(t._s(t.info.begin_time)+" - "+t._s(t.info.end_time))]):t.info.expire_day>0?i("v-uni-text",[t._v("领取后"+t._s(t.info.expire_day)+"天内有效")]):t._e()],1)],1):t._e(),t.card_id>0?i("v-uni-view",{staticClass:"dir-left-nowrap cross-center info"},[i("v-uni-image",{staticClass:"card-pic",attrs:{src:t.info.pic_url}}),i("v-uni-view",{staticClass:"name t-omit-two"},[t._v(t._s(t.info.name))])],1):t._e(),i("v-uni-image",{staticClass:"qrcode",attrs:{src:t.info.qrcode}})],1)],1),i("v-uni-view",{staticClass:"button main-center cross-center",style:{"background-color":t.getTheme.background},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submitSave.apply(void 0,arguments)}}},[t._v("保存图片")])],1)},n=[]},a7b1:function(t,e,i){e=t.exports=i("24fb")(!1),e.push([t.i,".text-center[data-v-6ebcff0a]{text-align:center}.font-weight[data-v-6ebcff0a]{font-weight:700}.page-width[data-v-6ebcff0a]{width:100%}.goods-hover-class[data-v-6ebcff0a]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-6ebcff0a]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-6ebcff0a]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-6ebcff0a]{width:100%}.u-hover-class[data-v-6ebcff0a]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-6ebcff0a]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.head[data-v-6ebcff0a]{width:100%}.head .poster[data-v-6ebcff0a]{margin:%?50?% auto;width:%?600?%;height:%?1067.2?%;background-size:100% 100%;background-position:50%;background-repeat:no-repeat;position:relative}.head .poster .user[data-v-6ebcff0a]{position:absolute;top:%?52.8?%;left:0;right:0;width:90%;margin:0 auto;color:#fff;font-size:%?24?%;text-align:center}.head .poster .user uni-image[data-v-6ebcff0a]{border-radius:50%;width:%?104?%;height:%?104?%;margin:0 auto %?20?%}.head .poster .info[data-v-6ebcff0a]{position:absolute;top:%?274.8?%;left:0;color:#fff;height:%?156?%;width:100%}.head .poster .info .card-pic[data-v-6ebcff0a]{width:%?96?%;height:%?96?%;border-radius:50%;margin:0 %?19.2?% 0 %?60.8?%}.head .poster .info .name[data-v-6ebcff0a]{width:%?264?%;color:#353535;font-size:%?27?%}.head .poster .info .discout[data-v-6ebcff0a]{width:%?228.8?%;font-size:%?48?%}.head .poster .info .discout uni-text[data-v-6ebcff0a]{font-size:%?27?%;margin-top:%?14?%}.head .poster .info .use-info[data-v-6ebcff0a]{color:#353535;font-size:%?24?%}.head .poster .info .use-info uni-view[data-v-6ebcff0a]{margin:%?5?% 0;width:100%}.head .poster .info .use-info .min-price[data-v-6ebcff0a]{font-size:%?27?%}.head .poster .expire[data-v-6ebcff0a]{position:absolute;bottom:%?320?%;left:0;text-align:center;width:100%}.head .poster .expire>uni-text[data-v-6ebcff0a]{border-radius:%?24?%;background-color:rgba(0,0,0,.2);padding:%?9?% %?19.2?%;color:#fff;font-size:%?20?%}.head .poster .qrcode[data-v-6ebcff0a]{position:absolute;bottom:%?110?%;left:0;right:0;width:%?192?%;height:%?192?%;margin:0 auto;border-radius:50%}.button[data-v-6ebcff0a]{font-size:%?32?%;border-radius:%?40?%;height:%?68?%;margin:0 auto %?50?%;color:#fff;width:%?500?%}body.?%PAGE?%[data-v-6ebcff0a]{background:#f7f7f7}",""])},b4ca:function(t,e,i){var a=i("a7b1");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("38c09e52",a,!0,{sourceMap:!1,shadowMode:!1})},ee91:function(t,e,i){"use strict";var a=i("b4ca"),o=i.n(a);o.a}}]);