(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-edit-cat-edit-cat-edit"],{"26d1":function(t,e,i){"use strict";i.r(e);var a=i("9106"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},"3e53":function(t,e,i){var a=i("5c16");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("2b8f4e48",a,!0,{sourceMap:!1,shadowMode:!1})},"5c16":function(t,e,i){e=t.exports=i("24fb")(!1),e.push([t.i,".text-center[data-v-16017bce]{text-align:center}.font-weight[data-v-16017bce]{font-weight:700}.page-width[data-v-16017bce]{width:100%}.goods-hover-class[data-v-16017bce]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-16017bce]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-16017bce]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-16017bce]{width:100%}.u-hover-class[data-v-16017bce]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-16017bce]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.cat-info[data-v-16017bce]{background-color:#fff;padding:0 %?24?%}.cat-info .cat-item[data-v-16017bce]:first-of-type{border-top:0}.cat-info .select[data-v-16017bce]{width:100%}.cat-info .form-label[data-v-16017bce]{padding:%?30?% 0;width:%?148?%;text-align:right;margin-right:%?16?%;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.cat-info .form-label .sub-label[data-v-16017bce]{font-size:%?24?%;color:#999}.cat-info .price-input[data-v-16017bce]{width:100%}.cat-info .price-input uni-input[data-v-16017bce]{width:100%}.cat-info .cat-item[data-v-16017bce]{border-top:%?1?% solid #e2e2e2;min-height:%?88?%;font-size:%?28?%;color:#353535}.cat-info .cat-item .to-more[data-v-16017bce]{height:%?24?%;width:%?12?%;margin-left:%?10?%}.cat-info .cat-item .cat-pic[data-v-16017bce]{width:%?80?%;height:%?80?%;margin-right:%?28?%}.cat-info .cat-item .cat-pic.big[data-v-16017bce]{width:%?265?%}.cat-info .cat-item .cat-pic.advert[data-v-16017bce]{width:%?218?%}.cat[data-v-16017bce]{background-color:#fff;margin-bottom:%?20?%}.cat .show-more[data-v-16017bce]{width:%?45?%;height:%?88?%}.cat .show-more uni-image[data-v-16017bce]{height:%?22?%;width:%?12?%}.cat .cat-item[data-v-16017bce]{height:%?88?%;line-height:%?88?%;font-size:%?28?%;color:#353535}.cat .cat-item.cat-left[data-v-16017bce]{margin-left:%?16?%}.cat .cat-menu[data-v-16017bce]{margin-right:%?16?%}.cat .cat-menu uni-image[data-v-16017bce]{height:%?40?%;width:%?40?%;margin-left:%?10?%}.add[data-v-16017bce]{position:fixed;bottom:0;left:0;height:%?120?%;width:100%;z-index:15;background-color:#fff}.add.iphone_x[data-v-16017bce]{height:%?170?%;padding-bottom:%?50?%}.add uni-view[data-v-16017bce]{width:%?702?%;line-height:%?80?%;height:%?80?%;margin:%?20?% auto;border-radius:%?40?%;background-color:#446dfd;color:#fff;font-size:%?32?%;text-align:center}.placeholder[data-v-16017bce]{height:%?120?%}.placeholder.iphone_x[data-v-16017bce]{height:%?170?%}.params-dialog[data-v-16017bce]{position:fixed;height:100%;width:100%;bottom:0;left:0;z-index:22;background-color:rgba(0,0,0,.3)}.params-dialog .params[data-v-16017bce]{width:%?620?%;background-color:#fff;border-radius:%?16?%;margin-top:%?-200?%}.params-dialog .params .params-title[data-v-16017bce]{margin:%?40?% 0;font-size:%?32?%;color:#353535;text-align:center}.params-dialog .params .params-list[data-v-16017bce]{max-height:%?480?%;overflow-y:auto}.params-dialog .params .params-list .params-item[data-v-16017bce]{margin-bottom:%?20?%}.params-dialog .params .params-list .params-item .params-label[data-v-16017bce]{height:%?80?%;line-height:%?80?%;margin-right:%?20?%}.params-dialog .params .params-list .params-item .params-input[data-v-16017bce]{height:%?80?%;line-height:%?80?%;background-color:#f7f7f7;border-radius:%?8?%;width:%?320?%;padding:0 %?28?%;-webkit-box-sizing:border-box;box-sizing:border-box;text-align:left}.params-dialog .params .params-list .params-item .params-input uni-input[data-v-16017bce]{width:100%;height:100%}.params-dialog .params .params-list .params-item .params-desc[data-v-16017bce]{margin-top:%?10?%;padding:0 %?24?%;color:#999;font-size:%?28?%;text-align:center}.params-dialog .params .params-buttons[data-v-16017bce]{width:%?620?%;height:%?88?%;border-top:%?1?% solid #e2e2e2}.params-dialog .params .params-buttons .line[data-v-16017bce]{width:%?2?%;height:%?32?%;background-color:#e2e2e2}.params-dialog .params .params-buttons .but[data-v-16017bce]{width:%?309?%;height:%?88?%;line-height:%?88?%;text-align:center;font-size:%?32?%}.params-dialog .params .params-buttons .cancel[data-v-16017bce]{color:%?32?%}.params-dialog .params .params-buttons .confirm[data-v-16017bce]{color:#446dfd}.dialog[data-v-16017bce]{position:fixed;height:100%;width:100%;bottom:0;left:0;z-index:20;background-color:rgba(0,0,0,.3)}.dialog .picker-list[data-v-16017bce]{background-color:#fff;padding-top:%?20?%;position:fixed;bottom:0;left:0;width:100%}.dialog .picker-list .picker-type[data-v-16017bce]{height:%?84?%;border-bottom:%?2?% solid #e2e2e2;padding:0 %?24?%}.dialog .picker-list .picker-type .picker-type-item[data-v-16017bce]{height:%?82?%;line-height:%?82?%;text-align:center;font-size:%?28?%}.dialog .picker-list .picker-type .picker-type-item.active[data-v-16017bce]{border-bottom:%?3?% solid}.dialog .picker-list .picker-header[data-v-16017bce]{padding:0 %?24?%;font-size:%?32?%}.dialog .picker-list .picker[data-v-16017bce]{width:100%;height:%?440?%;color:#999}.dialog .picker-list .picker-text[data-v-16017bce]{height:34px;line-height:34px;font-size:%?32?%;padding-left:%?24?%;text-align:left}body.?%PAGE?%[data-v-16017bce]{background:#f7f7f7}",""])},"8afe":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("app-layout",[t.mch_id||0==t.mch_id?i("v-uni-view",{staticClass:"cat-info"},[i("v-uni-view",{staticClass:"cat-item type cross-center dir-left-nowrap"},[i("v-uni-view",{staticClass:"form-label"},[t._v("分类级别")]),i("v-uni-view",{staticClass:"select"},[i("v-uni-radio-group",{staticClass:"dir-left-nowrap main-between",on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.typeChange.apply(void 0,arguments)}}},t._l(t.level,(function(e){return i("v-uni-label",{key:e.value,staticClass:"dir-left-nowrap cross-center",staticStyle:{width:"33%"}},[i("v-uni-view",[i("v-uni-radio",{attrs:{disabled:t.id>0,color:t.color,value:e.value,checked:e.value==t.catItem.level}})],1),i("v-uni-view",{staticClass:"select-label",style:{color:t.id>0?"#adadb2":t.catItem.level==e.value?t.color:"#353535"}},[t._v(t._s(e.label))])],1)})),1)],1)],1),t.catItem.level>1?i("v-uni-view",{staticClass:"cat-item cross-center main-between"},[i("v-uni-view",{staticClass:"form-label"},[i("v-uni-view",[i("v-uni-text",{staticStyle:{color:"#ff4544"}},[t._v("*")]),t._v("一级分类")],1)],1),i("v-uni-view",{staticStyle:{"flex-grow":"1"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getList("one")}}},[i("v-uni-view",{staticClass:"cat-info dir-right-nowrap cross-center"},[i("v-uni-image",{staticClass:"to-more",attrs:{src:"/static/image/icon/arrow-right.png"}}),t.parents?i("v-uni-text",{staticClass:"t-omit",staticStyle:{color:"#353535",width:"90%","text-align":"right"}},[t._v(t._s(t.parents.label))]):i("v-uni-text",{staticStyle:{color:"#cdcdcd"}},[t._v("请选择归属的一级分类")])],1)],1)],1):t._e(),t.catItem.level>2?i("v-uni-view",{staticClass:"cat-item cross-center main-between"},[i("v-uni-view",{staticClass:"form-label"},[i("v-uni-view",[i("v-uni-text",{staticStyle:{color:"#ff4544"}},[t._v("*")]),t._v("二级分类")],1)],1),i("v-uni-view",{staticStyle:{"flex-grow":"1"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getList("two")}}},[i("v-uni-view",{staticClass:"cat-info dir-right-nowrap cross-center"},[i("v-uni-image",{staticClass:"to-more",attrs:{src:"/static/image/icon/arrow-right.png"}}),t.parents_two?i("v-uni-text",{staticClass:"t-omit",staticStyle:{color:"#353535",width:"90%","text-align":"right"}},[t._v(t._s(t.parents_two.label))]):i("v-uni-text",{staticStyle:{color:"#cdcdcd"}},[t._v("请选择归属的二级分类")])],1)],1)],1):t._e(),i("v-uni-view",{staticClass:"cat-item cross-center dir-left-nowrap"},[i("v-uni-view",{staticClass:"form-label"},[i("v-uni-text",{staticStyle:{color:"#ff4544"}},[t._v("*")]),t._v("分类名称")],1),i("v-uni-view",{staticClass:"dir-left-nowrap price-input cross-center"},[i("v-uni-input",{staticClass:"input",attrs:{"placeholder-style":"color: #cdcdcd",maxlength:"16",placeholder:"请输入分类名称"},model:{value:t.catItem.name,callback:function(e){t.$set(t.catItem,"name",e)},expression:"catItem.name"}})],1)],1),i("v-uni-view",{staticClass:"cat-item cross-center dir-left-nowrap"},[i("v-uni-view",{staticClass:"form-label"},[i("v-uni-text",{staticStyle:{color:"#ff4544"}},[t._v("*")]),t._v("排序")],1),i("v-uni-view",{staticClass:"dir-left-nowrap price-input cross-center"},[i("v-uni-input",{staticClass:"input",attrs:{type:"number","placeholder-style":"color: #cdcdcd",placeholder:"请输入排序"},model:{value:t.catItem.sort,callback:function(e){t.$set(t.catItem,"sort",e)},expression:"catItem.sort"}})],1)],1),i("v-uni-view",{staticClass:"cat-item cross-center main-between"},[i("v-uni-view",{staticClass:"form-label"},[i("v-uni-view",[t._v("分类图标")]),i("v-uni-view",{staticClass:"sub-label"},[t._v("200x200")])],1),i("v-uni-view",[i("v-uni-view",{staticClass:"cat-info dir-right-nowrap cross-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.add("pic_url")}}},[i("v-uni-image",{staticClass:"to-more",attrs:{src:"/static/image/icon/arrow-right.png"}}),t.catItem.pic_url?i("v-uni-image",{staticClass:"cat-pic",attrs:{src:t.catItem.pic_url}}):i("v-uni-text",{staticStyle:{color:"#cdcdcd"}},[t._v("请上传分类图标")])],1)],1)],1),i("v-uni-view",{staticClass:"cat-item cross-center main-between"},[i("v-uni-view",{staticClass:"form-label"},[i("v-uni-view",[t._v("分类大图")]),i("v-uni-view",{staticClass:"sub-label"},[t._v("702x212")])],1),i("v-uni-view",[i("v-uni-view",{staticClass:"cat-info dir-right-nowrap cross-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.add("big_pic_url")}}},[i("v-uni-image",{staticClass:"to-more",attrs:{src:"/static/image/icon/arrow-right.png"}}),t.catItem.big_pic_url?i("v-uni-image",{staticClass:"cat-pic big",attrs:{src:t.catItem.big_pic_url}}):i("v-uni-text",{staticStyle:{color:"#cdcdcd"}},[t._v("请上传分类大图")])],1)],1)],1),i("v-uni-view",{staticClass:"cat-item cross-center main-between"},[i("v-uni-view",{staticClass:"form-label"},[i("v-uni-view",[t._v("分类广告图")]),i("v-uni-view",{staticClass:"sub-label"},[t._v("500x184")])],1),i("v-uni-view",[i("v-uni-view",{staticClass:"cat-info dir-right-nowrap cross-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.add("advert_pic")}}},[i("v-uni-image",{staticClass:"to-more",attrs:{src:"/static/image/icon/arrow-right.png"}}),t.catItem.advert_pic?i("v-uni-image",{staticClass:"cat-pic advert",attrs:{src:t.catItem.advert_pic}}):i("v-uni-text",{staticStyle:{color:"#cdcdcd"}},[t._v("请上传分类广告图")])],1)],1)],1),0==t.mch_id?i("v-uni-view",{staticClass:"cat-item cross-center main-between"},[i("v-uni-view",{staticClass:"form-label"},[i("v-uni-view",[t._v("广告链接")])],1),i("v-uni-view",{staticStyle:{"flex-grow":"1"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getList("ad")}}},[i("v-uni-view",{staticClass:"cat-info dir-right-nowrap cross-center"},[i("v-uni-image",{staticClass:"to-more",attrs:{src:"/static/image/icon/arrow-right.png"}}),t.catItem.advert_url?i("v-uni-text",[t._v(t._s(t.catItem.advert_url))]):i("v-uni-text",{staticStyle:{color:"#cdcdcd"}},[t._v("请选择链接")])],1)],1)],1):t._e(),i("v-uni-view",{staticClass:"cat-item cross-center main-between"},[i("v-uni-view",{staticClass:"form-label"},[t._v("是否启用")]),i("v-uni-switch",{staticStyle:{transform:"scale(0.7)"},attrs:{color:t.color,checked:1==t.catItem.status},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.catItem.status=0==t.catItem.status?1:0}}})],1),i("v-uni-view",{staticClass:"cat-item cross-center main-between"},[i("v-uni-view",{staticClass:"form-label"},[t._v("是否显示")]),i("v-uni-switch",{staticStyle:{transform:"scale(0.7)"},attrs:{color:t.color,checked:1==t.catItem.is_show},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.catItem.is_show=!t.catItem.is_show}}})],1)],1):t._e(),t.mch_id||0==t.mch_id?i("v-uni-view",{class:["placeholder",t.iphone_x?"iphone_x":""]}):t._e(),t.mch_id||0==t.mch_id?i("v-uni-view",{class:["add",t.iphone_x?"iphone_x":""]},[i("v-uni-view",{style:{"background-color":t.color},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.save.apply(void 0,arguments)}}},[t._v("保存")])],1):t._e(),t.dialog?i("v-uni-view",{class:["dialog",t.iphone_x?"iphone_x":""]},[i("v-uni-view",{staticClass:"picker-list"},[i("v-uni-view",{staticClass:"main-between picker-header",style:{color:t.color}},[i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.dialog=!1}}},[t._v("取消")]),i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submitChoose.apply(void 0,arguments)}}},[t._v("确定")])],1),"ad"==t.mode?i("v-uni-view",{staticClass:"picker-type dir-left-nowrap cross-center"},t._l(t.linkType,(function(e){return i("v-uni-view",{key:e.value,staticClass:"picker-type-item box-grow-1",class:t.chooseType==e.value?"active":"",style:{color:t.chooseType==e.value?t.color:"#353535","border-color":t.chooseType==e.value?t.color:"#fff"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toggleType(e.value)}}},[t._v(t._s(e.name))])})),1):t._e(),t.pickList.length>0?i("v-uni-picker-view",{staticClass:"picker",attrs:{"indicator-style":"height: 34px;",value:t.chooseIndex},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindChange.apply(void 0,arguments)}}},[i("v-uni-picker-view-column",t._l(t.pickList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"picker-text t-omit",style:{color:t.newIndex==a?t.color:t.newIndex==a+1||t.newIndex==a-1?"#999999":t.newIndex==a+2||t.newIndex==a-2?"#cdcdcd":""}},[t._v(t._s("ad"==t.mode?e.name:e.label))])})),1)],1):0==t.pickList.length&&"ad"==t.mode?i("v-uni-view",{staticClass:"picker",staticStyle:{"background-color":"#fff"}}):t._e()],1)],1):t._e(),t.showParams?i("v-uni-view",{staticClass:"params-dialog main-center cross-center"},[i("v-uni-view",{staticClass:"params"},[i("v-uni-view",{staticClass:"params-title"},[t._v(t._s(t.title))]),i("v-uni-view",{staticClass:"params-list"},t._l(t.params,(function(e){return i("v-uni-view",{key:e.key,staticClass:"params-item"},[i("v-uni-view",{staticClass:"main-center cross-center"},[i("v-uni-view",{staticClass:"params-label"},[t._v(t._s(e.key))]),i("v-uni-view",{staticClass:"params-input"},["checkbox"===e.number?i("v-uni-input",{attrs:{type:"checkbox"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}}):"radio"===e.number?i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],attrs:{type:"radio"},domProps:{checked:t._q(e.value,null)},on:{change:function(i){return t.$set(e,"value",null)}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],attrs:{type:e.number},domProps:{value:e.value},on:{input:function(i){i.target.composing||t.$set(e,"value",i.target.value)}}})],1)],1),i("v-uni-view",{staticClass:"params-desc"},[t._v(t._s(e.desc))])],1)})),1),i("v-uni-view",{staticClass:"params-buttons dir-left-nowrap cross-center"},[i("v-uni-view",{staticClass:"but cancel"},[i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showParams=!1}}},[t._v("取消")])],1),i("v-uni-view",{staticClass:"line"}),i("v-uni-view",{staticClass:"but confirm"},[i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.paramsConfirm.apply(void 0,arguments)}}},[t._v("确认")])],1)],1)],1)],1):t._e()],1)},s=[]},9106:function(t,e,i){"use strict";var a=i("4ea4");i("ac4d"),i("8a81"),i("5df3"),i("1c4c"),i("8e6e"),i("ac6a"),i("456d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("6b54"),i("87b3"),i("7f7f");var n=a(i("bd86")),s=i("2f62"),c=a(i("d5ea"));function o(t,e){var i="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=r(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var a=0,n=function(){};return{s:n,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,c=!0,o=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return c=t.done,t},e:function(t){o=!0,s=t},f:function(){try{c||null==i.return||i.return()}finally{if(o)throw s}}}}function r(t,e){if(t){if("string"===typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){(0,n.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var v={data:function(){return{dialog:!1,level:[{value:1,label:"一级"},{value:2,label:"二级"},{value:3,label:"三级"}],iphone_x:!1,showParams:!1,parents:null,parents_two:null,mode:"",params:[],pickList:[],linkType:[{value:"base",name:"基础"},{value:"order",name:"订单"},{value:"marketing",name:"营销"},{value:"plugin",name:"插件"},{value:"diy",name:"微页面"}],chooseType:"base",title:"",linkList:[],list:[],mch_id:null,id:0,type:"",newIndex:0,chooseIndex:[0],catItem:{level:1,name:"",sort:100,pic_url:"",big_pic_url:"",advert_pic:"",status:1,advert_url:"",advert_open_type:"",advert_params:[],is_show:1,parent_id:""},color:""}},computed:u({},(0,s.mapState)({userInfo:function(t){return t.user.info},adminImg:function(t){return t.mallConfig.__wxapp_img.app_admin}})),methods:{paramsConfirm:function(){var t,e=o(this.params);try{for(e.s();!(t=e.n()).done;){var i=t.value;if(i.is_required&&!i.value)return uni.showToast({title:i.desc,icon:"none",duration:1e3}),!1}}catch(a){e.e(a)}finally{e.f()}this.dialog=!1,this.showParams=!1,this.catItem.advert_url=this.pickList[this.newIndex].value,this.catItem.advert_open_type=this.pickList[this.newIndex].open_type,this.catItem.advert_params=this.params},toggleType:function(t){var e=this;this.chooseType=t,this.pickList=[],this.newIndex=0,this.chooseIndex[0]=0,setTimeout((function(){e.pickList=e.linkList[t]}),200)},getList:function(t){var e=this;if(this.pickList=[],this.mode=t,this.newIndex=0,this.chooseIndex[0]=0,"one"==t){var i,a=[],n=o(this.list);try{for(n.s();!(i=n.n()).done;){var s=i.value;3==this.catItem.level?s.children&&a.push(s):a.push(s)}}catch(d){n.e(d)}finally{n.f()}for(var c in a)this.parents&&this.parents.value==a[c].value&&(this.newIndex=+c,this.chooseIndex[0]=+c),this.pickList.push(a[c]);if(0==this.pickList.length)return uni.showToast({title:"暂无可用的一级分类",icon:"none",duration:1e3}),this.catItem.level--,!1;this.$nextTick((function(){e.dialog=!0}))}if("two"==t){if(!this.parents)return uni.showToast({title:"请选择归属的一级分类",icon:"none",duration:1e3}),!1;if(this.parents.children){for(var r in this.parents.children)this.parents_two&&this.parents_two.value==this.parents.children[r].value&&(this.newIndex=+r,this.chooseIndex[0]=+r),this.pickList.push(this.parents.children[r]);if(0==this.pickList.length)return uni.showToast({title:"暂无二级分类",icon:"none",duration:1e3}),this.catItem.level--,!1;this.$nextTick((function(){e.dialog=!0}))}}if("ad"==t){for(var l in this.pickList=this.linkList[this.chooseType],this.linkList[this.chooseType])this.catItem.advert_url&&this.catItem.advert_url==this.linkList[this.chooseType][l].value&&(this.newIndex=+l,this.chooseIndex[0]=+l);this.$nextTick((function(){e.dialog=!0}))}},submitChoose:function(){"one"==this.mode?(this.dialog=!1,this.parents&&this.parents.value!=this.pickList[this.newIndex].value&&(this.parents_two=null),this.parents=this.pickList[this.newIndex]):"two"==this.mode?(this.dialog=!1,this.parents_two=this.pickList[this.newIndex]):"ad"==this.mode&&(this.pickList[this.newIndex].params?(this.params=this.pickList[this.newIndex].params,this.title=this.pickList[this.newIndex].name,this.showParams=!0):(this.dialog=!1,this.catItem.advert_url=this.pickList[this.newIndex].value,this.catItem.advert_open_type=this.pickList[this.newIndex].open_type,this.catItem.advert_params=[]))},bindChange:function(t){this.newIndex=+t.detail.value[0]},getCat:function(){var t=this,e=0==this.mch_id?t.$api.app_admin.cat:"mall"==t.type?t.$api.mch.cat:t.$api.mch.mch_cat;t.$request({url:e,data:{mch_id:t.mch_id}}).then((function(e){t.$hideLoading(),0==e.code?t.list=e.data.list:uni.showToast({title:e.msg,icon:"none",duration:1e3})})).catch((function(e){t.$hideLoading()}))},getPickLine:function(){var t=this;t.$request({url:t.$api.app_admin.pick_link}).then((function(e){t.$hideLoading(),0==e.code?t.linkList=e.data.list:uni.showToast({title:e.msg,icon:"none",duration:1e3})})).catch((function(e){t.$hideLoading()}))},add:function(t){var e=this;this.menu=!1,uni.chooseImage({count:1,sizeType:["original","compressed"],success:function(t){uni.showLoading({mask:!0,title:"上传中..."});var i=e.list,a=new Image;a.src=t.tempFilePaths;a.onload=function(){var t=document.createElement("canvas");t.width=a.width,t.height=a.height;var n=t.getContext("2d");n.drawImage(a,0,0,a.width,a.height);var s=a.src.substring(a.src.lastIndexOf(".")+1).toLowerCase(),o=t.toDataURL("image/"+s);(0,c.default)({url:e.$api.upload.file,maxNum:1,success:function(t){t.res;var a=t.header;e.$request({url:e.$api.upload.file+"&name=base64",header:a,method:"post",data:{database:o}}).then((function(t){if(uni.hideLoading(),0===t.code){for(var a in i)"img"===i[a].type&&""===i[a].pic_url&&(i[a].pic_url=t.data.url,i[a].id=t.data.id);e.loadingImg=!1,uni.hideLoading()}else uni.showModal({title:"",content:t.msg,showCancel:!1})}))}})}}})},typeChange:function(t){if(this.id>0)return!1;this.catItem.level=t.target.value,3==this.catItem.level&&this.parents&&!this.parents.children&&(this.parents=null)},save:function(){var t=this,e=0==this.mch_id?t.$api.app_admin.cat_edit:"mall"==t.type?t.$api.mch.cat:t.$api.mch.mch_cat_edit;if(t.catItem.status=t.catItem.status.toString(),3==t.catItem.level){if(!t.parents_two||!t.parents_two.value)return uni.showToast({title:"请选择归属的二级分类",icon:"none",duration:1e3}),!1;t.catItem.parent_id=t.parents_two.value}else if(2==t.catItem.level){if(!t.parents||!t.parents.value)return uni.showToast({title:"请选择归属的一级分类",icon:"none",duration:1e3}),!1;t.catItem.parent_id=t.parents.value}if(!t.catItem.name)return uni.showToast({title:"分类名称不能为空",icon:"none",duration:1e3}),!1;uni.showLoading({mask:!0,title:"提交中..."}),t.mch_id>0&&(t.catItem.mch_id=t.mch_id),t.catItem.is_show=+t.catItem.is_show,t.catItem.status=t.catItem.status.toString(),t.$request({url:e,data:{form:JSON.stringify(t.catItem),mch_id:t.mch_id},method:"post"}).then((function(e){t.$hideLoading(),uni.hideLoading(),0==e.code?(uni.showToast({title:e.msg,duration:1e3}),setTimeout((function(){uni.navigateBack()}),1e3)):uni.showToast({title:e.msg,icon:"none",duration:1e3})})).catch((function(e){uni.hideLoading(),t.$hideLoading()}))},getDetail:function(){var t=this,e=0==this.mch_id?t.$api.app_admin.cat_edit:"mall"==t.type?t.$api.mch.cat:t.$api.mch.mch_cat_edit;t.$request({url:e,data:{id:t.id,mch_id:t.mch_id}}).then((function(e){if(t.$hideLoading(),0==e.code){if(t.catItem=e.data.detail,t.catItem.level=e.data.detail.parents.length+1,t.catItem.level>1){var i,a=o(t.catItem.parents);try{for(a.s();!(i=a.n()).done;){var n=i.value;0==n.parent_id?t.parents={label:n.name,value:n.id}:t.parents_two={label:n.name,value:n.id}}}catch(s){a.e(s)}finally{a.f()}}}else uni.showToast({title:e.msg,icon:"none",duration:1e3})})).catch((function(e){t.$hideLoading()}))}},onLoad:function(t){var e=this;this.id=t.id?t.id:0,this.type=t.type?t.type:"",this.mch_id=t.mch_id?t.mch_id:0,this.color=this.mch_id>0?"#ff4544":"#446dfd",uni.setNavigationBarTitle({title:this.id>0?"编辑分类":"新增分类"}),0==this.mch_id&&e.getPickLine(),this.id>0&&(e.$showLoading({type:"global",text:"加载中..."}),this.getDetail()),e.iphone_x=this.$utils.checkIphone(),e.getCat()}};e.default=v},9122:function(t,e,i){"use strict";var a=i("3e53"),n=i.n(a);n.a},d5ea:function(t,e,i){"use strict";var a=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("f854")),s=(a(i("e143")),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(e,i){(0,n.default)(t,"file").then((function(e){t.success({res:"",header:e})}))}))}),c=s;e.default=c},f854:function(t,e,i){"use strict";var a=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("a481"),i("96cf");var n=a(i("3b8d")),s=i("8de3"),c=a(i("e143")),o=a(i("4360")),r=i("b1c7"),l=a(i("36e8")),d=function(){var t=(0,n.default)(regeneratorRuntime.mark((function t(e,i){var a,n,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={"X-App-Platform":e.header&&e.header["X-App-Platform"]?e.header["X-App-Platform"]:c.default.prototype.$platform,"X-Form-Id-List":JSON.stringify((0,s.popAll)()),"X-Requested-With":e.header&&e.header["X-Requested-With"]?e.header["X-Requested-With"]:"XMLHttpRequest","X-App-Version":c.default.prototype.$appVersion,"content-type":i?"multipart/form-data":"application/x-www-form-urlencoded"},t.next=3,o.default.dispatch("user/loadAccessTokenFormCache");case 3:return o.default.state.user&&o.default.state.user.accessToken&&(a["X-Access-Token"]=o.default.state.user.accessToken),o.default.state.user&&0!==o.default.state.user.tempParentId&&(a["X-User-Id"]=o.default.state.user.tempParentId+""),n={},e.url.replace(/([^=&]+)=([^&]*)/g,(function(t,e,i){n[decodeURIComponent(e)]=decodeURIComponent(i)})),-1!==(0,r.objectValues)(l.default.mch).indexOf(n.r)&&(d=c.default.prototype.$storage.getStorageSync("MCH2019"),a["Mch-Access-Token"]=d.token),t.abrupt("return",a);case 9:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),u=d;e.default=u},fe08:function(t,e,i){"use strict";i.r(e);var a=i("8afe"),n=i("26d1");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("9122");var c,o=i("f0c5"),r=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"16017bce",null,!1,a["a"],c);e["default"]=r.exports}}]);