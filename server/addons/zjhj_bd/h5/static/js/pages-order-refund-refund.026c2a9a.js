(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-refund-refund"],{"04b6":function(t,e,i){"use strict";var a=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(i("4e01")),n=a(i("798e")),s=a(i("477f")),r={components:{"app-order-goods-info":o.default,"app-upload-image":n.default,"app-select":s.default},data:function(){return{refundDetail:{},maxNum:6,is_show:!1,form:{id:0,type:0,goods_status:"",cause:"",image_list:[],mobile:"",remark:"",refund_price:""},goodsStatus:{index:0,visible:!1,list:[]},refundList:{index:0,visible:!1,list:[]},refundCauseList:[],disabled:!1}},methods:{getRefundDetail:function(){var t=this;t.$showLoading(),t.$request({url:this.$api.order.apply_refund,data:{id:t.form.id}}).then((function(e){t.$hideLoading(),t.is_show=!0,0===e.code?(t.refundDetail=e.data.detail,t.goodsStatus.list=e.data.list.goods_status,t.refundList.list=e.data.list.refund_list.confirm_list,t.refundCauseList=e.data.list.refund_list):uni.showModal({title:"",content:e.msg,showCancel:!1})})).catch((function(){t.$hideLoading()}))},formSubmit:function(){var t=this;if(t.form.goods_status||3!=t.form.type)if(t.form.cause)t.form.refund_price&&!(t.form.refund_price<0)||2==t.form.type?t.form.remark?t.form.mobile?this.$subscribe(this.refundDetail.template_message_list).then((function(e){t.submitAction()})).catch((function(e){t.submitAction()})):uni.showModal({title:"",content:"请填写联系方式",showCancel:!1}):uni.showModal({title:"",content:"请填写备注信息",showCancel:!1}):uni.showModal({title:"",content:"请填写退款金额",showCancel:!1});else{var e=2==t.form.type?"请填写换货原因":"请选择退款原因";uni.showModal({title:"",content:e,showCancel:!1})}else uni.showModal({title:"",content:"请选择货物状态",showCancel:!1})},submitAction:function(){var t=this;if(!t.disabled){t.disabled=!0,uni.showLoading({title:"提交中"});var e=2==t.form.type?0:t.form.refund_price;t.$request({url:t.$api.order.refund_submit,method:"post",data:{id:t.form.id,type:t.form.type,pic_list:JSON.stringify(t.form.image_list),refund_price:e,remark:this.form.remark,mobile:this.form.mobile,cause:this.form.cause,goods_status:this.form.goods_status}}).then((function(e){t.disabled=!1,uni.hideLoading(),0===e.code?uni.redirectTo({url:"/pages/order/refund/index"}):uni.showModal({title:"",content:e.msg,showCancel:!1})})).catch((function(){t.disabled=!1,uni.hideLoading()}))}},imageEvent:function(t){this.form.image_list=t.imageList},goodsStatusChange:function(t){t.is_modal_confirm||(this.goodsStatus.index!=t.index&&(this.form.cause=""),this.goodsStatus.index=t.index,this.form.goods_status=this.goodsStatus.list[this.goodsStatus.index],0==this.goodsStatus.index?this.refundList.list=this.refundCauseList.not_confirm_list:this.refundList.list=this.refundCauseList.confirm_list),this.goodsStatus.visible=!1},refundListChange:function(t){t.is_modal_confirm||(this.refundList.index=t.index,this.form.cause=this.refundList.list[this.refundList.index]),this.refundList.visible=!1},setPageTitle:function(){var t="订单售后";1==this.form.type?t="退货退款":2==this.form.type?t="换货":3==this.form.type&&(t="仅退款"),uni.setNavigationBarTitle({title:t})},setVisible:function(t){this[t].visible=!0}},onLoad:function(t){this.$commonLoad.onload(t),this.form.id=t.id,this.form.type=t.type,this.getRefundDetail()},onReady:function(){this.setPageTitle()}};e.default=r},"8e5c":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("app-layout",[t.is_show?i("v-uni-view",[i("v-uni-view",{staticClass:"refund-box"},[i("v-uni-view",{staticClass:"goods-info"},[i("app-jump-button",{attrs:{url:t.refundDetail.page_url}},[i("app-order-goods-info",{attrs:{goods:t.refundDetail.goods_info,"is-last-one":!1,"plugin-data":t.refundDetail.plugin_data,"plugin-index":0}})],1)],1),i("v-uni-view",{staticClass:"content"},[3==t.form.type?i("v-uni-view",{staticClass:"content-item"},[i("span",{staticClass:"label"},[t._v("货物状态")]),i("v-uni-view",{staticClass:"select-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setVisible("goodsStatus")}}},[i("span",{staticClass:"select-label",class:{active:t.form.goods_status,"no-active":!t.form.goods_status}},[t._v(t._s(t.form.goods_status?t.goodsStatus.list[t.goodsStatus.index]:"请选择"))]),i("v-uni-image",{staticClass:"arrow-right",attrs:{src:"/static/image/icon/arrow-right.png"}})],1)],1):t._e(),2!=t.form.type?i("v-uni-view",{staticClass:"content-item"},[i("span",{staticClass:"label"},[t._v("退款原因")]),i("v-uni-view",{staticClass:"select-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setVisible("refundList")}}},[i("span",{staticClass:"select-label",class:{active:t.form.cause,"no-active":!t.form.cause}},[t._v(t._s(t.form.cause?t.refundList.list[t.refundList.index]:"请选择"))]),i("v-uni-image",{staticClass:"arrow-right",attrs:{src:"/static/image/icon/arrow-right.png"}})],1)],1):t._e(),2==t.form.type?i("v-uni-view",{staticClass:"content-item"},[i("span",{staticClass:"label"},[t._v("换货原因")]),i("v-uni-input",{staticClass:"text",attrs:{placeholder:"请输入换货原因","placeholder-style":"color:#999999;font-size:28rpx;"},model:{value:t.form.cause,callback:function(e){t.$set(t.form,"cause",e)},expression:"form.cause"}})],1):t._e(),2!=t.form.type?i("v-uni-view",{staticClass:"content-item"},[i("span",{staticClass:"label"},[t._v("退款金额")]),t.form.refund_price?i("span",{staticClass:"price-label"},[t._v("￥")]):t._e(),i("v-uni-input",{staticClass:"text price-text",attrs:{placeholder:"最多可退款"+t.refundDetail.refund_price_text,"placeholder-style":"color:#999999;font-size:28rpx;",type:"digit"},model:{value:t.form.refund_price,callback:function(e){t.$set(t.form,"refund_price",e)},expression:"form.refund_price"}})],1):t._e(),i("v-uni-view",{staticClass:"content-item"},[i("span",{staticClass:"label"},[t._v("备注信息")]),i("v-uni-input",{staticClass:"text",attrs:{placeholder:"最多可填200个字","placeholder-style":"color:#999999;font-size:28rpx;"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),i("v-uni-view",{staticClass:"content-item"},[i("span",{staticClass:"label"},[t._v("联系方式")]),i("v-uni-input",{staticClass:"text",attrs:{placeholder:"请填写联系方式，便于卖家联系你 ","placeholder-style":"color:#999999;font-size:28rpx;",type:"number"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1)],1),i("v-uni-view",{staticClass:"upload-box"},[i("v-uni-view",{staticClass:"label"},[t._v("上传凭证")]),i("app-upload-image",{attrs:{"max-num":t.maxNum,"background-color":"#fff"},on:{imageEvent:function(e){arguments[0]=e=t.$handleEvent(e),t.imageEvent.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticStyle:{height:"80rpx","margin-top":"80rpx"}})],1),i("v-uni-view",{staticClass:"btn-box"},[i("v-uni-view",{staticClass:"btn main-center cross-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.formSubmit.apply(void 0,arguments)}}},[t._v("提交")])],1),i("app-select",{attrs:{height:"264rpx",title:"货物状态","is-show":t.goodsStatus.visible,list:t.goodsStatus.list},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.goodsStatusChange.apply(void 0,arguments)}}}),i("app-select",{attrs:{title:"退款原因","is-show":t.refundList.visible,list:t.refundList.list},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.refundListChange.apply(void 0,arguments)}}})],1):t._e()],1)},n=[]},c0e2:function(t,e,i){"use strict";i.r(e);var a=i("04b6"),o=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},d0fe:function(t,e,i){"use strict";i.r(e);var a=i("8e5c"),o=i("c0e2");for(var n in o)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("fd30");var s,r=i("f0c5"),l=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"42617a72",null,!1,a["a"],s);e["default"]=l.exports},dba6:function(t,e,i){var a=i("e636");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("3242a6eb",a,!0,{sourceMap:!1,shadowMode:!1})},e636:function(t,e,i){e=t.exports=i("24fb")(!1),e.push([t.i,".text-center[data-v-42617a72]{text-align:center}.font-weight[data-v-42617a72]{font-weight:700}.page-width[data-v-42617a72]{width:100%}.goods-hover-class[data-v-42617a72]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-42617a72]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-42617a72]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-42617a72]{width:100%}.u-hover-class[data-v-42617a72]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-42617a72]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.refund-box[data-v-42617a72]{position:absolute;width:100%;height:100%;padding:%?24?%}.refund-box .goods-info[data-v-42617a72]{background:#fff;border-radius:%?16?%;padding:%?28?%;margin-bottom:%?24?%}.refund-box .upload-box[data-v-42617a72]{background:#fff;border-radius:%?16?%;padding:%?28?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin-top:%?24?%}.refund-box .upload-box .label[data-v-42617a72]{font-size:%?28?%;color:#353535;margin-bottom:%?20?%}.refund-box .content[data-v-42617a72]{margin-top:%?24?%;padding:0 %?28?%;background:#fff;border-radius:%?16?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.refund-box .content .content-item[data-v-42617a72]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:%?88?%;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;border-bottom:%?1?% solid #e2e2e2}.refund-box .content .content-item .label[data-v-42617a72]{font-size:%?28?%;color:#353535;width:%?152?%}.refund-box .content .content-item .text[data-v-42617a72]{color:#353535;font-size:%?28?%;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1}.refund-box .content .content-item .price-text[data-v-42617a72]{color:#ff4544}.refund-box .content .content-item .price-label[data-v-42617a72]{font-size:%?28?%;color:#ff4544}.refund-box .content .content-item[data-v-42617a72]:last-child{border-bottom:0}.refund-box .content .select-box[data-v-42617a72]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;width:100%}.refund-box .content .select-box .select-label[data-v-42617a72]{font-size:%?28?%;width:100%;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden;display:inline-block;text-align:right}.refund-box .content .select-box .no-active[data-v-42617a72]{color:#999}.refund-box .content .select-box .active[data-v-42617a72]{color:#353535}.refund-box .content .select-box .arrow-right[data-v-42617a72]{width:%?12?%;height:%?22?%;margin-left:%?16?%}.btn-box[data-v-42617a72]{position:fixed;bottom:0;width:100%;padding:%?24?%;background:#f7f7f7;z-index:999}.btn-box .btn[data-v-42617a72]{border-radius:%?40?%;height:%?80?%;background:#ff4544;padding:%?24?% 0;color:#fff;font-size:%?32?%}body.?%PAGE?%[data-v-42617a72]{background:#f7f7f7}",""])},fd30:function(t,e,i){"use strict";var a=i("dba6"),o=i.n(a);o.a}}]);