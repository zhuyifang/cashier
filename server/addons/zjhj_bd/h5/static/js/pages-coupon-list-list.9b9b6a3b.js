(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-coupon-list-list"],{"0ffb":function(t,e,i){"use strict";var n=i("4ea4");i("8e6e"),i("ac6a"),i("456d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("c5f6");var o=n(i("bd86")),a=i("2f62");function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){(0,o.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var u={data:function(){return{list:[],loading:!1,page:2}},computed:s(s({},(0,a.mapState)({couponImg:function(t){return t.mallConfig.__wxapp_img.coupon}})),(0,a.mapGetters)({userInfo:"user/info"})),methods:{getList:function(){var t=this;t.$request({url:t.$api.coupon.list,method:"get"}).then((function(e){uni.hideLoading(),t.$hideLoading(),0===e.code?t.list=e.data.list:uni.showToast({title:e.msg,icon:"none",duration:1e3})})).catch((function(){uni.hideLoading(),t.$hideLoading()}))},getMore:function(){var t=this;uni.showLoading({title:"加载中..."}),t.$request({url:t.$api.coupon.list,data:{page:t.page}}).then((function(e){uni.hideLoading(),0==e.code?e.data.list.length>0&&(t.list=t.list.concat(e.data.list),t.page++):uni.showToast({title:e.msg,icon:"none",duration:1e3})})).catch((function(t){uni.hideLoading()}))},toDetail:function(t){uni.navigateTo({url:"/pages/coupon/details/details?id="+t})},receive:function(t){var e=this;if(e.loading)return!1;e.loading=!0,uni.showLoading({title:"领取中..."}),e.$request({url:e.$api.coupon.receive,data:{coupon_id:t.id}}).then((function(i){e.loading=!1,uni.hideLoading(),0===i.code?setTimeout((function(n){e.$store.dispatch("page/actionSetCoupon",{list:[Object.assign(t,i.data)],type:"receive"}),e.getList()}),200):(uni.showToast({title:i.msg,icon:"none",duration:1e3}),e.getList())})).catch((function(){uni.hideLoading(),e.$event.on(e.$const.EVENT_USER_LOGIN).then((function(){e.receive(t)}))}))}},onLoad:function(){this.$commonLoad.onload()},onShow:function(){this.$showLoading({text:"加载中..."}),this.getList()},filters:{keepNumbers:function(t){return Number(t)}},onReachBottom:function(){this.getMore()}};e.default=u},"888d":function(t,e,i){"use strict";var n=i("9e03"),o=i.n(n);o.a},"9e03":function(t,e,i){var n=i("f4b4");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("d6e76bc8",n,!0,{sourceMap:!1,shadowMode:!1})},b382:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("app-layout",[i("v-uni-view",{staticClass:"page"},t._l(t.list,(function(e){return i("v-uni-view",{key:e.id,staticClass:"coupon-item"},[i("v-uni-image",{staticClass:"coupon-bg",attrs:{src:t.couponImg["0"==e.is_receive?"coupon_enabled":"coupon_disabled"]}}),i("v-uni-view",{staticClass:"coupon-left dir-left-nowrap",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toDetail(e.id)}}},[i("v-uni-view",{staticClass:"coupon-price t-omit box-grow-0"},[2==e.type?[i("v-uni-text",[t._v(t._s(t._f("keepNumbers")(e.sub_price)))])]:[i("v-uni-text",[t._v(t._s(t._f("keepNumbers")(e.discount)))]),t._v("折")]],2),i("v-uni-view",{staticClass:"box-grow-1 dir-top-nowrap main-center coupon-content"},[i("v-uni-view",{staticClass:"t-omit",staticStyle:{width:"auto",display:"block"}},[t._v(t._s(e.name))]),e.min_price>0?i("v-uni-view",{staticClass:"min_price t-omit"},[t._v("满"+t._s(t._f("keepNumbers")(e.min_price))+"可用")]):i("v-uni-view",[t._v("无门槛使用")]),e.discount_limit?i("v-uni-view",[t._v("优惠上限:￥"+t._s(t._f("keepNumbers")(e.discount_limit)))]):t._e()],1)],1),"0"==e.is_receive?i("v-uni-view",{staticClass:"use-btn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.receive(e)}}},[i("v-uni-view",{staticClass:"use",staticStyle:{"text-align":"center"}},[t._v("立即领取")])],1):"1"==e.is_receive?i("v-uni-button",{staticClass:"use use-btn",staticStyle:{color:"#b4b4b4"}},[t._v("已领取")]):t._e(),i("v-uni-view",{staticClass:"coupon-info",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toDetail(e.id)}}},["1"==e.expire_type?i("v-uni-view",[t._v("领取后"+t._s(e.expire_day)+"天过期")]):t._e(),"2"==e.expire_type?i("v-uni-view",[t._v("有效日期: "+t._s(e.begin_time)+" - "+t._s(e.end_time))]):t._e(),"3"==e.appoint_type?i("v-uni-view",{staticClass:"t-omit"},[t._v("适用范围：全场通用")]):"4"==e.appoint_type?i("v-uni-view",{staticClass:"t-omit"},[t._v("适用范围：仅限当面付活动使用")]):"5"==e.appoint_type?i("v-uni-view",{staticClass:"t-omit"},[t._v("适用范围：仅限礼品卡使用")]):"2"==e.appoint_type?i("v-uni-view",{staticClass:"t-omit"},[i("v-uni-text",[t._v("适用商品：")]),t._l(e.goods,(function(e,n){return i("v-uni-text",{key:e.id},[i("v-uni-text",[t._v(t._s(0!=n?"、":"")+t._s(e.name))])],1)}))],2):"1"==e.appoint_type?i("v-uni-view",{staticClass:"t-omit"},[i("v-uni-text",[t._v("适用分类：")]),t._l(e.cat,(function(e,n){return i("v-uni-text",{key:e.id},[i("v-uni-text",[t._v(t._s(0!=n?"、":"")+t._s(e.name))])],1)}))],2):t._e()],1)],1)})),1)],1)},a=[]},bd29:function(t,e,i){"use strict";i.r(e);var n=i("b382"),o=i("facf");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("888d");var c,s=i("f0c5"),u=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"0b1270a6",null,!1,n["a"],c);e["default"]=u.exports},f4b4:function(t,e,i){e=t.exports=i("24fb")(!1),e.push([t.i,".text-center[data-v-0b1270a6]{text-align:center}.font-weight[data-v-0b1270a6]{font-weight:700}.page-width[data-v-0b1270a6]{width:100%}.goods-hover-class[data-v-0b1270a6]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-0b1270a6]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-0b1270a6]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-0b1270a6]{width:100%}.u-hover-class[data-v-0b1270a6]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-0b1270a6]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.page[data-v-0b1270a6]{padding:%?20?% %?25?%;width:100%}.coupon-item[data-v-0b1270a6]{height:%?275?%;position:relative;margin-bottom:%?20?%}.coupon-bg[data-v-0b1270a6]{height:%?160?%;width:100%}.coupon-left[data-v-0b1270a6]{position:absolute;left:%?20?%;top:%?30?%;color:#fff;width:70%}.coupon-left .coupon-price[data-v-0b1270a6]{float:left;max-width:55%;width:auto;height:%?92?%;line-height:%?92?%;margin-right:%?20?%}.coupon-left .min_price[data-v-0b1270a6]{width:auto}.coupon-price uni-text[data-v-0b1270a6]{font-size:%?60?%}.use[data-v-0b1270a6]{height:%?56?%;line-height:%?58?%;background-color:#fff;width:%?160?%;border-radius:%?28?%;font-size:%?24?%;color:#caa76e}.use-btn[data-v-0b1270a6]{height:%?55?%;width:%?160?%;border-radius:%?27.5?%;position:absolute;right:%?20?%;border:0;top:%?48?%}.coupon-info[data-v-0b1270a6]{position:absolute;top:%?160?%;left:0;right:0;height:%?115?%;background-color:#fff;border:%?2?% solid #cfcfcf;border-top:0;padding:%?20?% %?25?%;font-size:%?26?%;color:#666;border-bottom-left-radius:%?15?%;border-bottom-right-radius:%?15?%}.discount_limit[data-v-0b1270a6]{width:%?286?%;text-align:center;color:#fff}.coupon-content[data-v-0b1270a6]{font-size:%?28?%;line-height:1.1}body.?%PAGE?%[data-v-0b1270a6]{background:#f7f7f7}",""])},facf:function(t,e,i){"use strict";i.r(e);var n=i("0ffb"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a}}]);