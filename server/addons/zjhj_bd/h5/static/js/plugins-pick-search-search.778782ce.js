(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["plugins-pick-search-search"],{"0b6f":function(t,e,a){"use strict";var i=a("4ea4");a("8e6e"),a("456d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("ac6a");var n=i(a("75fc"));a("96cf");var o=i(a("3b8d")),r=i(a("bd86")),s=a("2f62");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){(0,r.default)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var u={name:"search",data:function(){return{list:[],keyword:"",activity:{},historyList:[],isSearch:!1,page:1}},onLoad:function(){this.$commonLoad.onload(),this.historyList=this.getHistory()},computed:d(d({},(0,s.mapState)({appImg:function(t){return t.mallConfig.__wxapp_img.mall},appSetting:function(t){return t.mallConfig.mall.setting}})),(0,s.mapGetters)("mallConfig",{getTheme:"getTheme"})),onReachBottom:function(){this.page++,this.getList()},methods:{navigator:function(t){uni.navigateTo({url:t})},search:function(){var t=this.keyword;""!==t&&(this.keyword=t.trim(),this.reset())},reset:function(){this.page=1,this.getGoodsList()},getList:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$request({url:this.$api.pick.goods_list,method:"get",data:{keyword:this.keyword,page:this.page}});case 2:e=t.sent,0===e.code&&(i=e.data.list,(a=this.list).push.apply(a,(0,n.default)(i)));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getGoodsList:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(){var e,a,i,n,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$request({url:this.$api.pick.goods_list,method:"get",data:{keyword:this.keyword,page:this.page}});case 2:e=t.sent,0===e.code&&(a=e.data,i=a.bg_url,n=a.list,o=a.form,r=a.activity,this.isSearch=!0,this.list=n,this.background=i,this.form=o,this.activity=r,this.setHistory());case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),setHistory:function(){var t=this.getHistory(),e=this.keyword.trim();t.forEach((function(a,i){a.keyword===e&&t.splice(i,1)})),t.push({keyword:e}),t.length>20&&t.shift(),this.historyList=t,this.$storage.setStorageSync("SEARCH_HISTORY_LIST",t)},getHistory:function(){var t=this.$storage.getStorageSync("SEARCH_HISTORY_LIST");return t||(t=[]),t},deleteHistory:function(){this.$storage.removeStorageSync("SEARCH_HISTORY_LIST"),this.historyList=[]},cancel:function(){this.isSearch=!1,this.keyword="",this.list=[]},historyClick:function(t){this.keyword=t.trim(),this.reset()},deleteKeyword:function(){this.keyword=""}},watch:{keyword:{handler:function(t){""==t&&this.cancel()},immediate:!0}}};e.default=u},1188:function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-layout",[a("v-uni-view",{staticClass:"search"},[a("v-uni-view",{staticClass:"search-input dir-left-nowrap cross-center main-center"},[a("v-uni-input",{staticClass:"input",attrs:{type:"text",focus:!0},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.search.apply(void 0,arguments)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),a("v-uni-text",{staticClass:"search-text",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.search.apply(void 0,arguments)}}},[t._v("搜索")]),t.keyword.length>0?a("v-uni-image",{staticClass:"delete",attrs:{src:"/static/image/icon/delete-yuan.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteKeyword.apply(void 0,arguments)}}}):t._e()],1),!t.isSearch&&t.historyList.length>0?a("v-uni-view",{staticClass:"history"},[a("v-uni-view",{staticClass:"dir-left-nowrap cross-center title"},[a("v-uni-view",{staticClass:"box-grow-1"},[t._v("历史搜索")]),a("v-uni-image",{staticClass:"box-grow-0",attrs:{src:"/static/image/icon/delete.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteHistory.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"dir-left-wrap history-list"},t._l(t.historyList,(function(e,i){return a("v-uni-view",{key:i,staticClass:"box-grow-0 cross-center item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.historyClick(e.keyword)}}},[t._v(t._s(e.keyword))])})),1)],1):t._e(),a("v-uni-view",{staticClass:"list"},[t._l(t.list,(function(e){return a("v-uni-view",{key:e.id,staticClass:"item dir-left-nowrap",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.navigator("/plugins/pick/detail/detail?goods_id="+e.id)}}},[0==e.goods_stock?a("v-uni-view",{staticClass:"out-dialog"},[a("v-uni-image",{attrs:{src:"1"==t.appSetting.is_use_stock?t.appImg.plugins_out:t.appSetting.sell_out_pic}})],1):t._e(),a("v-uni-image",{staticClass:"image",attrs:{src:e.cover_pic}}),a("v-uni-view",{staticClass:"content dir-top-nowrap main-between"},[a("v-uni-text",{staticClass:"name t-omit-two"},[t._v(t._s(e.name))]),a("v-uni-view",{staticClass:"information dir-left-nowrap main-between cross-bottom"},[a("v-uni-view",{staticClass:"num"},[a("v-uni-view",{staticClass:"value"},[a("v-uni-text",{staticClass:"price",style:{color:t.getTheme.color}},[t._v("￥"+t._s(e.price))]),a("v-uni-text",{staticClass:"original_price"},[t._v("￥"+t._s(e.original_price))])],1),a("v-uni-text",{staticClass:"sales"},[t._v(t._s(e.sales))])],1),a("v-uni-view",[a("v-uni-view",{staticClass:"go-button",style:{"background-color":t.getTheme.background}},[t._v("去凑单")])],1)],1)],1)],1)})),t.isSearch?a("v-uni-view",{staticClass:"goods-list"},[t.list.length<=0?[a("v-uni-view",{staticClass:"main-center no-result"},[a("v-uni-view",{staticClass:"dir-left-nowrap cross-center"},[a("v-uni-image",{staticClass:"box-grow-0 empty",attrs:{src:"/static/image/icon/empty.png"}}),a("v-uni-view",{staticClass:"box-grow-1"},[a("v-uni-view",[t._v("抱歉，没有相关商品")])],1)],1)],1)]:t._e()],2):t._e()],2)],1)],1)},o=[]},"2cf0":function(t,e,a){var i=a("f51e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("433e5946",i,!0,{sourceMap:!1,shadowMode:!1})},"59ac":function(t,e,a){"use strict";var i=a("2cf0"),n=a.n(i);n.a},"75fc":function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return p}));var i=a("a745"),n=a.n(i),o=a("db2a");function r(t){if(n()(t))return Object(o["a"])(t)}var s=a("67bb"),c=a.n(s),d=a("5d58"),u=a.n(d),l=a("774e"),f=a.n(l);function h(t){if("undefined"!==typeof c.a&&null!=t[u.a]||null!=t["@@iterator"])return f()(t)}var g=a("e630");function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(t){return r(t)||h(t)||Object(g["a"])(t)||v()}},c4f0:function(t,e,a){"use strict";a.r(e);var i=a("0b6f"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},c5a3:function(t,e,a){"use strict";a.r(e);var i=a("1188"),n=a("c4f0");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("59ac");var r,s=a("f0c5"),c=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"ea3f6e6a",null,!1,i["a"],r);e["default"]=c.exports},f51e:function(t,e,a){e=t.exports=a("24fb")(!1),e.push([t.i,".text-center[data-v-ea3f6e6a]{text-align:center}.font-weight[data-v-ea3f6e6a]{font-weight:700}.page-width[data-v-ea3f6e6a]{width:100%}.goods-hover-class[data-v-ea3f6e6a]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-ea3f6e6a]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-ea3f6e6a]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-ea3f6e6a]{width:100%}.u-hover-class[data-v-ea3f6e6a]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-ea3f6e6a]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.search[data-v-ea3f6e6a]{position:absolute;width:100%;height:100%}.search-input[data-v-ea3f6e6a]{width:%?750?%;height:%?105?%;background-color:#efeff4;position:fixed;top:0}.input[data-v-ea3f6e6a]{height:%?64?%;width:%?620?%;background-color:#fff;border-radius:%?36?%;padding:0 %?36?%}.search-text[data-v-ea3f6e6a]{font-size:%?32?%;margin-left:%?20?%}.list[data-v-ea3f6e6a]{padding-bottom:%?96?%;margin-top:%?105?%}.item[data-v-ea3f6e6a]{padding:%?24?%;border-bottom:%?1?% solid #eee;background-color:#fff;position:relative}.item .out-dialog[data-v-ea3f6e6a]{width:%?220?%;height:%?220?%;border-radius:%?16?%;position:absolute;top:%?24?%;left:%?24?%;z-index:10;background-color:rgba(0,0,0,.5)}.item .out-dialog uni-image[data-v-ea3f6e6a]{width:%?220?%;height:%?220?%;border-radius:%?16?%}.image[data-v-ea3f6e6a]{width:%?220?%;height:%?220?%;border-radius:%?16?%;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.content[data-v-ea3f6e6a]{width:%?478?%;margin-left:%?24?%;height:%?228?%}.name[data-v-ea3f6e6a]{font-size:%?28?%;color:#353535}.generate[data-v-ea3f6e6a]{position:fixed;bottom:0;height:%?96?%;width:%?750?%;background-color:#fff;border-top:%?1?% solid #e2e2e2}.generate-img[data-v-ea3f6e6a]{width:%?34?%;height:%?34?%;margin-right:%?7.5?%}.generate-text[data-v-ea3f6e6a]{margin-left:%?7.5?%;font-size:%?32?%;color:#ff4d4c}.information[data-v-ea3f6e6a]{margin-bottom:%?12?%}.num[data-v-ea3f6e6a]{margin-bottom:%?8?%}.sales[data-v-ea3f6e6a]{font-size:%?24?%;color:#999;line-height:1}.value[data-v-ea3f6e6a]{margin-bottom:%?18?%;line-height:1}.price[data-v-ea3f6e6a]{font-size:%?32?%;line-height:1}.original_price[data-v-ea3f6e6a]{text-decoration:line-through;font-size:%?24?%;line-height:1;color:#999;margin-left:%?10?%}.go-button[data-v-ea3f6e6a]{height:%?56?%;line-height:%?56?%;width:%?130?%;font-size:%?28?%;border-radius:%?28?%;text-align:center;color:#fff}.history[data-v-ea3f6e6a]{padding:%?36?% %?24?%;border-radius:%?16?% %?16?% 0 0;background-color:#fff;font-size:%?28?%;margin-top:%?105?%}.history .title[data-v-ea3f6e6a]{padding-bottom:%?24?%;color:#666}.history .title uni-image[data-v-ea3f6e6a]{width:%?28?%;height:%?34?%;display:block}.history .history-list .item[data-v-ea3f6e6a]{height:%?64?%;background-color:#f7f7f7;padding:0 %?20?%;margin-right:%?20?%;margin-bottom:%?16?%;border-radius:%?32?%}.delete[data-v-ea3f6e6a]{width:%?32?%;height:%?32?%;position:absolute;right:%?122?%;top:%?36?%;border-radius:50%;z-index:1500}.goods-list .no-result[data-v-ea3f6e6a]{height:%?156?%;padding:%?28?% 0;font-size:%?28?%;background-color:#fff}.goods-list .no-result .empty[data-v-ea3f6e6a]{width:%?100?%;height:%?100?%;display:block;margin-right:%?40?%}body.?%PAGE?%[data-v-ea3f6e6a]{background:#f7f7f7}",""])}}]);