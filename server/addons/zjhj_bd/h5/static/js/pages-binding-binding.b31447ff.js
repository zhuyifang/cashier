(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-binding-binding"],{"075b":function(e,n,t){"use strict";var i=t("46a0"),o=t.n(i);o.a},"27f4":function(e,n,t){"use strict";var i=t("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(t("4ee3")),a={name:"binding",data:function(){return{bind:!1,phone:""}},onLoad:function(){var e=this;this.$commonLoad.onload(),this.$request({url:this.$api.user.user_info}).then((function(n){0===n.code&&""!==n.data.mobile&&(e.bind=!0,e.phone=n.data.mobile)}))},methods:{bindPhone:function(e){this.bind=e}},components:{"app-phone-binding":o.default}};n.default=a},"3d21":function(e,n,t){"use strict";var i=t("4ea4");t("8e6e"),t("ac6a"),t("456d"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(t("bd86")),a=t("2f62");function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,o.default)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p={name:"app-phone-binding",data:function(){return{code:"",value:"",activeIndex:2,timeNum:60,timeIng:0,phoneNumber:null,verificationCode:null,isSend:!1}},props:{bind:{type:Boolean},phone:{type:String}},computed:r({},(0,a.mapState)({wxapp_img:function(e){return e.mallConfig.__wxapp_img},is_manual_mobile_auth:function(e){return e.mallConfig.mall.setting.is_manual_mobile_auth}})),created:function(){},methods:{getPhoneNumber:function(e){var n=this;if("getPhoneNumber:fail user deny"!==e.detail.errMsg&&this.code){var t=this;this.$request({method:"post",url:t.$api.phone.binding,data:{encryptedData:e.detail.encryptedData,iv:e.detail.iv,code:t.code}}).then((function(e){n.value=e.data.mobile}))}},bindPhone:function(e,n){var t=this;if(1===n){if(""===this.value)return;this.$emit("click",e)}else{if(null===this.verificationCode)return;this.$request({url:this.$api.phone.binding,method:"post",data:{mobile:this.phoneNumber,mobile_code:this.verificationCode}}).then((function(n){0===n.code?(t.$emit("click",e),t.phone=t.phoneNumber):1===n.code&&uni.showModal({title:"提示",content:n.msg})}))}},change:function(){var e=this;clearInterval(this.timeIng),this.timeIng=setInterval((function(){e.timeNum--,0===e.timeNum&&(clearInterval(e.timeIng),e.isSend=!1)}),1e3)},clearPhone:function(e){this.$emit("click",e)},obtain:function(){var e=this;null!==this.phoneNumber&&(this.timeNum=60,this.$request({url:this.$api.phone.code,data:{mobile:this.phoneNumber}}).then((function(n){0===n.code?(e.change(),uni.showToast({title:n.msg,icon:"none",duration:1e3}),e.isSend=!0):1===n.code&&uni.showModal({title:"提示",content:n.msg})})))},setActive:function(e){this.activeIndex=e}},beforeDestroy:function(){clearInterval(this.timeIng)}};n.default=p},"46a0":function(e,n,t){var i=t("b484");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=t("4f06").default;o("5f1a1c70",i,!0,{sourceMap:!1,shadowMode:!1})},"4ee3":function(e,n,t){"use strict";t.r(n);var i=t("aa61"),o=t("a787");for(var a in o)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(a);t("075b");var d,r=t("f0c5"),p=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"3ede0e48",null,!1,i["a"],d);n["default"]=p.exports},"54a1":function(e,n,t){"use strict";var i;t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){return i}));var o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("app-layout",[t("app-phone-binding",{attrs:{bind:e.bind,phone:e.phone},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.bindPhone.apply(void 0,arguments)}}})],1)},a=[]},"958d":function(e,n,t){"use strict";t.r(n);var i=t("54a1"),o=t("fdff");for(var a in o)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(a);var d,r=t("f0c5"),p=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],d);n["default"]=p.exports},a787:function(e,n,t){"use strict";t.r(n);var i=t("3d21"),o=t.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(a);n["default"]=o.a},aa61:function(e,n,t){"use strict";var i;t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){return i}));var o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-uni-view",{staticClass:"app-phone-binding"},[e.bind?t("v-uni-view",{staticClass:"app-bound dir-top-nowrap cross-center"},[t("v-uni-image",{staticClass:"app-image",attrs:{src:e.wxapp_img.mall.binding}}),t("v-uni-view",{staticClass:"app-phone-text dir-top-nowrap"},[t("v-uni-text",[e._v("已绑定手机")]),t("v-uni-text",{staticClass:"app-hone"},[e._v(e._s(e.phone))])],1),t("v-uni-view",{staticClass:"app-button"},[t("app-button",{attrs:{type:"important",round:!0,background:"#ff4544",height:"88",width:"700",fontSize:"32"},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.clearPhone(!1)}}},[e._v("更换绑定")])],1)],1):[t("v-uni-view",{staticClass:"app-unbound"},[t("v-uni-view",{staticClass:"content"},[2===e.activeIndex?t("v-uni-view",{staticClass:"manual-input dir-top-nowrap"},[t("v-uni-view",{staticClass:"top cross-center"},[t("v-uni-input",{attrs:{type:"number",placeholder:"输入手机号"},model:{value:e.phoneNumber,callback:function(n){e.phoneNumber=n},expression:"phoneNumber"}})],1),t("v-uni-view",{staticClass:"bottom dir-left-nowrap cross-center"},[t("v-uni-input",{attrs:{type:"number",placeholder:"输入验证码"},model:{value:e.verificationCode,callback:function(n){e.verificationCode=n},expression:"verificationCode"}}),t("v-uni-view",{staticClass:"line"}),e.isSend?t("v-uni-view",{staticClass:"btn"},[e._v("重新发送"+e._s(e.timeNum)+"S")]):t("v-uni-view",{staticClass:"btn",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.obtain.apply(void 0,arguments)}}},[e._v("获取验证码")])],1)],1):e._e(),t("v-uni-view",{staticClass:"sure-button",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.bindPhone(!0,e.activeIndex)}}},[e._v("确认")])],1)],1)]],2)},a=[]},b484:function(e,n,t){n=e.exports=t("24fb")(!1),n.push([e.i,".text-center[data-v-3ede0e48]{text-align:center}.font-weight[data-v-3ede0e48]{font-weight:700}.page-width[data-v-3ede0e48]{width:100%}.goods-hover-class[data-v-3ede0e48]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-3ede0e48]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-3ede0e48]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-3ede0e48]{width:100%}.u-hover-class[data-v-3ede0e48]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-3ede0e48]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.app-phone-binding[data-v-3ede0e48]{position:absolute;height:100%;width:100%;background-color:#f7f7f7}.app-phone-binding .app-unbound[data-v-3ede0e48]{width:100%;background-color:#f7f7f7}.app-phone-binding .app-unbound .header[data-v-3ede0e48]{width:100%;height:%?86?%;background-color:#fff;border-bottom:%?1?% solid #e2e2e2;text-align:center;margin-bottom:%?8?%}.app-phone-binding .app-unbound .header .box-grow-1 uni-text[data-v-3ede0e48]{display:inline-block;height:%?84?%;line-height:%?84?%;border-bottom-color:rgba(0,0,0,0);border-bottom-style:solid;border-bottom-width:%?2?%;color:#353535;font-size:%?28?%}.app-phone-binding .app-unbound .header .box-grow-1 .active-index[data-v-3ede0e48]{border-bottom-color:#ff4544;color:#ff4544}.app-phone-binding .app-unbound .content[data-v-3ede0e48]{width:100%;height:%?110?%;background-color:#fff;padding:%?10?% 0;-webkit-box-sizing:border-box;box-sizing:border-box}.app-phone-binding .app-unbound .content .input-view[data-v-3ede0e48]{margin-left:%?24?%;background-color:#fff;height:%?80?%;width:%?726?%}.app-phone-binding .app-unbound .content .input-view .input[data-v-3ede0e48]{height:%?80?%;width:%?516?%;line-height:%?80?%;background-color:#f7f7f7;padding-left:%?24?%;-webkit-box-sizing:border-box;box-sizing:border-box;font-size:%?28?%;color:#999;margin-right:%?16?%}.app-phone-binding .app-unbound .content .input-view .input-value[data-v-3ede0e48]{color:#353535}.app-phone-binding .app-unbound .content .input-view .line[data-v-3ede0e48]{width:%?1?%;height:%?36?%;background-color:#e2e2e2}.app-phone-binding .app-unbound .content .input-view .button[data-v-3ede0e48]{width:%?194?%;height:%?80?%;line-height:%?80?%;color:#ff4544;font-size:%?28?%;background-color:#fff;border:none;border-radius:0;text-align:center;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box}.app-phone-binding .app-unbound .content .manual-input[data-v-3ede0e48]{width:100%;height:%?200?%;background-color:#fff}.app-phone-binding .app-unbound .content .manual-input .top[data-v-3ede0e48]{height:%?100?%;font-size:%?28?%;border-bottom:%?1?% solid #e2e2e2}.app-phone-binding .app-unbound .content .manual-input .top>uni-input[data-v-3ede0e48]{width:%?710?%;height:%?60?%;padding-left:%?40?%;-webkit-box-sizing:border-box;box-sizing:border-box}.app-phone-binding .app-unbound .content .manual-input .bottom[data-v-3ede0e48]{height:%?100?%}.app-phone-binding .app-unbound .content .manual-input .bottom>uni-input[data-v-3ede0e48]{width:%?529?%;height:%?60?%;padding-left:%?40?%;font-size:%?28?%;-webkit-box-sizing:border-box;box-sizing:border-box}.app-phone-binding .app-unbound .content .manual-input .bottom .line[data-v-3ede0e48]{width:%?1?%;height:%?32?%;background-color:#e2e2e2}.app-phone-binding .app-unbound .content .manual-input .bottom .btn[data-v-3ede0e48]{height:%?100?%;line-height:%?100?%;width:%?220?%;font-size:%?28?%;text-align:center;color:#ff4544}.app-phone-binding .app-unbound .content .sure-button[data-v-3ede0e48]{width:%?702?%;height:%?88?%;line-height:%?88?%;text-align:center;margin:%?80?% %?20?% 0 %?24?%;background-color:#ff4544;color:#fff;font-size:%?32?%;border-radius:%?44?%}.app-phone-binding .app-bound[data-v-3ede0e48]{width:%?750?%}.app-phone-binding .app-bound .app-image[data-v-3ede0e48]{width:%?288?%;height:%?288?%;margin:%?64?% %?0?% %?56?% %?0?%}.app-phone-binding .app-bound .app-phone-text[data-v-3ede0e48]{text-align:center;color:#666;font-size:%?30?%;margin-bottom:%?60?%}.app-phone-binding .app-bound .app-phone-text .app-hone[data-v-3ede0e48]{margin-top:%?15?%}.app-phone-binding .app-bound .app-phone-text .app-button[data-v-3ede0e48]{height:100%;border:none;font-size:%?26?%;color:#ff4544;padding:0 0;margin-top:%?64?%;margin-left:%?24?%;margin-right:%?24?%}.app-phone-binding .app-bound .app-phone-text .app-button[data-v-3ede0e48]:after{display:none}body.?%PAGE?%[data-v-3ede0e48]{background:#f7f7f7}",""])},fdff:function(e,n,t){"use strict";t.r(n);var i=t("27f4"),o=t.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(a);n["default"]=o.a}}]);