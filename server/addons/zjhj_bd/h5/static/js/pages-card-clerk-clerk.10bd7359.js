(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-card-clerk-clerk"],{3264:function(t,a,i){"use strict";var e;i.d(a,"b",(function(){return n})),i.d(a,"c",(function(){return o})),i.d(a,"a",(function(){return e}));var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("app-layout",[i("v-uni-view",{staticClass:"box"},[i("v-uni-view",{staticClass:"item"},[t.detail.name?i("v-uni-view",{staticClass:"order-info"},[i("v-uni-view",[i("v-uni-view",{staticClass:"info-label"},[t._v("收货人："),i("v-uni-text",[t._v(t._s(t.detail.name))])],1)],1),i("v-uni-view",[i("v-uni-view",{staticClass:"info-label"},[t._v("联系方式："),i("v-uni-text",[t._v(t._s(t.detail.mobile))])],1)],1)],1):t._e(),i("v-uni-view",{staticClass:"card-info"},[i("v-uni-image",{staticClass:"card-img",attrs:{src:t.detail.pic_url}}),i("v-uni-view",{staticClass:"card-name t-omit-two"},[t._v(t._s(t.detail.card_name))]),i("v-uni-view",{staticClass:"card-other"},[i("v-uni-view",{staticClass:"other-label"},[t._v("有效时间")]),i("v-uni-view",[t._v(t._s(t.detail.start_time)+" - "+t._s(t.detail.end_time))]),i("v-uni-view",{staticClass:"other-label"},[t._v("发放时间")]),i("v-uni-view",[t._v(t._s(t.detail.created_at))]),i("v-uni-view",{staticClass:"other-label"},[t._v("使用说明")]),i("v-uni-text",[t._v(t._s(t.detail.content))])],1)],1),t.detail.number||0==t.detail.number?i("v-uni-view",{staticClass:"order-info"},[i("v-uni-view",{staticStyle:{"margin-bottom":"24rpx"}},[t._v("核销信息")]),i("v-uni-view",{staticClass:"dir-left-nowrap"},[i("v-uni-view",{staticClass:"info-label"},[t._v("剩余次数：")]),i("v-uni-view",[i("v-uni-view",[t._v(t._s(t.detail.number-t.detail.use_number)+"次")])],1)],1),i("v-uni-view",{staticClass:"dir-left-nowrap"},[i("v-uni-view",{staticClass:"info-label"},[t._v("已核销次数：")]),i("v-uni-view",[i("v-uni-view",[t._v(t._s(t.detail.use_number)+"次")])],1)],1),i("v-uni-view",{staticClass:"dir-left-nowrap"},[i("v-uni-view",{staticClass:"info-label"},[t._v("总次数：")]),i("v-uni-view",[i("v-uni-view",[t._v(t._s(t.detail.number)+"次")])],1)],1)],1):t._e()],1),0==t.detail.is_use&&0==t.detail.receive_id?i("v-uni-view",{staticClass:"bottom cross-center"},[0==t.detail.is_store_permission?i("v-uni-view",{staticClass:"no-permission"},[i("v-uni-button",{staticClass:"submit-btn"},[t._v("无该门店核销权限")])],1):i("v-uni-view",{on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.submit=!0}}},[i("v-uni-button",{staticClass:"submit-btn"},[t._v("核销卡券")])],1)],1):t._e()],1),t.msg||t.submit?i("v-uni-view",{staticClass:"bg cross-center main-center",on:{touchmove:function(a){a.stopPropagation(),a.preventDefault(),arguments[0]=a=t.$handleEvent(a)}}},[i("v-uni-view",{staticClass:"dialog"},[i("v-uni-view",{staticClass:"title"},[t._v(t._s(t.submit?"输入本次核销次数":"提示"))]),t.msg?i("v-uni-view",{staticClass:"dialog-content"},[t._v(t._s(t.msg))]):t._e(),t.submit?i("v-uni-view",{staticClass:"dialog-content"},[i("v-uni-input",{staticClass:"input-number",attrs:{type:"number"},model:{value:t.useNumber,callback:function(a){t.useNumber=a},expression:"useNumber"}}),t._v("次")],1):t._e(),t.msg?i("v-uni-view",{staticClass:"dialog-btn",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.closeDialog.apply(void 0,arguments)}}},[t._v("确认")]):t._e(),t.submit?i("v-uni-view",{staticClass:"dialog-btn main-center cross-center"},[i("v-uni-view",{staticStyle:{color:"#666666",width:"50%"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.submit=!1}}},[t._v("取消")]),i("v-uni-view",{staticClass:"line"}),i("v-uni-view",{staticStyle:{width:"50%"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.clerk.apply(void 0,arguments)}}},[t._v("确定")])],1):t._e()],1)],1):t._e()],1)},o=[]},"361d":function(t,a,i){a=t.exports=i("24fb")(!1),a.push([t.i,".text-center[data-v-2aa50dfb]{text-align:center}.font-weight[data-v-2aa50dfb]{font-weight:700}.page-width[data-v-2aa50dfb]{width:100%}.goods-hover-class[data-v-2aa50dfb]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-2aa50dfb]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}uni-page-body[data-v-2aa50dfb]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-2aa50dfb]{width:100%}.u-hover-class[data-v-2aa50dfb]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-2aa50dfb]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.box[data-v-2aa50dfb]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.box .item[data-v-2aa50dfb]{margin-bottom:%?140?%}.card-info[data-v-2aa50dfb]{margin:0 %?24?%;border-radius:%?15?%;background-color:#fff;position:relative;margin-top:%?70?%;text-align:center;padding:%?80?% %?24?% %?36?%;margin-bottom:%?20?%}.card-img[data-v-2aa50dfb]{height:%?88?%;width:%?88?%;position:absolute;left:0;right:0;margin:0 auto;top:%?-44?%;border-radius:%?44?%}.card-name[data-v-2aa50dfb]{font-size:%?46?%;max-width:70%;color:#353535;margin:0 auto %?38?%}.card-status[data-v-2aa50dfb]{width:%?160?%;height:%?60?%;position:absolute;bottom:%?30?%;left:0;right:0;margin:0 auto;line-height:%?60?%;font-size:15px;border-radius:%?30?%;background-color:#feeeee;color:#ff4544}.card-about[data-v-2aa50dfb]{padding:%?40?%;width:90%;margin:0 auto %?50?%;border-radius:%?15?%;background-color:#fff;font-size:15px}.about-title[data-v-2aa50dfb]{color:#999;margin-bottom:%?40?%}.submit-btn[data-v-2aa50dfb]{width:%?702?%;height:%?88?%;margin:0 auto;padding:0;text-align:center;line-height:%?88?%;border-radius:%?44?%;background-color:#ff4544;color:#fff;font-size:%?32?%}.bottom[data-v-2aa50dfb]{position:fixed;bottom:0;height:%?140?%;width:100%;padding:0 %?24?%;border-top:%?1?% solid #e2e2e2;background:#fff}.order-info[data-v-2aa50dfb]{width:%?702?%;margin:%?24?%;background-color:#fff;border-radius:%?16?%;padding:%?28?% %?24?%;font-size:%?28?%;color:#353535}.info-label[data-v-2aa50dfb]{color:#999}.info-label uni-text[data-v-2aa50dfb]{color:#353535}.card-other[data-v-2aa50dfb]{text-align:left;font-size:%?28?%;color:#353535;border-top:%?1?% solid #e2e2e2}.other-label[data-v-2aa50dfb]{color:#999;margin:%?30?% 0 %?22?%}.bg[data-v-2aa50dfb]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.3);z-index:1000}.dialog[data-v-2aa50dfb]{width:%?630?%;background-color:#fff;padding-top:%?40?%;border-radius:%?16?%;font-size:%?32?%;color:#353535;text-align:center}.dialog .title[data-v-2aa50dfb]{font-size:%?32?%;color:#353535;margin-bottom:%?40?%}.dialog-content[data-v-2aa50dfb]{margin:%?40?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.dialog-content .input-number[data-v-2aa50dfb]{width:%?288?%;background:#f7f7f7;border-radius:%?16?%;height:%?80?%;margin-right:%?16?%;line-height:%?80?%}.dialog-btn[data-v-2aa50dfb]{color:#ff4544;height:%?88?%;line-height:%?88?%;border-top:%?1?% solid #e2e2e2}.line[data-v-2aa50dfb]{height:%?45?%;width:%?1?%;background-color:#e2e2e2}.no-permission uni-button[data-v-2aa50dfb]{background-color:#b2b2b2}body.?%PAGE?%[data-v-2aa50dfb]{background:#f7f7f7}",""])},5065:function(t,a,i){var e=i("361d");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=i("4f06").default;n("0e78e2cb",e,!0,{sourceMap:!1,shadowMode:!1})},7058:function(t,a,i){"use strict";i.r(a);var e=i("9934"),n=i.n(e);for(var o in e)["default"].indexOf(o)<0&&function(t){i.d(a,t,(function(){return e[t]}))}(o);a["default"]=n.a},9934:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e={data:function(){return{detail:{start_time:"",end_time:""},msg:null,is_clerk:0,submit:!1,cardId:null,surplus_number:0,useNumber:"",qrCodeId:-1}},name:"clerk",methods:{getList:function(t){var a=this;a.$showLoading({text:"加载中..."}),a.$request({url:a.$api.card.detail,data:{cardId:t,qr_code_id:a.qrCodeId}}).then((function(i){a.$hideLoading(),0===i.code?(a.detail=i.data.card,a.cardId=t):uni.showToast({title:i.msg,icon:"none",duration:1e3}),a.detail.clerk_number&&a.detail.clerk_number>=1&&uni.showModal({title:"提示",content:"核销码已失效",showCancel:!1,complete:function(t){uni.navigateBack()}})})).catch((function(){a.$hideLoading()}))},clerk:function(){var t=this;if(uni.showLoading({title:"核销中..."}),!t.useNumber)return uni.showToast({title:"请输入核销次数",icon:"none",duration:2e3}),!1;t.$request({url:t.$api.card.clerk,data:{cardId:t.cardId,use_number:t.useNumber,qr_code_id:t.qrCodeId}}).then((function(a){uni.hideLoading(),0===a.code?(t.is_clerk=a.data.is_clerk,t.msg=a.msg,t.submit=!1,t.surplus_number=a.data.surplus_number):uni.showToast({title:a.msg,icon:"none",duration:2e3})})).catch((function(){uni.hideLoading()}))},closeDialog:function(){if(this.msg){if(this.msg="",this.is_clerk){this.surplus_number>0?"/plugins/clerk/order/order?status=2&type=0":"/plugins/clerk/order/order?status=2&type=1",uni.navigateBack({})}}else this.msg=""}},onLoad:function(t){this.$commonLoad.onload(t),t.qr_code_id&&(this.qrCodeId=t.qr_code_id),this.getList(t.cardId)}};a.default=e},dae0:function(t,a,i){"use strict";var e=i("5065"),n=i.n(e);n.a},e78d:function(t,a,i){"use strict";i.r(a);var e=i("3264"),n=i("7058");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(a,t,(function(){return n[t]}))}(o);i("dae0");var d,s=i("f0c5"),r=Object(s["a"])(n["default"],e["b"],e["c"],!1,null,"2aa50dfb",null,!1,e["a"],d);a["default"]=r.exports}}]);